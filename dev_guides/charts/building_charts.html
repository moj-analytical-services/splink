
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://moj-analytical-services.github.io/splink/dev_guides/charts/building_charts.html">
      
      
        <link rel="prev" href="understanding_and_editing_charts.html">
      
      
        <link rel="next" href="../udfs.html">
      
      
        
      
      
        <link rel="alternate" type="application/rss+xml" title="RSS feed" href="../../feed_rss_created.xml">
        <link rel="alternate" type="application/rss+xml" title="RSS feed of updated content" href="../../feed_rss_updated.xml">
      
      <link rel="icon" href="../../img/favicon.ico">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.1">
    
    
      
        <title>Building new charts - Splink</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.484c7ddc.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.ab4e12ef.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../assets/_mkdocstrings.css">
    
      <link rel="stylesheet" href="../../css/custom.css">
    
      <link rel="stylesheet" href="../../css/neoteroi-mkdocs.css">
    
      <link rel="stylesheet" href="../../css/ansi-colours.css">
    
      <link rel="stylesheet" href="../../css/jupyter-cells.css">
    
      <link rel="stylesheet" href="../../css/pandas-dataframe.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      
  


  
  

<script id="__analytics">function __md_analytics(){function e(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],e("js",new Date),e("config","G-L6JT8NK528"),document.addEventListener("DOMContentLoaded",(function(){document.forms.search&&document.forms.search.query.addEventListener("blur",(function(){this.value&&e("event","search",{search_term:this.value})}));document$.subscribe((function(){var t=document.forms.feedback;if(void 0!==t)for(var a of t.querySelectorAll("[type=submit]"))a.addEventListener("click",(function(a){a.preventDefault();var n=document.location.pathname,d=this.getAttribute("data-md-value");e("event","feedback",{page:n,data:d}),t.firstElementChild.disabled=!0;var r=t.querySelector(".md-feedback__note [data-md-value='"+d+"']");r&&(r.hidden=!1)})),t.hidden=!1})),location$.subscribe((function(t){e("config","G-L6JT8NK528",{page_path:t.pathname})}))}));var t=document.createElement("script");t.async=!0,t.src="https://www.googletagmanager.com/gtag/js?id=G-L6JT8NK528",document.getElementById("__analytics").insertAdjacentElement("afterEnd",t)}</script>
  
    <script>"undefined"!=typeof __md_analytics&&__md_analytics()</script>
  

    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="teal" data-md-color-accent="purple">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#building-a-new-chart-in-splink" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
        <aside class="md-banner">
          <div class="md-banner__inner md-grid md-typeset">
            
            

    <center> Still using Splink 3 and looking for the old docs?  You can find them  <a href ="https://moj-analytical-services.github.io/splink3_legacy_docs/index.html">here</a></center>


          </div>
          
        </aside>
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Splink" class="md-header__button md-logo" aria-label="Splink" data-md-component="logo">
      
  <img src="../../img/favicon.ico" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Splink
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Building new charts
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="teal" data-md-color-accent="purple"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="teal" data-md-color-accent="purple"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6m0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4M7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" title="Share" aria-label="Share" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91s2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/moj-analytical-services/splink" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../getting_started.html" class="md-tabs__link">
        
  
  
    
  
  Getting Started

      </a>
    </li>
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../demos/tutorials/00_Tutorial_Introduction.html" class="md-tabs__link">
          
  
  
    
  
  Tutorial

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../demos/examples/examples_index.html" class="md-tabs__link">
          
  
  
    
  
  Examples

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../api_docs/api_docs_index.html" class="md-tabs__link">
          
  
  
    
  
  API Docs

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../topic_guides/topic_guides_index.html" class="md-tabs__link">
          
  
  
    
  
  User Guide

        </a>
      </li>
    
  

      
        
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../index.html" class="md-tabs__link">
          
  
  
    
  
  Contributing

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../blog/index.html" class="md-tabs__link">
          
  
  
    
  
  Blog

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Splink" class="md-nav__button md-logo" aria-label="Splink" data-md-component="logo">
      
  <img src="../../img/favicon.ico" alt="logo">

    </a>
    Splink
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/moj-analytical-services/splink" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../getting_started.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Getting Started
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Tutorial
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Tutorial
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../demos/tutorials/00_Tutorial_Introduction.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Introduction
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../demos/tutorials/01_Prerequisites.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    1. Data prep prerequisites
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../demos/tutorials/02_Exploratory_analysis.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    2. Exploratory analysis
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../demos/tutorials/03_Blocking.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    3. Blocking
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../demos/tutorials/04_Estimating_model_parameters.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    4. Estimating model parameters
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../demos/tutorials/05_Predicting_results.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    5. Predicting results
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../demos/tutorials/06_Visualising_predictions.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    6. Visualising predictions
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../demos/tutorials/07_Evaluation.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    7. Evaluation
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../demos/tutorials/08_building_your_own_model.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    8. Tips for building your own model
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Examples
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    Examples
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../demos/examples/examples_index.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Introduction
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2" >
        
          
          <label class="md-nav__link" for="__nav_3_2" id="__nav_3_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    DuckDB
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    DuckDB
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../demos/examples/duckdb/deduplicate_50k_synthetic.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Deduplicate 50k rows historical persons
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../demos/examples/duckdb/transactions.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Linking financial transactions
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../demos/examples/duckdb_no_test/business_rates_match.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Linking businesses
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../demos/examples/duckdb/link_only.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Linking two tables of persons
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../demos/examples/duckdb/real_time_record_linkage.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Real time record linkage
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../demos/examples/duckdb/accuracy_analysis_from_labels_column.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Evaluation from ground truth column
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../demos/examples/duckdb/pairwise_labels.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Estimating m probabilities from labels
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../demos/examples/duckdb/quick_and_dirty_persons.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Quick and dirty persons model
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../demos/examples/duckdb/deterministic_dedupe.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Deterministic dedupe
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../demos/examples/duckdb/febrl3.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Febrl3 Dedupe
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../demos/examples/duckdb/febrl4.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Febrl4 link-only
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../demos/examples/duckdb_no_test/cookbook.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Cookbook
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../demos/examples/duckdb_no_test/bias_eval.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Investigating Bias in a Splink Model
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../demos/examples/duckdb_no_test/comparison_playground.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Comparison playground
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../demos/examples/duckdb_no_test/pseudopeople-acs.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Pseudopeople Census to ACS link
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_3" >
        
          
          <label class="md-nav__link" for="__nav_3_3" id="__nav_3_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    PySpark
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    PySpark
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../demos/examples/spark/deduplicate_1k_synthetic.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Deduplication using Pyspark
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_4" >
        
          
          <label class="md-nav__link" for="__nav_3_4" id="__nav_3_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Athena
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    Athena
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../demos/examples/athena/deduplicate_50k_synthetic.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Deduplicate 50k rows historical persons
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_5" >
        
          
          <label class="md-nav__link" for="__nav_3_5" id="__nav_3_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    SQLite
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_5">
            <span class="md-nav__icon md-icon"></span>
            
  
    SQLite
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../demos/examples/sqlite/deduplicate_50k_synthetic.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Deduplicate 50k rows historical persons
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    API Docs
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    API Docs
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api_docs/api_docs_index.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Introduction
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_2" >
        
          
          <label class="md-nav__link" for="__nav_4_2" id="__nav_4_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Linker
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Linker
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api_docs/training.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Training
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api_docs/visualisations.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Visualisations
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api_docs/inference.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Inference
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api_docs/linker_clustering.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Clustering
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api_docs/evaluation.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Evaluation
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api_docs/table_management.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Table Management
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api_docs/misc.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Miscellaneous functions
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_3" >
        
          
          <label class="md-nav__link" for="__nav_4_3" id="__nav_4_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Comparisons Library
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    Comparisons Library
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api_docs/comparison_library.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Comparison Library
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api_docs/comparison_level_library.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Comparison Level Library
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_4" >
        
          
          <label class="md-nav__link" for="__nav_4_4" id="__nav_4_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Other
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    Other
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api_docs/exploratory.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Exploratory
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api_docs/blocking_analysis.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Blocking analysis
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api_docs/blocking.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Blocking
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api_docs/clustering.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Clustering
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api_docs/splink_dataframe.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    SplinkDataFrame
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api_docs/em_training_session.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    EM Training Session API
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api_docs/column_expression.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Column Expressions
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_5" >
        
          
          <label class="md-nav__link" for="__nav_4_5" id="__nav_4_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    In-build datasets
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_5">
            <span class="md-nav__icon md-icon"></span>
            
  
    In-build datasets
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api_docs/datasets.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    SplinkDatasets
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_6" >
        
          
          <label class="md-nav__link" for="__nav_4_6" id="__nav_4_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Splink Settings
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_6">
            <span class="md-nav__icon md-icon"></span>
            
  
    Splink Settings
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api_docs/settings_dict_guide.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Settings Dict
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    User Guide
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            
  
    User Guide
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../topic_guides/topic_guides_index.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Introduction
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_2" >
        
          
          <label class="md-nav__link" for="__nav_5_2" id="__nav_5_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Record Linkage Theory
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Record Linkage Theory
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../topic_guides/theory/record_linkage.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Why do we need record linkage?
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../topic_guides/theory/probabilistic_vs_deterministic.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Probabilistic vs Deterministic linkage
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../topic_guides/theory/fellegi_sunter.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    The Fellegi-Sunter Model
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../topic_guides/theory/linked_data_as_graphs.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Linked Data as Graphs
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_3" >
        
          
          <label class="md-nav__link" for="__nav_5_3" id="__nav_5_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Linkage Models in Splink
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    Linkage Models in Splink
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../topic_guides/splink_fundamentals/settings.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Defining Splink models
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../topic_guides/splink_fundamentals/querying_splink_results.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Retrieving and querying Splink results
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../topic_guides/splink_fundamentals/link_type.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Link type - linking vs deduping
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_3_4" >
        
          
          <label class="md-nav__link" for="__nav_5_3_4" id="__nav_5_3_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Splink's SQL backends - Spark, DuckDB etc
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_5_3_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_3_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    Splink's SQL backends - Spark, DuckDB etc
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../topic_guides/splink_fundamentals/backends/backends.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Backends overview
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../topic_guides/splink_fundamentals/backends/postgres.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    PostgreSQL
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_4" >
        
          
          <label class="md-nav__link" for="__nav_5_4" id="__nav_5_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Data Preparation
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    Data Preparation
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../topic_guides/data_preparation/feature_engineering.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Feature Engineering
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_5" >
        
          
          <label class="md-nav__link" for="__nav_5_5" id="__nav_5_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Blocking
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_5">
            <span class="md-nav__icon md-icon"></span>
            
  
    Blocking
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../topic_guides/blocking/blocking_rules.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    What are Blocking Rules?
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../topic_guides/blocking/performance.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Computational Performance
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../topic_guides/blocking/model_training.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Model Training Blocking Rules
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_6" >
        
          
          <label class="md-nav__link" for="__nav_5_6" id="__nav_5_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Comparing Records
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_6">
            <span class="md-nav__icon md-icon"></span>
            
  
    Comparing Records
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../topic_guides/comparisons/comparisons_and_comparison_levels.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Comparisons and comparison levels
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../topic_guides/comparisons/customising_comparisons.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Defining and customising comparisons
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../topic_guides/comparisons/out_of_the_box_comparisons.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Out-of-the-box comparisons
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../topic_guides/comparisons/term-frequency.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Term frequency adjustments
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_6_5" >
        
          
          <label class="md-nav__link" for="__nav_5_6_5" id="__nav_5_6_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Comparing strings
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_5_6_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_6_5">
            <span class="md-nav__icon md-icon"></span>
            
  
    Comparing strings
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../topic_guides/comparisons/comparators.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    String comparators
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../topic_guides/comparisons/choosing_comparators.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Choosing string comparators
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../topic_guides/comparisons/phonetic.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Phonetic algorithms
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../topic_guides/comparisons/regular_expressions.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Regular expressions
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_7" >
        
          
          <label class="md-nav__link" for="__nav_5_7" id="__nav_5_7_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Training
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_7">
            <span class="md-nav__icon md-icon"></span>
            
  
    Training
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../topic_guides/training/training_rationale.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Training rationale
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_8" >
        
          
          <label class="md-nav__link" for="__nav_5_8" id="__nav_5_8_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Evaluation
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_8">
            <span class="md-nav__icon md-icon"></span>
            
  
    Evaluation
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../topic_guides/evaluation/overview.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Overview
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../topic_guides/evaluation/model.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Model
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_8_3" >
        
          
          <label class="md-nav__link" for="__nav_5_8_3" id="__nav_5_8_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Edges (Links)
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_5_8_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_8_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    Edges (Links)
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../topic_guides/evaluation/edge_overview.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Overview
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../topic_guides/evaluation/edge_metrics.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Edge Metrics
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../topic_guides/evaluation/labelling.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Clerical Labelling
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_8_4" >
        
          
          <label class="md-nav__link" for="__nav_5_8_4" id="__nav_5_8_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Clusters
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_5_8_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_8_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    Clusters
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../topic_guides/evaluation/clusters/overview.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Overview
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../topic_guides/evaluation/clusters/graph_metrics.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Graph metrics
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../topic_guides/evaluation/clusters/how_to_compute_metrics.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    How to compute graph metrics
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_9" >
        
          
          <label class="md-nav__link" for="__nav_5_9" id="__nav_5_9_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Performance
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_9_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_9">
            <span class="md-nav__icon md-icon"></span>
            
  
    Performance
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../topic_guides/performance/drivers_of_performance.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Run times, performance and linking large data
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../topic_guides/performance/performance_of_comparison_functions.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Performance of comparison functions
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_9_3" >
        
          
          <label class="md-nav__link" for="__nav_5_9_3" id="__nav_5_9_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Spark Performance
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_5_9_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_9_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    Spark Performance
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../topic_guides/performance/optimising_spark.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Optimising Spark performance
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../topic_guides/performance/salting.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Salting blocking rules
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_9_4" >
        
          
          <label class="md-nav__link" for="__nav_5_9_4" id="__nav_5_9_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    DuckDB Performance
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_5_9_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_9_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    DuckDB Performance
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../topic_guides/performance/optimising_duckdb.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Optimising DuckDB performance
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_10" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../charts/index.html" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    Charts Gallery
  

    
  </span>
  
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_5_10" id="__nav_5_10_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_10_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_10">
            <span class="md-nav__icon md-icon"></span>
            
  
    Charts Gallery
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_10_2" >
        
          
          <label class="md-nav__link" for="__nav_5_10_2" id="__nav_5_10_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Exploratory Analysis
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_5_10_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_10_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Exploratory Analysis
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../charts/completeness_chart.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    completeness chart
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../charts/profile_columns.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    profile columns
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_10_3" >
        
          
          <label class="md-nav__link" for="__nav_5_10_3" id="__nav_5_10_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Blocking
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_5_10_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_10_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    Blocking
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../charts/cumulative_comparisons_to_be_scored_from_blocking_rules_chart.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    cumulative num comparisons from blocking rules chart
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_10_4" >
        
          
          <label class="md-nav__link" for="__nav_5_10_4" id="__nav_5_10_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Similarity analysis
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_5_10_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_10_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    Similarity analysis
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../topic_guides/comparisons/choosing_comparators.html#comparing-string-similarity-and-distance-scores" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Comparator score chart
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../topic_guides/comparisons/choosing_comparators.html#choosing-thresholds" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Comparator score threshold chart
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../topic_guides/comparisons/choosing_comparators.html#phonetic-matching" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Phonetic match chart
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_10_5" >
        
          
          <label class="md-nav__link" for="__nav_5_10_5" id="__nav_5_10_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Model Training
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_5_10_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_10_5">
            <span class="md-nav__icon md-icon"></span>
            
  
    Model Training
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../charts/comparison_viewer_dashboard.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    comparison viewer dashboard
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../charts/match_weights_chart.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    match weights chart
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../charts/m_u_parameters_chart.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    m u parameters chart
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../charts/parameter_estimate_comparisons_chart.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    parameter estimate comparisons chart
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../charts/tf_adjustment_chart.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    tf adjustment chart
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../charts/unlinkables_chart.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    unlinkables chart
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../charts/waterfall_chart.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    waterfall chart
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_10_6" >
        
          
          <label class="md-nav__link" for="__nav_5_10_6" id="__nav_5_10_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Clustering
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_5_10_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_10_6">
            <span class="md-nav__icon md-icon"></span>
            
  
    Clustering
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../charts/cluster_studio_dashboard.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    cluster studio dashboard
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_10_7" >
        
          
          <label class="md-nav__link" for="__nav_5_10_7" id="__nav_5_10_7_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Model Evaluation
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_5_10_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_10_7">
            <span class="md-nav__icon md-icon"></span>
            
  
    Model Evaluation
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../charts/accuracy_analysis_from_labels_table.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    accuracy chart from labels table
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../charts/threshold_selection_tool_from_labels_table.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    threshold selection tool
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../topic_guides/llms/prompting_llms.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    LLM prompts
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
    
      
        
        
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" checked>
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../index.html" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    Contributing
  

    
  </span>
  
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_6" id="__nav_6_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            
  
    Contributing
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_2" >
        
          
          <label class="md-nav__link" for="__nav_6_2" id="__nav_6_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Contributing to Splink
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Contributing to Splink
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../CONTRIBUTING.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Contributor Guide
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../changing_splink/development_quickstart.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Development Quickstart
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../changing_splink/lint_and_format.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Linting and Formatting
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../changing_splink/testing.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Testing
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../changing_splink/contributing_to_docs.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Contributing to Documentation
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../changing_splink/managing_dependencies_with_uv.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Managing Environment and Dependencies
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../changing_splink/releases.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Releasing a Package Version
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../changing_splink/blog_posts.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Contributing to the Splink Blog
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_3" checked>
        
          
          <label class="md-nav__link" for="__nav_6_3" id="__nav_6_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    How Splink works
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_6_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    How Splink works
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../debug_modes.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Understanding and debugging Splink
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../transpilation.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Transpilation using sqlglot
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_3_3" >
        
          
          <label class="md-nav__link" for="__nav_6_3_3" id="__nav_6_3_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Performance and caching
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_6_3_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_3_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    Performance and caching
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../caching.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Caching and pipelining
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../spark_pipelining_and_caching.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Spark caching
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_3_4" checked>
        
          
          <label class="md-nav__link" for="__nav_6_3_4" id="__nav_6_3_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Charts
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_6_3_4_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_6_3_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    Charts
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="understanding_and_editing_charts.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Understanding and editing charts
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    
  
    Building new charts
  

    
  </span>
  
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="building_charts.html" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    
  
    Building new charts
  

    
  </span>
  
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#worked-example" class="md-nav__link">
    <span class="md-ellipsis">
      
        Worked Example
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#generate-data-for-chart" class="md-nav__link">
    <span class="md-ellipsis">
      
        Generate data for chart
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#create-a-chart-template" class="md-nav__link">
    <span class="md-ellipsis">
      
        Create a chart template
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Create a chart template">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#build-prototype-chart-in-altair" class="md-nav__link">
    <span class="md-ellipsis">
      
        Build prototype chart in Altair
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#edit-in-vega-lite" class="md-nav__link">
    <span class="md-ellipsis">
      
        Edit in Vega-Lite
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#combine-the-chart-dataset-and-template" class="md-nav__link">
    <span class="md-ellipsis">
      
        Combine the chart dataset and template
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Combine the chart dataset and template">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#chart-definition" class="md-nav__link">
    <span class="md-ellipsis">
      
        Chart definition
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#chart-method" class="md-nav__link">
    <span class="md-ellipsis">
      
        Chart method
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#previous-new-chart-prs" class="md-nav__link">
    <span class="md-ellipsis">
      
        Previous new chart PRs
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../udfs.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    User-Defined Functions
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../dependency_compatibility_policy.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Dependency Compatibility Policy
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../blog/index.html" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    Blog
  

    
  </span>
  
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_7" id="__nav_7_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            
  
    Blog
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7_2" >
        
          
          <label class="md-nav__link" for="__nav_7_2" id="__nav_7_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Categories
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_7_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Categories
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../blog/category/bias.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Bias
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../blog/category/ethics.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Ethics
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../blog/category/feature-updates.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Feature Updates
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#worked-example" class="md-nav__link">
    <span class="md-ellipsis">
      
        Worked Example
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#generate-data-for-chart" class="md-nav__link">
    <span class="md-ellipsis">
      
        Generate data for chart
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#create-a-chart-template" class="md-nav__link">
    <span class="md-ellipsis">
      
        Create a chart template
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Create a chart template">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#build-prototype-chart-in-altair" class="md-nav__link">
    <span class="md-ellipsis">
      
        Build prototype chart in Altair
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#edit-in-vega-lite" class="md-nav__link">
    <span class="md-ellipsis">
      
        Edit in Vega-Lite
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#combine-the-chart-dataset-and-template" class="md-nav__link">
    <span class="md-ellipsis">
      
        Combine the chart dataset and template
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Combine the chart dataset and template">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#chart-definition" class="md-nav__link">
    <span class="md-ellipsis">
      
        Chart definition
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#chart-method" class="md-nav__link">
    <span class="md-ellipsis">
      
        Chart method
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#previous-new-chart-prs" class="md-nav__link">
    <span class="md-ellipsis">
      
        Previous new chart PRs
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  


  
    <a href="https://github.com/moj-analytical-services/splink/edit/master/docs/dev_guides/charts/building_charts.ipynb" title="Edit this page" class="md-content__button md-icon" rel="edit">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 20H6V4h7v5h5v3.1l2-2V8l-6-6H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4zm10.2-7c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1z"/></svg>
    </a>
  
  


<div><h1 id="building-a-new-chart-in-splink">Building a new chart in Splink<a class="headerlink" href="#building-a-new-chart-in-splink" title="Permanent link"></a></h1>
<p>As mentioned in the <a href="understanding_and_editing_charts.html">Understanding Splink Charts topic guide</a>, splink charts are made up of three distinct parts:</p>
<ol>
<li>A function to create the dataset for the chart </li>
<li>A template chart definition (in a json file)</li>
<li>A function to read the chart definition, add the data to it, and return the chart itself </li>
</ol>
<h2 id="worked-example">Worked Example<a class="headerlink" href="#worked-example" title="Permanent link"></a></h2>
<p>Below is a worked example of how to create a new chart that shows all comparisons levels ordered by match weight:</p>
<div class="highlight"><pre><span></span><code><span class="kn">import</span><span class="w"> </span><span class="nn">splink.comparison_library</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">cl</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">splink</span><span class="w"> </span><span class="kn">import</span> <span class="n">DuckDBAPI</span><span class="p">,</span> <span class="n">Linker</span><span class="p">,</span> <span class="n">SettingsCreator</span><span class="p">,</span> <span class="n">block_on</span><span class="p">,</span> <span class="n">splink_datasets</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">splink_datasets</span><span class="o">.</span><span class="n">fake_1000</span>

<span class="n">settings</span> <span class="o">=</span> <span class="n">SettingsCreator</span><span class="p">(</span>
    <span class="n">link_type</span><span class="o">=</span><span class="s2">"dedupe_only"</span><span class="p">,</span>
    <span class="n">comparisons</span><span class="o">=</span><span class="p">[</span>
      <span class="n">cl</span><span class="o">.</span><span class="n">NameComparison</span><span class="p">(</span><span class="s2">"first_name"</span><span class="p">),</span>
        <span class="n">cl</span><span class="o">.</span><span class="n">NameComparison</span><span class="p">(</span><span class="s2">"surname"</span><span class="p">),</span>
        <span class="n">cl</span><span class="o">.</span><span class="n">DateOfBirthComparison</span><span class="p">(</span><span class="s2">"dob"</span><span class="p">,</span> <span class="n">input_is_string</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span>
        <span class="n">cl</span><span class="o">.</span><span class="n">ExactMatch</span><span class="p">(</span><span class="s2">"city"</span><span class="p">)</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">term_frequency_adjustments</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span>
        <span class="n">cl</span><span class="o">.</span><span class="n">LevenshteinAtThresholds</span><span class="p">(</span><span class="s2">"email"</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span>
    <span class="p">],</span>
    <span class="n">blocking_rules_to_generate_predictions</span><span class="o">=</span><span class="p">[</span>
        <span class="n">block_on</span><span class="p">(</span><span class="s2">"first_name"</span><span class="p">,</span> <span class="s2">"dob"</span><span class="p">),</span>
        <span class="n">block_on</span><span class="p">(</span><span class="s2">"surname"</span><span class="p">),</span>
    <span class="p">]</span>
<span class="p">)</span>

<span class="n">linker</span> <span class="o">=</span> <span class="n">Linker</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">settings</span><span class="p">,</span><span class="n">DuckDBAPI</span><span class="p">())</span>
<span class="n">linker</span><span class="o">.</span><span class="n">training</span><span class="o">.</span><span class="n">estimate_u_using_random_sampling</span><span class="p">(</span><span class="n">max_pairs</span><span class="o">=</span><span class="mf">1e6</span><span class="p">)</span>
<span class="k">for</span> <span class="n">rule</span> <span class="ow">in</span> <span class="p">[</span><span class="n">block_on</span><span class="p">(</span><span class="s2">"first_name"</span><span class="p">),</span> <span class="n">block_on</span><span class="p">(</span><span class="s2">"dob"</span><span class="p">)]:</span>
    <span class="n">linker</span><span class="o">.</span><span class="n">training</span><span class="o">.</span><span class="n">estimate_parameters_using_expectation_maximisation</span><span class="p">(</span><span class="n">rule</span><span class="p">)</span>
</code></pre></div>
<h2 id="generate-data-for-chart">Generate data for chart<a class="headerlink" href="#generate-data-for-chart" title="Permanent link"></a></h2>
<div class="highlight"><pre><span></span><code><span class="c1"># Take linker object and extract complete settings dict</span>
<span class="n">records</span> <span class="o">=</span> <span class="n">linker</span><span class="o">.</span><span class="n">_settings_obj</span><span class="o">.</span><span class="n">_parameters_as_detailed_records</span>

<span class="n">cols_to_keep</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s2">"comparison_name"</span><span class="p">,</span>
    <span class="s2">"sql_condition"</span><span class="p">,</span>
    <span class="s2">"label_for_charts"</span><span class="p">,</span>
    <span class="s2">"m_probability"</span><span class="p">,</span>
    <span class="s2">"u_probability"</span><span class="p">,</span>
    <span class="s2">"bayes_factor"</span><span class="p">,</span>
    <span class="s2">"log2_bayes_factor"</span><span class="p">,</span>
    <span class="s2">"comparison_vector_value"</span>
<span class="p">]</span>

<span class="c1"># Keep useful information for a match weights chart</span>
<span class="n">records</span> <span class="o">=</span> <span class="p">[{</span><span class="n">k</span><span class="p">:</span> <span class="n">r</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">cols_to_keep</span><span class="p">}</span>
           <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="n">records</span>
           <span class="k">if</span> <span class="n">r</span><span class="p">[</span><span class="s2">"comparison_vector_value"</span><span class="p">]</span> <span class="o">!=</span> <span class="o">-</span><span class="mi">1</span> <span class="ow">and</span> <span class="n">r</span><span class="p">[</span><span class="s2">"comparison_sort_order"</span><span class="p">]</span> <span class="o">!=</span> <span class="o">-</span><span class="mi">1</span><span class="p">]</span>

<span class="n">records</span><span class="p">[:</span><span class="mi">3</span><span class="p">]</span>
</code></pre></div>
<pre><code>[{'comparison_name': 'first_name',
  'sql_condition': '"first_name_l" = "first_name_r"',
  'label_for_charts': 'Exact match on first_name',
  'm_probability': 0.5009783629340309,
  'u_probability': 0.0057935713975033705,
  'bayes_factor': 86.4714229896119,
  'log2_bayes_factor': 6.434151525637829,
  'comparison_vector_value': 4},
 {'comparison_name': 'first_name',
  'sql_condition': 'jaro_winkler_similarity("first_name_l", "first_name_r") &gt;= 0.92',
  'label_for_charts': 'Jaro-Winkler distance of first_name &gt;= 0.92',
  'm_probability': 0.15450921411813767,
  'u_probability': 0.0023429457903817435,
  'bayes_factor': 65.9465595629351,
  'log2_bayes_factor': 6.043225490816602,
  'comparison_vector_value': 3},
 {'comparison_name': 'first_name',
  'sql_condition': 'jaro_winkler_similarity("first_name_l", "first_name_r") &gt;= 0.88',
  'label_for_charts': 'Jaro-Winkler distance of first_name &gt;= 0.88',
  'm_probability': 0.07548037415770431,
  'u_probability': 0.0015484319951285285,
  'bayes_factor': 48.7463281533646,
  'log2_bayes_factor': 5.607221645966225,
  'comparison_vector_value': 2}]
</code></pre>
<h2 id="create-a-chart-template">Create a chart template<a class="headerlink" href="#create-a-chart-template" title="Permanent link"></a></h2>
<h3 id="build-prototype-chart-in-altair">Build prototype chart in Altair<a class="headerlink" href="#build-prototype-chart-in-altair" title="Permanent link"></a></h3>
<div class="highlight"><pre><span></span><code><span class="kn">import</span><span class="w"> </span><span class="nn">pandas</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pd</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">altair</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">alt</span>

<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">records</span><span class="p">)</span>

<span class="c1"># Need a unique name for each comparison level - easier to create in pandas than altair</span>
<span class="n">df</span><span class="p">[</span><span class="s2">"cl_id"</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s2">"comparison_name"</span><span class="p">]</span> <span class="o">+</span> <span class="s2">"_"</span> <span class="o">+</span> \
    <span class="n">df</span><span class="p">[</span><span class="s2">"comparison_vector_value"</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="s2">"str"</span><span class="p">)</span>

<span class="c1"># Simple start - bar chart with x, y and color encodings</span>
<span class="n">alt</span><span class="o">.</span><span class="n">Chart</span><span class="p">(</span><span class="n">df</span><span class="p">)</span><span class="o">.</span><span class="n">mark_bar</span><span class="p">()</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span>
    <span class="n">y</span><span class="o">=</span><span class="s2">"cl_id"</span><span class="p">,</span>
    <span class="n">x</span><span class="o">=</span><span class="s2">"log2_bayes_factor"</span><span class="p">,</span>
    <span class="n">color</span><span class="o">=</span><span class="s2">"comparison_name"</span>
<span class="p">)</span>
</code></pre></div>
<style>
  #altair-viz-4206cc58153c44368929ea0277c13198.vega-embed {
    width: 100%;
    display: flex;
  }

  #altair-viz-4206cc58153c44368929ea0277c13198.vega-embed details,
  #altair-viz-4206cc58153c44368929ea0277c13198.vega-embed details summary {
    position: relative;
  }
</style>
<div id="altair-viz-4206cc58153c44368929ea0277c13198"></div>
<script type="text/javascript">
  var VEGA_DEBUG = (typeof VEGA_DEBUG == "undefined") ? {} : VEGA_DEBUG;
  (function(spec, embedOpt){
    let outputDiv = document.currentScript.previousElementSibling;
    if (outputDiv.id !== "altair-viz-4206cc58153c44368929ea0277c13198") {
      outputDiv = document.getElementById("altair-viz-4206cc58153c44368929ea0277c13198");
    }
    const paths = {
      "vega": "https://cdn.jsdelivr.net/npm/vega@5?noext",
      "vega-lib": "https://cdn.jsdelivr.net/npm/vega-lib?noext",
      "vega-lite": "https://cdn.jsdelivr.net/npm/vega-lite@5.17.0?noext",
      "vega-embed": "https://cdn.jsdelivr.net/npm/vega-embed@6?noext",
    };

    function maybeLoadScript(lib, version) {
      var key = `${lib.replace("-", "")}_version`;
      return (VEGA_DEBUG[key] == version) ?
        Promise.resolve(paths[lib]) :
        new Promise(function(resolve, reject) {
          var s = document.createElement('script');
          document.getElementsByTagName("head")[0].appendChild(s);
          s.async = true;
          s.onload = () => {
            VEGA_DEBUG[key] = version;
            return resolve(paths[lib]);
          };
          s.onerror = () => reject(`Error loading script: ${paths[lib]}`);
          s.src = paths[lib];
        });
    }

    function showError(err) {
      outputDiv.innerHTML = `<div class="error" style="color:red;">${err}</div>`;
      throw err;
    }

    function displayChart(vegaEmbed) {
      vegaEmbed(outputDiv, spec, embedOpt)
        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));
    }

    if(typeof define === "function" && define.amd) {
      requirejs.config({paths});
      require(["vega-embed"], displayChart, err => showError(`Error loading script: ${err.message}`));
    } else {
      maybeLoadScript("vega", "5")
        .then(() => maybeLoadScript("vega-lite", "5.17.0"))
        .then(() => maybeLoadScript("vega-embed", "6"))
        .catch(showError)
        .then(() => displayChart(vegaEmbed));
    }
  })({"config": {"view": {"continuousWidth": 300, "continuousHeight": 300}}, "data": {"name": "data-a32e879024788e12ff15754fbeed80f5"}, "mark": {"type": "bar"}, "encoding": {"color": {"field": "comparison_name", "type": "nominal"}, "x": {"field": "log2_bayes_factor", "type": "quantitative"}, "y": {"field": "cl_id", "type": "nominal"}}, "$schema": "https://vega.github.io/schema/vega-lite/v5.17.0.json", "datasets": {"data-a32e879024788e12ff15754fbeed80f5": [{"comparison_name": "first_name", "sql_condition": "\"first_name_l\" = \"first_name_r\"", "label_for_charts": "Exact match on first_name", "m_probability": 0.5009783629340309, "u_probability": 0.0057935713975033705, "bayes_factor": 86.4714229896119, "log2_bayes_factor": 6.434151525637829, "comparison_vector_value": 4, "cl_id": "first_name_4"}, {"comparison_name": "first_name", "sql_condition": "jaro_winkler_similarity(\"first_name_l\", \"first_name_r\") >= 0.92", "label_for_charts": "Jaro-Winkler distance of first_name >= 0.92", "m_probability": 0.15450921411813767, "u_probability": 0.0023429457903817435, "bayes_factor": 65.9465595629351, "log2_bayes_factor": 6.043225490816602, "comparison_vector_value": 3, "cl_id": "first_name_3"}, {"comparison_name": "first_name", "sql_condition": "jaro_winkler_similarity(\"first_name_l\", \"first_name_r\") >= 0.88", "label_for_charts": "Jaro-Winkler distance of first_name >= 0.88", "m_probability": 0.07548037415770431, "u_probability": 0.0015484319951285285, "bayes_factor": 48.7463281533646, "log2_bayes_factor": 5.607221645966225, "comparison_vector_value": 2, "cl_id": "first_name_2"}, {"comparison_name": "first_name", "sql_condition": "jaro_winkler_similarity(\"first_name_l\", \"first_name_r\") >= 0.7", "label_for_charts": "Jaro-Winkler distance of first_name >= 0.7", "m_probability": 0.08040594405245684, "u_probability": 0.018934945558406913, "bayes_factor": 4.246431224448779, "log2_bayes_factor": 2.086250884145864, "comparison_vector_value": 1, "cl_id": "first_name_1"}, {"comparison_name": "first_name", "sql_condition": "ELSE", "label_for_charts": "All other comparisons", "m_probability": 0.1886261047376702, "u_probability": 0.9713801052585794, "bayes_factor": 0.1941836194879226, "log2_bayes_factor": -2.36450658867333, "comparison_vector_value": 0, "cl_id": "first_name_0"}, {"comparison_name": "surname", "sql_condition": "\"surname_l\" = \"surname_r\"", "label_for_charts": "Exact match on surname", "m_probability": 0.5348631181016474, "u_probability": 0.004889975550122249, "bayes_factor": 109.3795076517869, "log2_bayes_factor": 6.77319866302027, "comparison_vector_value": 4, "cl_id": "surname_4"}, {"comparison_name": "surname", "sql_condition": "jaro_winkler_similarity(\"surname_l\", \"surname_r\") >= 0.92", "label_for_charts": "Jaro-Winkler distance of surname >= 0.92", "m_probability": 0.22996601178797366, "u_probability": 0.00283905173880724, "bayes_factor": 81.00099362211284, "log2_bayes_factor": 6.3398677002291, "comparison_vector_value": 3, "cl_id": "surname_3"}, {"comparison_name": "surname", "sql_condition": "jaro_winkler_similarity(\"surname_l\", \"surname_r\") >= 0.88", "label_for_charts": "Jaro-Winkler distance of surname >= 0.88", "m_probability": 0.04364798822195632, "u_probability": 0.0011314412292407403, "bayes_factor": 38.577335785480024, "log2_bayes_factor": 5.269681606812555, "comparison_vector_value": 2, "cl_id": "surname_2"}, {"comparison_name": "surname", "sql_condition": "jaro_winkler_similarity(\"surname_l\", \"surname_r\") >= 0.7", "label_for_charts": "Jaro-Winkler distance of surname >= 0.7", "m_probability": 0.08700065800936296, "u_probability": 0.014729633311540402, "bayes_factor": 5.906505353476757, "log2_bayes_factor": 2.562304797000941, "comparison_vector_value": 1, "cl_id": "surname_1"}, {"comparison_name": "surname", "sql_condition": "ELSE", "label_for_charts": "All other comparisons", "m_probability": 0.10452222387905959, "u_probability": 0.9764098981702893, "bayes_factor": 0.10704748494963592, "log2_bayes_factor": -3.223677194477459, "comparison_vector_value": 0, "cl_id": "surname_0"}, {"comparison_name": "dob", "sql_condition": "\"dob_l\" = \"dob_r\"", "label_for_charts": "Exact match on date of birth", "m_probability": 0.4019265402159268, "u_probability": 0.0017477477477477479, "bayes_factor": 229.96827816478284, "log2_bayes_factor": 7.845291059246031, "comparison_vector_value": 5, "cl_id": "dob_5"}, {"comparison_name": "dob", "sql_condition": "damerau_levenshtein(\"dob_l\", \"dob_r\") <= 1", "label_for_charts": "DamerauLevenshtein distance <= 1", "m_probability": 0.1315183028543781, "u_probability": 0.0016436436436436436, "bayes_factor": 80.01631215074526, "log2_bayes_factor": 6.3222222331380395, "comparison_vector_value": 4, "cl_id": "dob_4"}, {"comparison_name": "dob", "sql_condition": "ABS(EPOCH(try_strptime(\"dob_l\", '%Y-%m-%d')) - EPOCH(try_strptime(\"dob_r\", '%Y-%m-%d'))) <= 2629800.0", "label_for_charts": "Abs date difference <= 1 month", "m_probability": 0.06377918999418847, "u_probability": 0.0024084084084084086, "bayes_factor": 26.48188312726279, "log2_bayes_factor": 4.726933810754774, "comparison_vector_value": 3, "cl_id": "dob_3"}, {"comparison_name": "dob", "sql_condition": "ABS(EPOCH(try_strptime(\"dob_l\", '%Y-%m-%d')) - EPOCH(try_strptime(\"dob_r\", '%Y-%m-%d'))) <= 31557600.0", "label_for_charts": "Abs date difference <= 1 year", "m_probability": 0.13931596112673353, "u_probability": 0.033053053053053054, "bayes_factor": 4.21491959920069, "log2_bayes_factor": 2.0755051116084613, "comparison_vector_value": 2, "cl_id": "dob_2"}, {"comparison_name": "dob", "sql_condition": "ABS(EPOCH(try_strptime(\"dob_l\", '%Y-%m-%d')) - EPOCH(try_strptime(\"dob_r\", '%Y-%m-%d'))) <= 315576000.0", "label_for_charts": "Abs date difference <= 10 year", "m_probability": 0.21851691590096683, "u_probability": 0.30747947947947946, "bayes_factor": 0.7106715422794587, "log2_bayes_factor": -0.49274516487791215, "comparison_vector_value": 1, "cl_id": "dob_1"}, {"comparison_name": "dob", "sql_condition": "ELSE", "label_for_charts": "All other comparisons", "m_probability": 0.04494308990780629, "u_probability": 0.6536676676676677, "bayes_factor": 0.06875525917958647, "log2_bayes_factor": -3.8623861184011, "comparison_vector_value": 0, "cl_id": "dob_0"}, {"comparison_name": "city", "sql_condition": "\"city_l\" = \"city_r\"", "label_for_charts": "Exact match on city", "m_probability": 0.5648986160568799, "u_probability": 0.0551475711801453, "bayes_factor": 10.243399735803042, "log2_bayes_factor": 3.3566227133460154, "comparison_vector_value": 1, "cl_id": "city_1"}, {"comparison_name": "city", "sql_condition": "ELSE", "label_for_charts": "All other comparisons", "m_probability": 0.43510138394312015, "u_probability": 0.9448524288198547, "bayes_factor": 0.4604966560614901, "log2_bayes_factor": -1.1187374147944675, "comparison_vector_value": 0, "cl_id": "city_0"}, {"comparison_name": "email", "sql_condition": "\"email_l\" = \"email_r\"", "label_for_charts": "Exact match on email", "m_probability": 0.5728567965549329, "u_probability": 0.0021938713143283602, "bayes_factor": 261.1168635159029, "log2_bayes_factor": 8.028551822933485, "comparison_vector_value": 2, "cl_id": "email_2"}, {"comparison_name": "email", "sql_condition": "levenshtein(\"email_l\", \"email_r\") <= 2", "label_for_charts": "Levenshtein distance of email <= 2", "m_probability": 0.3102931452757915, "u_probability": 0.0013542812658830492, "bayes_factor": 229.12016365630453, "log2_bayes_factor": 7.839960617980343, "comparison_vector_value": 1, "cl_id": "email_1"}, {"comparison_name": "email", "sql_condition": "ELSE", "label_for_charts": "All other comparisons", "m_probability": 0.11685005816927549, "u_probability": 0.9964518474197885, "bayes_factor": 0.11726613631340733, "log2_bayes_factor": -3.092141637583301, "comparison_vector_value": 0, "cl_id": "email_0"}]}}, {"mode": "vega-lite"});
</script>

<h4 id="sort-bars-edit-axestitles">Sort bars, edit axes/titles<a class="headerlink" href="#sort-bars-edit-axestitles" title="Permanent link"></a></h4>
<div class="highlight"><pre><span></span><code><span class="n">alt</span><span class="o">.</span><span class="n">Chart</span><span class="p">(</span><span class="n">df</span><span class="p">)</span><span class="o">.</span><span class="n">mark_bar</span><span class="p">()</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span>
    <span class="n">y</span><span class="o">=</span><span class="n">alt</span><span class="o">.</span><span class="n">Y</span><span class="p">(</span><span class="s2">"cl_id"</span><span class="p">,</span>
        <span class="n">sort</span><span class="o">=</span><span class="s2">"-x"</span><span class="p">,</span>
        <span class="n">title</span><span class="o">=</span><span class="s2">"Comparison level"</span>
    <span class="p">),</span>
    <span class="n">x</span><span class="o">=</span><span class="n">alt</span><span class="o">.</span><span class="n">X</span><span class="p">(</span><span class="s2">"log2_bayes_factor"</span><span class="p">,</span>
        <span class="n">title</span><span class="o">=</span><span class="s2">"Comparison level match weight = log2(m/u)"</span><span class="p">,</span>
        <span class="n">scale</span><span class="o">=</span><span class="n">alt</span><span class="o">.</span><span class="n">Scale</span><span class="p">(</span><span class="n">domain</span><span class="o">=</span><span class="p">[</span><span class="o">-</span><span class="mi">10</span><span class="p">,</span><span class="mi">10</span><span class="p">])</span>
    <span class="p">),</span>
    <span class="n">color</span><span class="o">=</span><span class="s2">"comparison_name"</span>
<span class="p">)</span><span class="o">.</span><span class="n">properties</span><span class="p">(</span>
    <span class="n">title</span><span class="o">=</span><span class="s2">"New Chart - WOO!"</span>
<span class="p">)</span><span class="o">.</span><span class="n">configure_view</span><span class="p">(</span>
    <span class="n">step</span><span class="o">=</span><span class="mi">15</span>
<span class="p">)</span>
</code></pre></div>
<style>
  #altair-viz-facb831b7d2a4664be840a654a392fc1.vega-embed {
    width: 100%;
    display: flex;
  }

  #altair-viz-facb831b7d2a4664be840a654a392fc1.vega-embed details,
  #altair-viz-facb831b7d2a4664be840a654a392fc1.vega-embed details summary {
    position: relative;
  }
</style>
<div id="altair-viz-facb831b7d2a4664be840a654a392fc1"></div>
<script type="text/javascript">
  var VEGA_DEBUG = (typeof VEGA_DEBUG == "undefined") ? {} : VEGA_DEBUG;
  (function(spec, embedOpt){
    let outputDiv = document.currentScript.previousElementSibling;
    if (outputDiv.id !== "altair-viz-facb831b7d2a4664be840a654a392fc1") {
      outputDiv = document.getElementById("altair-viz-facb831b7d2a4664be840a654a392fc1");
    }
    const paths = {
      "vega": "https://cdn.jsdelivr.net/npm/vega@5?noext",
      "vega-lib": "https://cdn.jsdelivr.net/npm/vega-lib?noext",
      "vega-lite": "https://cdn.jsdelivr.net/npm/vega-lite@5.8.0?noext",
      "vega-embed": "https://cdn.jsdelivr.net/npm/vega-embed@6?noext",
    };

    function maybeLoadScript(lib, version) {
      var key = `${lib.replace("-", "")}_version`;
      return (VEGA_DEBUG[key] == version) ?
        Promise.resolve(paths[lib]) :
        new Promise(function(resolve, reject) {
          var s = document.createElement('script');
          document.getElementsByTagName("head")[0].appendChild(s);
          s.async = true;
          s.onload = () => {
            VEGA_DEBUG[key] = version;
            return resolve(paths[lib]);
          };
          s.onerror = () => reject(`Error loading script: ${paths[lib]}`);
          s.src = paths[lib];
        });
    }

    function showError(err) {
      outputDiv.innerHTML = `<div class="error" style="color:red;">${err}</div>`;
      throw err;
    }

    function displayChart(vegaEmbed) {
      vegaEmbed(outputDiv, spec, embedOpt)
        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));
    }

    if(typeof define === "function" && define.amd) {
      requirejs.config({paths});
      require(["vega-embed"], displayChart, err => showError(`Error loading script: ${err.message}`));
    } else {
      maybeLoadScript("vega", "5")
        .then(() => maybeLoadScript("vega-lite", "5.8.0"))
        .then(() => maybeLoadScript("vega-embed", "6"))
        .catch(showError)
        .then(() => displayChart(vegaEmbed));
    }
  })({"config": {"view": {"continuousWidth": 300, "continuousHeight": 300, "step": 15}}, "data": {"name": "data-3901c03d78701611834aa82ab7374cce"}, "mark": {"type": "bar"}, "encoding": {"color": {"field": "comparison_name", "type": "nominal"}, "x": {"field": "log2_bayes_factor", "scale": {"domain": [-10, 10]}, "title": "Comparison level match weight = log2(m/u)", "type": "quantitative"}, "y": {"field": "cl_id", "sort": "-x", "title": "Comparison level", "type": "nominal"}}, "title": "New Chart - WOO!", "$schema": "https://vega.github.io/schema/vega-lite/v5.8.0.json", "datasets": {"data-3901c03d78701611834aa82ab7374cce": [{"comparison_name": "first_name", "sql_condition": "\"first_name_l\" = \"first_name_r\"", "label_for_charts": "Exact match first_name", "m_probability": 0.5018941916173814, "u_probability": 0.0057935713975033705, "bayes_factor": 86.62949969575988, "log2_bayes_factor": 6.436786480320881, "comparison_vector_value": 4, "cl_id": "first_name_4"}, {"comparison_name": "first_name", "sql_condition": "damerau_levenshtein(\"first_name_l\", \"first_name_r\") <= 1", "label_for_charts": "Damerau_levenshtein <= 1", "m_probability": 0.19595791797531015, "u_probability": 0.00236614327345483, "bayes_factor": 82.81743551783742, "log2_bayes_factor": 6.371862624533329, "comparison_vector_value": 3, "cl_id": "first_name_3"}, {"comparison_name": "first_name", "sql_condition": "jaro_winkler_similarity(\"first_name_l\", \"first_name_r\") >= 0.9", "label_for_charts": "Jaro_winkler_similarity >= 0.9", "m_probability": 0.045985303626033085, "u_probability": 0.001296159366708712, "bayes_factor": 35.47812468678278, "log2_bayes_factor": 5.148857848140163, "comparison_vector_value": 2, "cl_id": "first_name_2"}, {"comparison_name": "first_name", "sql_condition": "jaro_winkler_similarity(\"first_name_l\", \"first_name_r\") >= 0.8", "label_for_charts": "Jaro_winkler_similarity >= 0.8", "m_probability": 0.06396730257493154, "u_probability": 0.005677583982137938, "bayes_factor": 11.266641370022352, "log2_bayes_factor": 3.493985601438375, "comparison_vector_value": 1, "cl_id": "first_name_1"}, {"comparison_name": "first_name", "sql_condition": "ELSE", "label_for_charts": "All other comparisons", "m_probability": 0.19219528420634394, "u_probability": 0.9848665419801952, "bayes_factor": 0.19514855669673956, "log2_bayes_factor": -2.357355302129234, "comparison_vector_value": 0, "cl_id": "first_name_0"}, {"comparison_name": "surname", "sql_condition": "\"surname_l\" = \"surname_r\"", "label_for_charts": "Exact match surname", "m_probability": 0.5527050424941531, "u_probability": 0.004889975550122249, "bayes_factor": 113.02818119005431, "log2_bayes_factor": 6.820538712806792, "comparison_vector_value": 4, "cl_id": "surname_4"}, {"comparison_name": "surname", "sql_condition": "damerau_levenshtein(\"surname_l\", \"surname_r\") <= 1", "label_for_charts": "Damerau_levenshtein <= 1", "m_probability": 0.22212752320956386, "u_probability": 0.0027554624131641246, "bayes_factor": 80.61351958508214, "log2_bayes_factor": 6.332949906378981, "comparison_vector_value": 3, "cl_id": "surname_3"}, {"comparison_name": "surname", "sql_condition": "jaro_winkler_similarity(\"surname_l\", \"surname_r\") >= 0.9", "label_for_charts": "Jaro_winkler_similarity >= 0.9", "m_probability": 0.0490149338194711, "u_probability": 0.0010090425738347498, "bayes_factor": 48.57568460485815, "log2_bayes_factor": 5.602162423566203, "comparison_vector_value": 2, "cl_id": "surname_2"}, {"comparison_name": "surname", "sql_condition": "jaro_winkler_similarity(\"surname_l\", \"surname_r\") >= 0.8", "label_for_charts": "Jaro_winkler_similarity >= 0.8", "m_probability": 0.05001678986356945, "u_probability": 0.003710768991942586, "bayes_factor": 13.478820689774516, "log2_bayes_factor": 3.752622370380284, "comparison_vector_value": 1, "cl_id": "surname_1"}, {"comparison_name": "surname", "sql_condition": "ELSE", "label_for_charts": "All other comparisons", "m_probability": 0.1261357106132424, "u_probability": 0.9876347504709363, "bayes_factor": 0.1277149376863226, "log2_bayes_factor": -2.969000820703079, "comparison_vector_value": 0, "cl_id": "surname_0"}, {"comparison_name": "dob", "sql_condition": "\"dob_l\" = \"dob_r\"", "label_for_charts": "Exact match", "m_probability": 0.41383785481447766, "u_probability": 0.0017477477477477479, "bayes_factor": 236.78351486807742, "log2_bayes_factor": 7.887424832202931, "comparison_vector_value": 5, "cl_id": "dob_5"}, {"comparison_name": "dob", "sql_condition": "damerau_levenshtein(\"dob_l\", \"dob_r\") <= 1", "label_for_charts": "Damerau_levenshtein <= 1", "m_probability": 0.10806341031654734, "u_probability": 0.0016436436436436436, "bayes_factor": 65.74625268345359, "log2_bayes_factor": 6.038836762842662, "comparison_vector_value": 4, "cl_id": "dob_4"}, {"comparison_name": "dob", "sql_condition": "\n            abs(date_diff('month',\n                strptime(\"dob_l\", '%Y-%m-%d'),\n                strptime(\"dob_r\", '%Y-%m-%d'))\n                ) <= 1\n        ", "label_for_charts": "Within 1 month", "m_probability": 0.11300938544779224, "u_probability": 0.003833833833833834, "bayes_factor": 29.476860590690453, "log2_bayes_factor": 4.881510974428093, "comparison_vector_value": 3, "cl_id": "dob_3"}, {"comparison_name": "dob", "sql_condition": "\n            abs(date_diff('year',\n                strptime(\"dob_l\", '%Y-%m-%d'),\n                strptime(\"dob_r\", '%Y-%m-%d'))\n                ) <= 1\n        ", "label_for_charts": "Within 1 year", "m_probability": 0.17200656922328977, "u_probability": 0.05062662662662663, "bayes_factor": 3.397551460259144, "log2_bayes_factor": 1.7644954026183992, "comparison_vector_value": 2, "cl_id": "dob_2"}, {"comparison_name": "dob", "sql_condition": "\n            abs(date_diff('year',\n                strptime(\"dob_l\", '%Y-%m-%d'),\n                strptime(\"dob_r\", '%Y-%m-%d'))\n                ) <= 10\n        ", "label_for_charts": "Within 10 years", "m_probability": 0.19035523041792068, "u_probability": 0.3037037037037037, "bayes_factor": 0.6267794172297388, "log2_bayes_factor": -0.6739702908716182, "comparison_vector_value": 1, "cl_id": "dob_1"}, {"comparison_name": "dob", "sql_condition": "ELSE", "label_for_charts": "All other comparisons", "m_probability": 0.002727549779972325, "u_probability": 0.6384444444444445, "bayes_factor": 0.004272180302776005, "log2_bayes_factor": -7.870811748958801, "comparison_vector_value": 0, "cl_id": "dob_0"}, {"comparison_name": "city", "sql_condition": "\"city_l\" = \"city_r\"", "label_for_charts": "Exact match", "m_probability": 0.6013808934279701, "u_probability": 0.0551475711801453, "bayes_factor": 10.904938885948333, "log2_bayes_factor": 3.4469097796586596, "comparison_vector_value": 1, "cl_id": "city_1"}, {"comparison_name": "city", "sql_condition": "ELSE", "label_for_charts": "All other comparisons", "m_probability": 0.3986191065720299, "u_probability": 0.9448524288198547, "bayes_factor": 0.42188504195296994, "log2_bayes_factor": -1.2450781575619725, "comparison_vector_value": 0, "cl_id": "city_0"}, {"comparison_name": "email", "sql_condition": "\"email_l\" = \"email_r\"", "label_for_charts": "Exact match", "m_probability": 0.5914840252879943, "u_probability": 0.0021938713143283602, "bayes_factor": 269.6074384240141, "log2_bayes_factor": 8.07471649055784, "comparison_vector_value": 2, "cl_id": "email_2"}, {"comparison_name": "email", "sql_condition": "levenshtein(\"email_l\", \"email_r\") <= 2", "label_for_charts": "Levenshtein <= 2", "m_probability": 0.3019669634613132, "u_probability": 0.0013542812658830492, "bayes_factor": 222.9721189153553, "log2_bayes_factor": 7.800719512398763, "comparison_vector_value": 1, "cl_id": "email_1"}, {"comparison_name": "email", "sql_condition": "ELSE", "label_for_charts": "All other comparisons", "m_probability": 0.10654901125069259, "u_probability": 0.9964518474197885, "bayes_factor": 0.10692840956298139, "log2_bayes_factor": -3.225282884575804, "comparison_vector_value": 0, "cl_id": "email_0"}]}}, {"mode": "vega-lite"});
</script>

<h4 id="add-tooltip">Add tooltip<a class="headerlink" href="#add-tooltip" title="Permanent link"></a></h4>
<div class="highlight"><pre><span></span><code><span class="n">alt</span><span class="o">.</span><span class="n">Chart</span><span class="p">(</span><span class="n">df</span><span class="p">)</span><span class="o">.</span><span class="n">mark_bar</span><span class="p">()</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span>
    <span class="n">y</span><span class="o">=</span><span class="n">alt</span><span class="o">.</span><span class="n">Y</span><span class="p">(</span><span class="s2">"cl_id"</span><span class="p">,</span>
            <span class="n">sort</span><span class="o">=</span><span class="s2">"-x"</span><span class="p">,</span>
            <span class="n">title</span><span class="o">=</span><span class="s2">"Comparison level"</span>
            <span class="p">),</span>
    <span class="n">x</span><span class="o">=</span><span class="n">alt</span><span class="o">.</span><span class="n">X</span><span class="p">(</span><span class="s2">"log2_bayes_factor"</span><span class="p">,</span>
            <span class="n">title</span><span class="o">=</span><span class="s2">"Comparison level match weight = log2(m/u)"</span><span class="p">,</span>
            <span class="n">scale</span><span class="o">=</span><span class="n">alt</span><span class="o">.</span><span class="n">Scale</span><span class="p">(</span><span class="n">domain</span><span class="o">=</span><span class="p">[</span><span class="o">-</span><span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">])</span>
            <span class="p">),</span>
    <span class="n">color</span><span class="o">=</span><span class="s2">"comparison_name"</span><span class="p">,</span>
    <span class="n">tooltip</span><span class="o">=</span><span class="p">[</span>
        <span class="s2">"comparison_name"</span><span class="p">,</span>
        <span class="s2">"label_for_charts"</span><span class="p">,</span>
        <span class="s2">"sql_condition"</span><span class="p">,</span>
        <span class="s2">"m_probability"</span><span class="p">,</span>
        <span class="s2">"u_probability"</span><span class="p">,</span>
        <span class="s2">"bayes_factor"</span><span class="p">,</span>
        <span class="s2">"log2_bayes_factor"</span>
        <span class="p">]</span>
<span class="p">)</span><span class="o">.</span><span class="n">properties</span><span class="p">(</span>
    <span class="n">title</span><span class="o">=</span><span class="s2">"New Chart - WOO!"</span>
<span class="p">)</span><span class="o">.</span><span class="n">configure_view</span><span class="p">(</span>
    <span class="n">step</span><span class="o">=</span><span class="mi">15</span>
<span class="p">)</span>
</code></pre></div>
<style>
  #altair-viz-0a4d51676a1c4980aed997c689140668.vega-embed {
    width: 100%;
    display: flex;
  }

  #altair-viz-0a4d51676a1c4980aed997c689140668.vega-embed details,
  #altair-viz-0a4d51676a1c4980aed997c689140668.vega-embed details summary {
    position: relative;
  }
</style>
<div id="altair-viz-0a4d51676a1c4980aed997c689140668"></div>
<script type="text/javascript">
  var VEGA_DEBUG = (typeof VEGA_DEBUG == "undefined") ? {} : VEGA_DEBUG;
  (function(spec, embedOpt){
    let outputDiv = document.currentScript.previousElementSibling;
    if (outputDiv.id !== "altair-viz-0a4d51676a1c4980aed997c689140668") {
      outputDiv = document.getElementById("altair-viz-0a4d51676a1c4980aed997c689140668");
    }
    const paths = {
      "vega": "https://cdn.jsdelivr.net/npm/vega@5?noext",
      "vega-lib": "https://cdn.jsdelivr.net/npm/vega-lib?noext",
      "vega-lite": "https://cdn.jsdelivr.net/npm/vega-lite@5.8.0?noext",
      "vega-embed": "https://cdn.jsdelivr.net/npm/vega-embed@6?noext",
    };

    function maybeLoadScript(lib, version) {
      var key = `${lib.replace("-", "")}_version`;
      return (VEGA_DEBUG[key] == version) ?
        Promise.resolve(paths[lib]) :
        new Promise(function(resolve, reject) {
          var s = document.createElement('script');
          document.getElementsByTagName("head")[0].appendChild(s);
          s.async = true;
          s.onload = () => {
            VEGA_DEBUG[key] = version;
            return resolve(paths[lib]);
          };
          s.onerror = () => reject(`Error loading script: ${paths[lib]}`);
          s.src = paths[lib];
        });
    }

    function showError(err) {
      outputDiv.innerHTML = `<div class="error" style="color:red;">${err}</div>`;
      throw err;
    }

    function displayChart(vegaEmbed) {
      vegaEmbed(outputDiv, spec, embedOpt)
        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));
    }

    if(typeof define === "function" && define.amd) {
      requirejs.config({paths});
      require(["vega-embed"], displayChart, err => showError(`Error loading script: ${err.message}`));
    } else {
      maybeLoadScript("vega", "5")
        .then(() => maybeLoadScript("vega-lite", "5.8.0"))
        .then(() => maybeLoadScript("vega-embed", "6"))
        .catch(showError)
        .then(() => displayChart(vegaEmbed));
    }
  })({"config": {"view": {"continuousWidth": 300, "continuousHeight": 300, "step": 15}}, "data": {"name": "data-3901c03d78701611834aa82ab7374cce"}, "mark": {"type": "bar"}, "encoding": {"color": {"field": "comparison_name", "type": "nominal"}, "tooltip": [{"field": "comparison_name", "type": "nominal"}, {"field": "label_for_charts", "type": "nominal"}, {"field": "sql_condition", "type": "nominal"}, {"field": "m_probability", "type": "quantitative"}, {"field": "u_probability", "type": "quantitative"}, {"field": "bayes_factor", "type": "quantitative"}, {"field": "log2_bayes_factor", "type": "quantitative"}], "x": {"field": "log2_bayes_factor", "scale": {"domain": [-10, 10]}, "title": "Comparison level match weight = log2(m/u)", "type": "quantitative"}, "y": {"field": "cl_id", "sort": "-x", "title": "Comparison level", "type": "nominal"}}, "title": "New Chart - WOO!", "$schema": "https://vega.github.io/schema/vega-lite/v5.8.0.json", "datasets": {"data-3901c03d78701611834aa82ab7374cce": [{"comparison_name": "first_name", "sql_condition": "\"first_name_l\" = \"first_name_r\"", "label_for_charts": "Exact match first_name", "m_probability": 0.5018941916173814, "u_probability": 0.0057935713975033705, "bayes_factor": 86.62949969575988, "log2_bayes_factor": 6.436786480320881, "comparison_vector_value": 4, "cl_id": "first_name_4"}, {"comparison_name": "first_name", "sql_condition": "damerau_levenshtein(\"first_name_l\", \"first_name_r\") <= 1", "label_for_charts": "Damerau_levenshtein <= 1", "m_probability": 0.19595791797531015, "u_probability": 0.00236614327345483, "bayes_factor": 82.81743551783742, "log2_bayes_factor": 6.371862624533329, "comparison_vector_value": 3, "cl_id": "first_name_3"}, {"comparison_name": "first_name", "sql_condition": "jaro_winkler_similarity(\"first_name_l\", \"first_name_r\") >= 0.9", "label_for_charts": "Jaro_winkler_similarity >= 0.9", "m_probability": 0.045985303626033085, "u_probability": 0.001296159366708712, "bayes_factor": 35.47812468678278, "log2_bayes_factor": 5.148857848140163, "comparison_vector_value": 2, "cl_id": "first_name_2"}, {"comparison_name": "first_name", "sql_condition": "jaro_winkler_similarity(\"first_name_l\", \"first_name_r\") >= 0.8", "label_for_charts": "Jaro_winkler_similarity >= 0.8", "m_probability": 0.06396730257493154, "u_probability": 0.005677583982137938, "bayes_factor": 11.266641370022352, "log2_bayes_factor": 3.493985601438375, "comparison_vector_value": 1, "cl_id": "first_name_1"}, {"comparison_name": "first_name", "sql_condition": "ELSE", "label_for_charts": "All other comparisons", "m_probability": 0.19219528420634394, "u_probability": 0.9848665419801952, "bayes_factor": 0.19514855669673956, "log2_bayes_factor": -2.357355302129234, "comparison_vector_value": 0, "cl_id": "first_name_0"}, {"comparison_name": "surname", "sql_condition": "\"surname_l\" = \"surname_r\"", "label_for_charts": "Exact match surname", "m_probability": 0.5527050424941531, "u_probability": 0.004889975550122249, "bayes_factor": 113.02818119005431, "log2_bayes_factor": 6.820538712806792, "comparison_vector_value": 4, "cl_id": "surname_4"}, {"comparison_name": "surname", "sql_condition": "damerau_levenshtein(\"surname_l\", \"surname_r\") <= 1", "label_for_charts": "Damerau_levenshtein <= 1", "m_probability": 0.22212752320956386, "u_probability": 0.0027554624131641246, "bayes_factor": 80.61351958508214, "log2_bayes_factor": 6.332949906378981, "comparison_vector_value": 3, "cl_id": "surname_3"}, {"comparison_name": "surname", "sql_condition": "jaro_winkler_similarity(\"surname_l\", \"surname_r\") >= 0.9", "label_for_charts": "Jaro_winkler_similarity >= 0.9", "m_probability": 0.0490149338194711, "u_probability": 0.0010090425738347498, "bayes_factor": 48.57568460485815, "log2_bayes_factor": 5.602162423566203, "comparison_vector_value": 2, "cl_id": "surname_2"}, {"comparison_name": "surname", "sql_condition": "jaro_winkler_similarity(\"surname_l\", \"surname_r\") >= 0.8", "label_for_charts": "Jaro_winkler_similarity >= 0.8", "m_probability": 0.05001678986356945, "u_probability": 0.003710768991942586, "bayes_factor": 13.478820689774516, "log2_bayes_factor": 3.752622370380284, "comparison_vector_value": 1, "cl_id": "surname_1"}, {"comparison_name": "surname", "sql_condition": "ELSE", "label_for_charts": "All other comparisons", "m_probability": 0.1261357106132424, "u_probability": 0.9876347504709363, "bayes_factor": 0.1277149376863226, "log2_bayes_factor": -2.969000820703079, "comparison_vector_value": 0, "cl_id": "surname_0"}, {"comparison_name": "dob", "sql_condition": "\"dob_l\" = \"dob_r\"", "label_for_charts": "Exact match", "m_probability": 0.41383785481447766, "u_probability": 0.0017477477477477479, "bayes_factor": 236.78351486807742, "log2_bayes_factor": 7.887424832202931, "comparison_vector_value": 5, "cl_id": "dob_5"}, {"comparison_name": "dob", "sql_condition": "damerau_levenshtein(\"dob_l\", \"dob_r\") <= 1", "label_for_charts": "Damerau_levenshtein <= 1", "m_probability": 0.10806341031654734, "u_probability": 0.0016436436436436436, "bayes_factor": 65.74625268345359, "log2_bayes_factor": 6.038836762842662, "comparison_vector_value": 4, "cl_id": "dob_4"}, {"comparison_name": "dob", "sql_condition": "\n            abs(date_diff('month',\n                strptime(\"dob_l\", '%Y-%m-%d'),\n                strptime(\"dob_r\", '%Y-%m-%d'))\n                ) <= 1\n        ", "label_for_charts": "Within 1 month", "m_probability": 0.11300938544779224, "u_probability": 0.003833833833833834, "bayes_factor": 29.476860590690453, "log2_bayes_factor": 4.881510974428093, "comparison_vector_value": 3, "cl_id": "dob_3"}, {"comparison_name": "dob", "sql_condition": "\n            abs(date_diff('year',\n                strptime(\"dob_l\", '%Y-%m-%d'),\n                strptime(\"dob_r\", '%Y-%m-%d'))\n                ) <= 1\n        ", "label_for_charts": "Within 1 year", "m_probability": 0.17200656922328977, "u_probability": 0.05062662662662663, "bayes_factor": 3.397551460259144, "log2_bayes_factor": 1.7644954026183992, "comparison_vector_value": 2, "cl_id": "dob_2"}, {"comparison_name": "dob", "sql_condition": "\n            abs(date_diff('year',\n                strptime(\"dob_l\", '%Y-%m-%d'),\n                strptime(\"dob_r\", '%Y-%m-%d'))\n                ) <= 10\n        ", "label_for_charts": "Within 10 years", "m_probability": 0.19035523041792068, "u_probability": 0.3037037037037037, "bayes_factor": 0.6267794172297388, "log2_bayes_factor": -0.6739702908716182, "comparison_vector_value": 1, "cl_id": "dob_1"}, {"comparison_name": "dob", "sql_condition": "ELSE", "label_for_charts": "All other comparisons", "m_probability": 0.002727549779972325, "u_probability": 0.6384444444444445, "bayes_factor": 0.004272180302776005, "log2_bayes_factor": -7.870811748958801, "comparison_vector_value": 0, "cl_id": "dob_0"}, {"comparison_name": "city", "sql_condition": "\"city_l\" = \"city_r\"", "label_for_charts": "Exact match", "m_probability": 0.6013808934279701, "u_probability": 0.0551475711801453, "bayes_factor": 10.904938885948333, "log2_bayes_factor": 3.4469097796586596, "comparison_vector_value": 1, "cl_id": "city_1"}, {"comparison_name": "city", "sql_condition": "ELSE", "label_for_charts": "All other comparisons", "m_probability": 0.3986191065720299, "u_probability": 0.9448524288198547, "bayes_factor": 0.42188504195296994, "log2_bayes_factor": -1.2450781575619725, "comparison_vector_value": 0, "cl_id": "city_0"}, {"comparison_name": "email", "sql_condition": "\"email_l\" = \"email_r\"", "label_for_charts": "Exact match", "m_probability": 0.5914840252879943, "u_probability": 0.0021938713143283602, "bayes_factor": 269.6074384240141, "log2_bayes_factor": 8.07471649055784, "comparison_vector_value": 2, "cl_id": "email_2"}, {"comparison_name": "email", "sql_condition": "levenshtein(\"email_l\", \"email_r\") <= 2", "label_for_charts": "Levenshtein <= 2", "m_probability": 0.3019669634613132, "u_probability": 0.0013542812658830492, "bayes_factor": 222.9721189153553, "log2_bayes_factor": 7.800719512398763, "comparison_vector_value": 1, "cl_id": "email_1"}, {"comparison_name": "email", "sql_condition": "ELSE", "label_for_charts": "All other comparisons", "m_probability": 0.10654901125069259, "u_probability": 0.9964518474197885, "bayes_factor": 0.10692840956298139, "log2_bayes_factor": -3.225282884575804, "comparison_vector_value": 0, "cl_id": "email_0"}]}}, {"mode": "vega-lite"});
</script>

<h4 id="add-text-layer">Add text layer<a class="headerlink" href="#add-text-layer" title="Permanent link"></a></h4>
<div class="highlight"><pre><span></span><code><span class="c1"># Create base chart with shared data and encodings (mark type not specified)</span>
<span class="n">base</span> <span class="o">=</span> <span class="n">alt</span><span class="o">.</span><span class="n">Chart</span><span class="p">(</span><span class="n">df</span><span class="p">)</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span>
    <span class="n">y</span><span class="o">=</span><span class="n">alt</span><span class="o">.</span><span class="n">Y</span><span class="p">(</span><span class="s2">"cl_id"</span><span class="p">,</span>
            <span class="n">sort</span><span class="o">=</span><span class="s2">"-x"</span><span class="p">,</span>
            <span class="n">title</span><span class="o">=</span><span class="s2">"Comparison level"</span>
            <span class="p">),</span>
    <span class="n">x</span><span class="o">=</span><span class="n">alt</span><span class="o">.</span><span class="n">X</span><span class="p">(</span><span class="s2">"log2_bayes_factor"</span><span class="p">,</span>
            <span class="n">title</span><span class="o">=</span><span class="s2">"Comparison level match weight = log2(m/u)"</span><span class="p">,</span>
            <span class="n">scale</span><span class="o">=</span><span class="n">alt</span><span class="o">.</span><span class="n">Scale</span><span class="p">(</span><span class="n">domain</span><span class="o">=</span><span class="p">[</span><span class="o">-</span><span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">])</span>
            <span class="p">),</span>
    <span class="n">tooltip</span><span class="o">=</span><span class="p">[</span>
        <span class="s2">"comparison_name"</span><span class="p">,</span>
        <span class="s2">"label_for_charts"</span><span class="p">,</span>
        <span class="s2">"sql_condition"</span><span class="p">,</span>
        <span class="s2">"m_probability"</span><span class="p">,</span>
        <span class="s2">"u_probability"</span><span class="p">,</span>
        <span class="s2">"bayes_factor"</span><span class="p">,</span>
        <span class="s2">"log2_bayes_factor"</span>
    <span class="p">]</span>
<span class="p">)</span>

<span class="c1"># Build bar chart from base (color legend made redundant by text labels)</span>
<span class="n">bar</span> <span class="o">=</span> <span class="n">base</span><span class="o">.</span><span class="n">mark_bar</span><span class="p">()</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span>
    <span class="n">color</span><span class="o">=</span><span class="n">alt</span><span class="o">.</span><span class="n">Color</span><span class="p">(</span><span class="s2">"comparison_name"</span><span class="p">,</span> <span class="n">legend</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
<span class="p">)</span>

<span class="c1"># Build text layer from base</span>
<span class="n">text</span> <span class="o">=</span> <span class="n">base</span><span class="o">.</span><span class="n">mark_text</span><span class="p">(</span><span class="n">dx</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">align</span><span class="o">=</span><span class="s2">"right"</span><span class="p">)</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span>
    <span class="n">text</span><span class="o">=</span><span class="s2">"comparison_name"</span>
<span class="p">)</span>

<span class="c1"># Final layered chart</span>
<span class="n">chart</span> <span class="o">=</span> <span class="n">bar</span> <span class="o">+</span> <span class="n">text</span>

<span class="c1"># Add global config</span>
<span class="n">chart</span><span class="o">.</span><span class="n">resolve_axis</span><span class="p">(</span>
    <span class="n">y</span><span class="o">=</span><span class="s2">"shared"</span><span class="p">,</span>
    <span class="n">x</span><span class="o">=</span><span class="s2">"shared"</span>
<span class="p">)</span><span class="o">.</span><span class="n">properties</span><span class="p">(</span>
    <span class="n">title</span><span class="o">=</span><span class="s2">"New Chart - WOO!"</span>
<span class="p">)</span><span class="o">.</span><span class="n">configure_view</span><span class="p">(</span>
    <span class="n">step</span><span class="o">=</span><span class="mi">15</span>
<span class="p">)</span>
</code></pre></div>
<style>
  #altair-viz-d09af60bd6344262a6b3c497f86ff49a.vega-embed {
    width: 100%;
    display: flex;
  }

  #altair-viz-d09af60bd6344262a6b3c497f86ff49a.vega-embed details,
  #altair-viz-d09af60bd6344262a6b3c497f86ff49a.vega-embed details summary {
    position: relative;
  }
</style>
<div id="altair-viz-d09af60bd6344262a6b3c497f86ff49a"></div>
<script type="text/javascript">
  var VEGA_DEBUG = (typeof VEGA_DEBUG == "undefined") ? {} : VEGA_DEBUG;
  (function(spec, embedOpt){
    let outputDiv = document.currentScript.previousElementSibling;
    if (outputDiv.id !== "altair-viz-d09af60bd6344262a6b3c497f86ff49a") {
      outputDiv = document.getElementById("altair-viz-d09af60bd6344262a6b3c497f86ff49a");
    }
    const paths = {
      "vega": "https://cdn.jsdelivr.net/npm/vega@5?noext",
      "vega-lib": "https://cdn.jsdelivr.net/npm/vega-lib?noext",
      "vega-lite": "https://cdn.jsdelivr.net/npm/vega-lite@5.8.0?noext",
      "vega-embed": "https://cdn.jsdelivr.net/npm/vega-embed@6?noext",
    };

    function maybeLoadScript(lib, version) {
      var key = `${lib.replace("-", "")}_version`;
      return (VEGA_DEBUG[key] == version) ?
        Promise.resolve(paths[lib]) :
        new Promise(function(resolve, reject) {
          var s = document.createElement('script');
          document.getElementsByTagName("head")[0].appendChild(s);
          s.async = true;
          s.onload = () => {
            VEGA_DEBUG[key] = version;
            return resolve(paths[lib]);
          };
          s.onerror = () => reject(`Error loading script: ${paths[lib]}`);
          s.src = paths[lib];
        });
    }

    function showError(err) {
      outputDiv.innerHTML = `<div class="error" style="color:red;">${err}</div>`;
      throw err;
    }

    function displayChart(vegaEmbed) {
      vegaEmbed(outputDiv, spec, embedOpt)
        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));
    }

    if(typeof define === "function" && define.amd) {
      requirejs.config({paths});
      require(["vega-embed"], displayChart, err => showError(`Error loading script: ${err.message}`));
    } else {
      maybeLoadScript("vega", "5")
        .then(() => maybeLoadScript("vega-lite", "5.8.0"))
        .then(() => maybeLoadScript("vega-embed", "6"))
        .catch(showError)
        .then(() => displayChart(vegaEmbed));
    }
  })({"config": {"view": {"continuousWidth": 300, "continuousHeight": 300, "step": 15}}, "layer": [{"mark": {"type": "bar"}, "encoding": {"color": {"field": "comparison_name", "legend": null, "type": "nominal"}, "tooltip": [{"field": "comparison_name", "type": "nominal"}, {"field": "label_for_charts", "type": "nominal"}, {"field": "sql_condition", "type": "nominal"}, {"field": "m_probability", "type": "quantitative"}, {"field": "u_probability", "type": "quantitative"}, {"field": "bayes_factor", "type": "quantitative"}, {"field": "log2_bayes_factor", "type": "quantitative"}], "x": {"field": "log2_bayes_factor", "scale": {"domain": [-10, 10]}, "title": "Comparison level match weight = log2(m/u)", "type": "quantitative"}, "y": {"field": "cl_id", "sort": "-x", "title": "Comparison level", "type": "nominal"}}}, {"mark": {"type": "text", "align": "right", "dx": 0}, "encoding": {"text": {"field": "comparison_name", "type": "nominal"}, "tooltip": [{"field": "comparison_name", "type": "nominal"}, {"field": "label_for_charts", "type": "nominal"}, {"field": "sql_condition", "type": "nominal"}, {"field": "m_probability", "type": "quantitative"}, {"field": "u_probability", "type": "quantitative"}, {"field": "bayes_factor", "type": "quantitative"}, {"field": "log2_bayes_factor", "type": "quantitative"}], "x": {"field": "log2_bayes_factor", "scale": {"domain": [-10, 10]}, "title": "Comparison level match weight = log2(m/u)", "type": "quantitative"}, "y": {"field": "cl_id", "sort": "-x", "title": "Comparison level", "type": "nominal"}}}], "data": {"name": "data-3901c03d78701611834aa82ab7374cce"}, "resolve": {"axis": {"x": "shared", "y": "shared"}}, "title": "New Chart - WOO!", "$schema": "https://vega.github.io/schema/vega-lite/v5.8.0.json", "datasets": {"data-3901c03d78701611834aa82ab7374cce": [{"comparison_name": "first_name", "sql_condition": "\"first_name_l\" = \"first_name_r\"", "label_for_charts": "Exact match first_name", "m_probability": 0.5018941916173814, "u_probability": 0.0057935713975033705, "bayes_factor": 86.62949969575988, "log2_bayes_factor": 6.436786480320881, "comparison_vector_value": 4, "cl_id": "first_name_4"}, {"comparison_name": "first_name", "sql_condition": "damerau_levenshtein(\"first_name_l\", \"first_name_r\") <= 1", "label_for_charts": "Damerau_levenshtein <= 1", "m_probability": 0.19595791797531015, "u_probability": 0.00236614327345483, "bayes_factor": 82.81743551783742, "log2_bayes_factor": 6.371862624533329, "comparison_vector_value": 3, "cl_id": "first_name_3"}, {"comparison_name": "first_name", "sql_condition": "jaro_winkler_similarity(\"first_name_l\", \"first_name_r\") >= 0.9", "label_for_charts": "Jaro_winkler_similarity >= 0.9", "m_probability": 0.045985303626033085, "u_probability": 0.001296159366708712, "bayes_factor": 35.47812468678278, "log2_bayes_factor": 5.148857848140163, "comparison_vector_value": 2, "cl_id": "first_name_2"}, {"comparison_name": "first_name", "sql_condition": "jaro_winkler_similarity(\"first_name_l\", \"first_name_r\") >= 0.8", "label_for_charts": "Jaro_winkler_similarity >= 0.8", "m_probability": 0.06396730257493154, "u_probability": 0.005677583982137938, "bayes_factor": 11.266641370022352, "log2_bayes_factor": 3.493985601438375, "comparison_vector_value": 1, "cl_id": "first_name_1"}, {"comparison_name": "first_name", "sql_condition": "ELSE", "label_for_charts": "All other comparisons", "m_probability": 0.19219528420634394, "u_probability": 0.9848665419801952, "bayes_factor": 0.19514855669673956, "log2_bayes_factor": -2.357355302129234, "comparison_vector_value": 0, "cl_id": "first_name_0"}, {"comparison_name": "surname", "sql_condition": "\"surname_l\" = \"surname_r\"", "label_for_charts": "Exact match surname", "m_probability": 0.5527050424941531, "u_probability": 0.004889975550122249, "bayes_factor": 113.02818119005431, "log2_bayes_factor": 6.820538712806792, "comparison_vector_value": 4, "cl_id": "surname_4"}, {"comparison_name": "surname", "sql_condition": "damerau_levenshtein(\"surname_l\", \"surname_r\") <= 1", "label_for_charts": "Damerau_levenshtein <= 1", "m_probability": 0.22212752320956386, "u_probability": 0.0027554624131641246, "bayes_factor": 80.61351958508214, "log2_bayes_factor": 6.332949906378981, "comparison_vector_value": 3, "cl_id": "surname_3"}, {"comparison_name": "surname", "sql_condition": "jaro_winkler_similarity(\"surname_l\", \"surname_r\") >= 0.9", "label_for_charts": "Jaro_winkler_similarity >= 0.9", "m_probability": 0.0490149338194711, "u_probability": 0.0010090425738347498, "bayes_factor": 48.57568460485815, "log2_bayes_factor": 5.602162423566203, "comparison_vector_value": 2, "cl_id": "surname_2"}, {"comparison_name": "surname", "sql_condition": "jaro_winkler_similarity(\"surname_l\", \"surname_r\") >= 0.8", "label_for_charts": "Jaro_winkler_similarity >= 0.8", "m_probability": 0.05001678986356945, "u_probability": 0.003710768991942586, "bayes_factor": 13.478820689774516, "log2_bayes_factor": 3.752622370380284, "comparison_vector_value": 1, "cl_id": "surname_1"}, {"comparison_name": "surname", "sql_condition": "ELSE", "label_for_charts": "All other comparisons", "m_probability": 0.1261357106132424, "u_probability": 0.9876347504709363, "bayes_factor": 0.1277149376863226, "log2_bayes_factor": -2.969000820703079, "comparison_vector_value": 0, "cl_id": "surname_0"}, {"comparison_name": "dob", "sql_condition": "\"dob_l\" = \"dob_r\"", "label_for_charts": "Exact match", "m_probability": 0.41383785481447766, "u_probability": 0.0017477477477477479, "bayes_factor": 236.78351486807742, "log2_bayes_factor": 7.887424832202931, "comparison_vector_value": 5, "cl_id": "dob_5"}, {"comparison_name": "dob", "sql_condition": "damerau_levenshtein(\"dob_l\", \"dob_r\") <= 1", "label_for_charts": "Damerau_levenshtein <= 1", "m_probability": 0.10806341031654734, "u_probability": 0.0016436436436436436, "bayes_factor": 65.74625268345359, "log2_bayes_factor": 6.038836762842662, "comparison_vector_value": 4, "cl_id": "dob_4"}, {"comparison_name": "dob", "sql_condition": "\n            abs(date_diff('month',\n                strptime(\"dob_l\", '%Y-%m-%d'),\n                strptime(\"dob_r\", '%Y-%m-%d'))\n                ) <= 1\n        ", "label_for_charts": "Within 1 month", "m_probability": 0.11300938544779224, "u_probability": 0.003833833833833834, "bayes_factor": 29.476860590690453, "log2_bayes_factor": 4.881510974428093, "comparison_vector_value": 3, "cl_id": "dob_3"}, {"comparison_name": "dob", "sql_condition": "\n            abs(date_diff('year',\n                strptime(\"dob_l\", '%Y-%m-%d'),\n                strptime(\"dob_r\", '%Y-%m-%d'))\n                ) <= 1\n        ", "label_for_charts": "Within 1 year", "m_probability": 0.17200656922328977, "u_probability": 0.05062662662662663, "bayes_factor": 3.397551460259144, "log2_bayes_factor": 1.7644954026183992, "comparison_vector_value": 2, "cl_id": "dob_2"}, {"comparison_name": "dob", "sql_condition": "\n            abs(date_diff('year',\n                strptime(\"dob_l\", '%Y-%m-%d'),\n                strptime(\"dob_r\", '%Y-%m-%d'))\n                ) <= 10\n        ", "label_for_charts": "Within 10 years", "m_probability": 0.19035523041792068, "u_probability": 0.3037037037037037, "bayes_factor": 0.6267794172297388, "log2_bayes_factor": -0.6739702908716182, "comparison_vector_value": 1, "cl_id": "dob_1"}, {"comparison_name": "dob", "sql_condition": "ELSE", "label_for_charts": "All other comparisons", "m_probability": 0.002727549779972325, "u_probability": 0.6384444444444445, "bayes_factor": 0.004272180302776005, "log2_bayes_factor": -7.870811748958801, "comparison_vector_value": 0, "cl_id": "dob_0"}, {"comparison_name": "city", "sql_condition": "\"city_l\" = \"city_r\"", "label_for_charts": "Exact match", "m_probability": 0.6013808934279701, "u_probability": 0.0551475711801453, "bayes_factor": 10.904938885948333, "log2_bayes_factor": 3.4469097796586596, "comparison_vector_value": 1, "cl_id": "city_1"}, {"comparison_name": "city", "sql_condition": "ELSE", "label_for_charts": "All other comparisons", "m_probability": 0.3986191065720299, "u_probability": 0.9448524288198547, "bayes_factor": 0.42188504195296994, "log2_bayes_factor": -1.2450781575619725, "comparison_vector_value": 0, "cl_id": "city_0"}, {"comparison_name": "email", "sql_condition": "\"email_l\" = \"email_r\"", "label_for_charts": "Exact match", "m_probability": 0.5914840252879943, "u_probability": 0.0021938713143283602, "bayes_factor": 269.6074384240141, "log2_bayes_factor": 8.07471649055784, "comparison_vector_value": 2, "cl_id": "email_2"}, {"comparison_name": "email", "sql_condition": "levenshtein(\"email_l\", \"email_r\") <= 2", "label_for_charts": "Levenshtein <= 2", "m_probability": 0.3019669634613132, "u_probability": 0.0013542812658830492, "bayes_factor": 222.9721189153553, "log2_bayes_factor": 7.800719512398763, "comparison_vector_value": 1, "cl_id": "email_1"}, {"comparison_name": "email", "sql_condition": "ELSE", "label_for_charts": "All other comparisons", "m_probability": 0.10654901125069259, "u_probability": 0.9964518474197885, "bayes_factor": 0.10692840956298139, "log2_bayes_factor": -3.225282884575804, "comparison_vector_value": 0, "cl_id": "email_0"}]}}, {"mode": "vega-lite"});
</script>

<p>Sometimes things go wrong in Altair and it's not clear why or how to fix it. If the docs and Stack Overflow don't have a solution, the answer is usually that Altair is making decisions under the hood about the Vega-Lite schema that are out of your control.</p>
<p>In this example, the sorting of the y-axis is broken when layering charts. If we show <code>bar</code> and <code>text</code> side-by-side, you can see they work as expected, but the sorting is broken in the layering process.</p>
<div class="highlight"><pre><span></span><code><span class="n">bar</span> <span class="o">|</span> <span class="n">text</span>
</code></pre></div>
<style>
  #altair-viz-5af5714a540a4cee9e489f6f7c421811.vega-embed {
    width: 100%;
    display: flex;
  }

  #altair-viz-5af5714a540a4cee9e489f6f7c421811.vega-embed details,
  #altair-viz-5af5714a540a4cee9e489f6f7c421811.vega-embed details summary {
    position: relative;
  }
</style>
<div id="altair-viz-5af5714a540a4cee9e489f6f7c421811"></div>
<script type="text/javascript">
  var VEGA_DEBUG = (typeof VEGA_DEBUG == "undefined") ? {} : VEGA_DEBUG;
  (function(spec, embedOpt){
    let outputDiv = document.currentScript.previousElementSibling;
    if (outputDiv.id !== "altair-viz-5af5714a540a4cee9e489f6f7c421811") {
      outputDiv = document.getElementById("altair-viz-5af5714a540a4cee9e489f6f7c421811");
    }
    const paths = {
      "vega": "https://cdn.jsdelivr.net/npm/vega@5?noext",
      "vega-lib": "https://cdn.jsdelivr.net/npm/vega-lib?noext",
      "vega-lite": "https://cdn.jsdelivr.net/npm/vega-lite@5.8.0?noext",
      "vega-embed": "https://cdn.jsdelivr.net/npm/vega-embed@6?noext",
    };

    function maybeLoadScript(lib, version) {
      var key = `${lib.replace("-", "")}_version`;
      return (VEGA_DEBUG[key] == version) ?
        Promise.resolve(paths[lib]) :
        new Promise(function(resolve, reject) {
          var s = document.createElement('script');
          document.getElementsByTagName("head")[0].appendChild(s);
          s.async = true;
          s.onload = () => {
            VEGA_DEBUG[key] = version;
            return resolve(paths[lib]);
          };
          s.onerror = () => reject(`Error loading script: ${paths[lib]}`);
          s.src = paths[lib];
        });
    }

    function showError(err) {
      outputDiv.innerHTML = `<div class="error" style="color:red;">${err}</div>`;
      throw err;
    }

    function displayChart(vegaEmbed) {
      vegaEmbed(outputDiv, spec, embedOpt)
        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));
    }

    if(typeof define === "function" && define.amd) {
      requirejs.config({paths});
      require(["vega-embed"], displayChart, err => showError(`Error loading script: ${err.message}`));
    } else {
      maybeLoadScript("vega", "5")
        .then(() => maybeLoadScript("vega-lite", "5.8.0"))
        .then(() => maybeLoadScript("vega-embed", "6"))
        .catch(showError)
        .then(() => displayChart(vegaEmbed));
    }
  })({"config": {"view": {"continuousWidth": 300, "continuousHeight": 300}}, "hconcat": [{"mark": {"type": "bar"}, "encoding": {"color": {"field": "comparison_name", "legend": null, "type": "nominal"}, "tooltip": [{"field": "comparison_name", "type": "nominal"}, {"field": "label_for_charts", "type": "nominal"}, {"field": "sql_condition", "type": "nominal"}, {"field": "m_probability", "type": "quantitative"}, {"field": "u_probability", "type": "quantitative"}, {"field": "bayes_factor", "type": "quantitative"}, {"field": "log2_bayes_factor", "type": "quantitative"}], "x": {"field": "log2_bayes_factor", "scale": {"domain": [-10, 10]}, "title": "Comparison level match weight = log2(m/u)", "type": "quantitative"}, "y": {"field": "cl_id", "sort": "-x", "title": "Comparison level", "type": "nominal"}}}, {"mark": {"type": "text", "align": "right", "dx": 0}, "encoding": {"text": {"field": "comparison_name", "type": "nominal"}, "tooltip": [{"field": "comparison_name", "type": "nominal"}, {"field": "label_for_charts", "type": "nominal"}, {"field": "sql_condition", "type": "nominal"}, {"field": "m_probability", "type": "quantitative"}, {"field": "u_probability", "type": "quantitative"}, {"field": "bayes_factor", "type": "quantitative"}, {"field": "log2_bayes_factor", "type": "quantitative"}], "x": {"field": "log2_bayes_factor", "scale": {"domain": [-10, 10]}, "title": "Comparison level match weight = log2(m/u)", "type": "quantitative"}, "y": {"field": "cl_id", "sort": "-x", "title": "Comparison level", "type": "nominal"}}}], "data": {"name": "data-3901c03d78701611834aa82ab7374cce"}, "$schema": "https://vega.github.io/schema/vega-lite/v5.8.0.json", "datasets": {"data-3901c03d78701611834aa82ab7374cce": [{"comparison_name": "first_name", "sql_condition": "\"first_name_l\" = \"first_name_r\"", "label_for_charts": "Exact match first_name", "m_probability": 0.5018941916173814, "u_probability": 0.0057935713975033705, "bayes_factor": 86.62949969575988, "log2_bayes_factor": 6.436786480320881, "comparison_vector_value": 4, "cl_id": "first_name_4"}, {"comparison_name": "first_name", "sql_condition": "damerau_levenshtein(\"first_name_l\", \"first_name_r\") <= 1", "label_for_charts": "Damerau_levenshtein <= 1", "m_probability": 0.19595791797531015, "u_probability": 0.00236614327345483, "bayes_factor": 82.81743551783742, "log2_bayes_factor": 6.371862624533329, "comparison_vector_value": 3, "cl_id": "first_name_3"}, {"comparison_name": "first_name", "sql_condition": "jaro_winkler_similarity(\"first_name_l\", \"first_name_r\") >= 0.9", "label_for_charts": "Jaro_winkler_similarity >= 0.9", "m_probability": 0.045985303626033085, "u_probability": 0.001296159366708712, "bayes_factor": 35.47812468678278, "log2_bayes_factor": 5.148857848140163, "comparison_vector_value": 2, "cl_id": "first_name_2"}, {"comparison_name": "first_name", "sql_condition": "jaro_winkler_similarity(\"first_name_l\", \"first_name_r\") >= 0.8", "label_for_charts": "Jaro_winkler_similarity >= 0.8", "m_probability": 0.06396730257493154, "u_probability": 0.005677583982137938, "bayes_factor": 11.266641370022352, "log2_bayes_factor": 3.493985601438375, "comparison_vector_value": 1, "cl_id": "first_name_1"}, {"comparison_name": "first_name", "sql_condition": "ELSE", "label_for_charts": "All other comparisons", "m_probability": 0.19219528420634394, "u_probability": 0.9848665419801952, "bayes_factor": 0.19514855669673956, "log2_bayes_factor": -2.357355302129234, "comparison_vector_value": 0, "cl_id": "first_name_0"}, {"comparison_name": "surname", "sql_condition": "\"surname_l\" = \"surname_r\"", "label_for_charts": "Exact match surname", "m_probability": 0.5527050424941531, "u_probability": 0.004889975550122249, "bayes_factor": 113.02818119005431, "log2_bayes_factor": 6.820538712806792, "comparison_vector_value": 4, "cl_id": "surname_4"}, {"comparison_name": "surname", "sql_condition": "damerau_levenshtein(\"surname_l\", \"surname_r\") <= 1", "label_for_charts": "Damerau_levenshtein <= 1", "m_probability": 0.22212752320956386, "u_probability": 0.0027554624131641246, "bayes_factor": 80.61351958508214, "log2_bayes_factor": 6.332949906378981, "comparison_vector_value": 3, "cl_id": "surname_3"}, {"comparison_name": "surname", "sql_condition": "jaro_winkler_similarity(\"surname_l\", \"surname_r\") >= 0.9", "label_for_charts": "Jaro_winkler_similarity >= 0.9", "m_probability": 0.0490149338194711, "u_probability": 0.0010090425738347498, "bayes_factor": 48.57568460485815, "log2_bayes_factor": 5.602162423566203, "comparison_vector_value": 2, "cl_id": "surname_2"}, {"comparison_name": "surname", "sql_condition": "jaro_winkler_similarity(\"surname_l\", \"surname_r\") >= 0.8", "label_for_charts": "Jaro_winkler_similarity >= 0.8", "m_probability": 0.05001678986356945, "u_probability": 0.003710768991942586, "bayes_factor": 13.478820689774516, "log2_bayes_factor": 3.752622370380284, "comparison_vector_value": 1, "cl_id": "surname_1"}, {"comparison_name": "surname", "sql_condition": "ELSE", "label_for_charts": "All other comparisons", "m_probability": 0.1261357106132424, "u_probability": 0.9876347504709363, "bayes_factor": 0.1277149376863226, "log2_bayes_factor": -2.969000820703079, "comparison_vector_value": 0, "cl_id": "surname_0"}, {"comparison_name": "dob", "sql_condition": "\"dob_l\" = \"dob_r\"", "label_for_charts": "Exact match", "m_probability": 0.41383785481447766, "u_probability": 0.0017477477477477479, "bayes_factor": 236.78351486807742, "log2_bayes_factor": 7.887424832202931, "comparison_vector_value": 5, "cl_id": "dob_5"}, {"comparison_name": "dob", "sql_condition": "damerau_levenshtein(\"dob_l\", \"dob_r\") <= 1", "label_for_charts": "Damerau_levenshtein <= 1", "m_probability": 0.10806341031654734, "u_probability": 0.0016436436436436436, "bayes_factor": 65.74625268345359, "log2_bayes_factor": 6.038836762842662, "comparison_vector_value": 4, "cl_id": "dob_4"}, {"comparison_name": "dob", "sql_condition": "\n            abs(date_diff('month',\n                strptime(\"dob_l\", '%Y-%m-%d'),\n                strptime(\"dob_r\", '%Y-%m-%d'))\n                ) <= 1\n        ", "label_for_charts": "Within 1 month", "m_probability": 0.11300938544779224, "u_probability": 0.003833833833833834, "bayes_factor": 29.476860590690453, "log2_bayes_factor": 4.881510974428093, "comparison_vector_value": 3, "cl_id": "dob_3"}, {"comparison_name": "dob", "sql_condition": "\n            abs(date_diff('year',\n                strptime(\"dob_l\", '%Y-%m-%d'),\n                strptime(\"dob_r\", '%Y-%m-%d'))\n                ) <= 1\n        ", "label_for_charts": "Within 1 year", "m_probability": 0.17200656922328977, "u_probability": 0.05062662662662663, "bayes_factor": 3.397551460259144, "log2_bayes_factor": 1.7644954026183992, "comparison_vector_value": 2, "cl_id": "dob_2"}, {"comparison_name": "dob", "sql_condition": "\n            abs(date_diff('year',\n                strptime(\"dob_l\", '%Y-%m-%d'),\n                strptime(\"dob_r\", '%Y-%m-%d'))\n                ) <= 10\n        ", "label_for_charts": "Within 10 years", "m_probability": 0.19035523041792068, "u_probability": 0.3037037037037037, "bayes_factor": 0.6267794172297388, "log2_bayes_factor": -0.6739702908716182, "comparison_vector_value": 1, "cl_id": "dob_1"}, {"comparison_name": "dob", "sql_condition": "ELSE", "label_for_charts": "All other comparisons", "m_probability": 0.002727549779972325, "u_probability": 0.6384444444444445, "bayes_factor": 0.004272180302776005, "log2_bayes_factor": -7.870811748958801, "comparison_vector_value": 0, "cl_id": "dob_0"}, {"comparison_name": "city", "sql_condition": "\"city_l\" = \"city_r\"", "label_for_charts": "Exact match", "m_probability": 0.6013808934279701, "u_probability": 0.0551475711801453, "bayes_factor": 10.904938885948333, "log2_bayes_factor": 3.4469097796586596, "comparison_vector_value": 1, "cl_id": "city_1"}, {"comparison_name": "city", "sql_condition": "ELSE", "label_for_charts": "All other comparisons", "m_probability": 0.3986191065720299, "u_probability": 0.9448524288198547, "bayes_factor": 0.42188504195296994, "log2_bayes_factor": -1.2450781575619725, "comparison_vector_value": 0, "cl_id": "city_0"}, {"comparison_name": "email", "sql_condition": "\"email_l\" = \"email_r\"", "label_for_charts": "Exact match", "m_probability": 0.5914840252879943, "u_probability": 0.0021938713143283602, "bayes_factor": 269.6074384240141, "log2_bayes_factor": 8.07471649055784, "comparison_vector_value": 2, "cl_id": "email_2"}, {"comparison_name": "email", "sql_condition": "levenshtein(\"email_l\", \"email_r\") <= 2", "label_for_charts": "Levenshtein <= 2", "m_probability": 0.3019669634613132, "u_probability": 0.0013542812658830492, "bayes_factor": 222.9721189153553, "log2_bayes_factor": 7.800719512398763, "comparison_vector_value": 1, "cl_id": "email_1"}, {"comparison_name": "email", "sql_condition": "ELSE", "label_for_charts": "All other comparisons", "m_probability": 0.10654901125069259, "u_probability": 0.9964518474197885, "bayes_factor": 0.10692840956298139, "log2_bayes_factor": -3.225282884575804, "comparison_vector_value": 0, "cl_id": "email_0"}]}}, {"mode": "vega-lite"});
</script>

<p>Once we get to this stage (or whenever you're comfortable), we can switch to Vega-Lite by exporting the JSON from our <code>chart</code> object, or opening the chart in the Vega-Lite editor.</p>
<div class="highlight"><pre><span></span><code><span class="n">chart</span><span class="o">.</span><span class="n">to_json</span><span class="p">()</span>
</code></pre></div>
<details class="note">
<summary>Chart JSON</summary>
<div class="highlight"><pre><span></span><code><span class="w">  </span><span class="p">{</span>
<span class="w">  </span><span class="nt">"$schema"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://vega.github.io/schema/vega-lite/v5.8.0.json"</span><span class="p">,</span>
<span class="w">  </span><span class="nt">"config"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">"view"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">"continuousHeight"</span><span class="p">:</span><span class="w"> </span><span class="mi">300</span><span class="p">,</span>
<span class="w">      </span><span class="nt">"continuousWidth"</span><span class="p">:</span><span class="w"> </span><span class="mi">300</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">},</span>
<span class="w">  </span><span class="nt">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"data-3901c03d78701611834aa82ab7374cce"</span>
<span class="w">  </span><span class="p">},</span>
<span class="w">  </span><span class="nt">"datasets"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">"data-3901c03d78701611834aa82ab7374cce"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">      </span><span class="p">{</span>
<span class="w">        </span><span class="nt">"bayes_factor"</span><span class="p">:</span><span class="w"> </span><span class="mf">86.62949969575988</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"cl_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"first_name_4"</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"comparison_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"first_name"</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"comparison_vector_value"</span><span class="p">:</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"label_for_charts"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Exact match first_name"</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"log2_bayes_factor"</span><span class="p">:</span><span class="w"> </span><span class="mf">6.436786480320881</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"m_probability"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.5018941916173814</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"sql_condition"</span><span class="p">:</span><span class="w"> </span><span class="s2">"\"first_name_l\" = \"first_name_r\""</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"u_probability"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0057935713975033705</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="p">{</span>
<span class="w">        </span><span class="nt">"bayes_factor"</span><span class="p">:</span><span class="w"> </span><span class="mf">82.81743551783742</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"cl_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"first_name_3"</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"comparison_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"first_name"</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"comparison_vector_value"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"label_for_charts"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Damerau_levenshtein &lt;= 1"</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"log2_bayes_factor"</span><span class="p">:</span><span class="w"> </span><span class="mf">6.371862624533329</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"m_probability"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.19595791797531015</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"sql_condition"</span><span class="p">:</span><span class="w"> </span><span class="s2">"damerau_levenshtein(\"first_name_l\", \"first_name_r\") &lt;= 1"</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"u_probability"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.00236614327345483</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="p">{</span>
<span class="w">        </span><span class="nt">"bayes_factor"</span><span class="p">:</span><span class="w"> </span><span class="mf">35.47812468678278</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"cl_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"first_name_2"</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"comparison_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"first_name"</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"comparison_vector_value"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"label_for_charts"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Jaro_winkler_similarity &gt;= 0.9"</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"log2_bayes_factor"</span><span class="p">:</span><span class="w"> </span><span class="mf">5.148857848140163</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"m_probability"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.045985303626033085</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"sql_condition"</span><span class="p">:</span><span class="w"> </span><span class="s2">"jaro_winkler_similarity(\"first_name_l\", \"first_name_r\") &gt;= 0.9"</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"u_probability"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.001296159366708712</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="p">{</span>
<span class="w">        </span><span class="nt">"bayes_factor"</span><span class="p">:</span><span class="w"> </span><span class="mf">11.266641370022352</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"cl_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"first_name_1"</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"comparison_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"first_name"</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"comparison_vector_value"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"label_for_charts"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Jaro_winkler_similarity &gt;= 0.8"</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"log2_bayes_factor"</span><span class="p">:</span><span class="w"> </span><span class="mf">3.493985601438375</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"m_probability"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.06396730257493154</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"sql_condition"</span><span class="p">:</span><span class="w"> </span><span class="s2">"jaro_winkler_similarity(\"first_name_l\", \"first_name_r\") &gt;= 0.8"</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"u_probability"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.005677583982137938</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="p">{</span>
<span class="w">        </span><span class="nt">"bayes_factor"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.19514855669673956</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"cl_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"first_name_0"</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"comparison_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"first_name"</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"comparison_vector_value"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"label_for_charts"</span><span class="p">:</span><span class="w"> </span><span class="s2">"All other comparisons"</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"log2_bayes_factor"</span><span class="p">:</span><span class="w"> </span><span class="mf">-2.357355302129234</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"m_probability"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.19219528420634394</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"sql_condition"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ELSE"</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"u_probability"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.9848665419801952</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="p">{</span>
<span class="w">        </span><span class="nt">"bayes_factor"</span><span class="p">:</span><span class="w"> </span><span class="mf">113.02818119005431</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"cl_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"surname_4"</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"comparison_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"surname"</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"comparison_vector_value"</span><span class="p">:</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"label_for_charts"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Exact match surname"</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"log2_bayes_factor"</span><span class="p">:</span><span class="w"> </span><span class="mf">6.820538712806792</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"m_probability"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.5527050424941531</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"sql_condition"</span><span class="p">:</span><span class="w"> </span><span class="s2">"\"surname_l\" = \"surname_r\""</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"u_probability"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.004889975550122249</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="p">{</span>
<span class="w">        </span><span class="nt">"bayes_factor"</span><span class="p">:</span><span class="w"> </span><span class="mf">80.61351958508214</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"cl_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"surname_3"</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"comparison_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"surname"</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"comparison_vector_value"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"label_for_charts"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Damerau_levenshtein &lt;= 1"</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"log2_bayes_factor"</span><span class="p">:</span><span class="w"> </span><span class="mf">6.332949906378981</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"m_probability"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.22212752320956386</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"sql_condition"</span><span class="p">:</span><span class="w"> </span><span class="s2">"damerau_levenshtein(\"surname_l\", \"surname_r\") &lt;= 1"</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"u_probability"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0027554624131641246</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="p">{</span>
<span class="w">        </span><span class="nt">"bayes_factor"</span><span class="p">:</span><span class="w"> </span><span class="mf">48.57568460485815</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"cl_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"surname_2"</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"comparison_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"surname"</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"comparison_vector_value"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"label_for_charts"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Jaro_winkler_similarity &gt;= 0.9"</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"log2_bayes_factor"</span><span class="p">:</span><span class="w"> </span><span class="mf">5.602162423566203</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"m_probability"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0490149338194711</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"sql_condition"</span><span class="p">:</span><span class="w"> </span><span class="s2">"jaro_winkler_similarity(\"surname_l\", \"surname_r\") &gt;= 0.9"</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"u_probability"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0010090425738347498</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="p">{</span>
<span class="w">        </span><span class="nt">"bayes_factor"</span><span class="p">:</span><span class="w"> </span><span class="mf">13.478820689774516</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"cl_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"surname_1"</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"comparison_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"surname"</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"comparison_vector_value"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"label_for_charts"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Jaro_winkler_similarity &gt;= 0.8"</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"log2_bayes_factor"</span><span class="p">:</span><span class="w"> </span><span class="mf">3.752622370380284</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"m_probability"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.05001678986356945</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"sql_condition"</span><span class="p">:</span><span class="w"> </span><span class="s2">"jaro_winkler_similarity(\"surname_l\", \"surname_r\") &gt;= 0.8"</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"u_probability"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.003710768991942586</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="p">{</span>
<span class="w">        </span><span class="nt">"bayes_factor"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.1277149376863226</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"cl_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"surname_0"</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"comparison_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"surname"</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"comparison_vector_value"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"label_for_charts"</span><span class="p">:</span><span class="w"> </span><span class="s2">"All other comparisons"</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"log2_bayes_factor"</span><span class="p">:</span><span class="w"> </span><span class="mf">-2.969000820703079</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"m_probability"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.1261357106132424</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"sql_condition"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ELSE"</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"u_probability"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.9876347504709363</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="p">{</span>
<span class="w">        </span><span class="nt">"bayes_factor"</span><span class="p">:</span><span class="w"> </span><span class="mf">236.78351486807742</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"cl_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dob_5"</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"comparison_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dob"</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"comparison_vector_value"</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"label_for_charts"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Exact match"</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"log2_bayes_factor"</span><span class="p">:</span><span class="w"> </span><span class="mf">7.887424832202931</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"m_probability"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.41383785481447766</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"sql_condition"</span><span class="p">:</span><span class="w"> </span><span class="s2">"\"dob_l\" = \"dob_r\""</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"u_probability"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0017477477477477479</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="p">{</span>
<span class="w">        </span><span class="nt">"bayes_factor"</span><span class="p">:</span><span class="w"> </span><span class="mf">65.74625268345359</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"cl_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dob_4"</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"comparison_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dob"</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"comparison_vector_value"</span><span class="p">:</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"label_for_charts"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Damerau_levenshtein &lt;= 1"</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"log2_bayes_factor"</span><span class="p">:</span><span class="w"> </span><span class="mf">6.038836762842662</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"m_probability"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.10806341031654734</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"sql_condition"</span><span class="p">:</span><span class="w"> </span><span class="s2">"damerau_levenshtein(\"dob_l\", \"dob_r\") &lt;= 1"</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"u_probability"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0016436436436436436</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="p">{</span>
<span class="w">        </span><span class="nt">"bayes_factor"</span><span class="p">:</span><span class="w"> </span><span class="mf">29.476860590690453</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"cl_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dob_3"</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"comparison_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dob"</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"comparison_vector_value"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"label_for_charts"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Within 1 month"</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"log2_bayes_factor"</span><span class="p">:</span><span class="w"> </span><span class="mf">4.881510974428093</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"m_probability"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.11300938544779224</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"sql_condition"</span><span class="p">:</span><span class="w"> </span><span class="s2">"\n            abs(date_diff('month',\n                strptime(\"dob_l\", '%Y-%m-%d'),\n                strptime(\"dob_r\", '%Y-%m-%d'))\n                ) &lt;= 1\n        "</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"u_probability"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.003833833833833834</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="p">{</span>
<span class="w">        </span><span class="nt">"bayes_factor"</span><span class="p">:</span><span class="w"> </span><span class="mf">3.397551460259144</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"cl_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dob_2"</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"comparison_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dob"</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"comparison_vector_value"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"label_for_charts"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Within 1 year"</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"log2_bayes_factor"</span><span class="p">:</span><span class="w"> </span><span class="mf">1.7644954026183992</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"m_probability"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.17200656922328977</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"sql_condition"</span><span class="p">:</span><span class="w"> </span><span class="s2">"\n            abs(date_diff('year',\n                strptime(\"dob_l\", '%Y-%m-%d'),\n                strptime(\"dob_r\", '%Y-%m-%d'))\n                ) &lt;= 1\n        "</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"u_probability"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.05062662662662663</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="p">{</span>
<span class="w">        </span><span class="nt">"bayes_factor"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.6267794172297388</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"cl_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dob_1"</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"comparison_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dob"</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"comparison_vector_value"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"label_for_charts"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Within 10 years"</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"log2_bayes_factor"</span><span class="p">:</span><span class="w"> </span><span class="mf">-0.6739702908716182</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"m_probability"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.19035523041792068</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"sql_condition"</span><span class="p">:</span><span class="w"> </span><span class="s2">"\n            abs(date_diff('year',\n                strptime(\"dob_l\", '%Y-%m-%d'),\n                strptime(\"dob_r\", '%Y-%m-%d'))\n                ) &lt;= 10\n        "</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"u_probability"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.3037037037037037</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="p">{</span>
<span class="w">        </span><span class="nt">"bayes_factor"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.004272180302776005</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"cl_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dob_0"</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"comparison_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dob"</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"comparison_vector_value"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"label_for_charts"</span><span class="p">:</span><span class="w"> </span><span class="s2">"All other comparisons"</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"log2_bayes_factor"</span><span class="p">:</span><span class="w"> </span><span class="mf">-7.870811748958801</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"m_probability"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.002727549779972325</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"sql_condition"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ELSE"</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"u_probability"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.6384444444444445</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="p">{</span>
<span class="w">        </span><span class="nt">"bayes_factor"</span><span class="p">:</span><span class="w"> </span><span class="mf">10.904938885948333</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"cl_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"city_1"</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"comparison_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"city"</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"comparison_vector_value"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"label_for_charts"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Exact match"</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"log2_bayes_factor"</span><span class="p">:</span><span class="w"> </span><span class="mf">3.4469097796586596</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"m_probability"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.6013808934279701</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"sql_condition"</span><span class="p">:</span><span class="w"> </span><span class="s2">"\"city_l\" = \"city_r\""</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"u_probability"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0551475711801453</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="p">{</span>
<span class="w">        </span><span class="nt">"bayes_factor"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.42188504195296994</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"cl_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"city_0"</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"comparison_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"city"</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"comparison_vector_value"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"label_for_charts"</span><span class="p">:</span><span class="w"> </span><span class="s2">"All other comparisons"</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"log2_bayes_factor"</span><span class="p">:</span><span class="w"> </span><span class="mf">-1.2450781575619725</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"m_probability"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.3986191065720299</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"sql_condition"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ELSE"</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"u_probability"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.9448524288198547</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="p">{</span>
<span class="w">        </span><span class="nt">"bayes_factor"</span><span class="p">:</span><span class="w"> </span><span class="mf">269.6074384240141</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"cl_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"email_2"</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"comparison_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"email"</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"comparison_vector_value"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"label_for_charts"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Exact match"</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"log2_bayes_factor"</span><span class="p">:</span><span class="w"> </span><span class="mf">8.07471649055784</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"m_probability"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.5914840252879943</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"sql_condition"</span><span class="p">:</span><span class="w"> </span><span class="s2">"\"email_l\" = \"email_r\""</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"u_probability"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0021938713143283602</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="p">{</span>
<span class="w">        </span><span class="nt">"bayes_factor"</span><span class="p">:</span><span class="w"> </span><span class="mf">222.9721189153553</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"cl_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"email_1"</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"comparison_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"email"</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"comparison_vector_value"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"label_for_charts"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Levenshtein &lt;= 2"</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"log2_bayes_factor"</span><span class="p">:</span><span class="w"> </span><span class="mf">7.800719512398763</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"m_probability"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.3019669634613132</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"sql_condition"</span><span class="p">:</span><span class="w"> </span><span class="s2">"levenshtein(\"email_l\", \"email_r\") &lt;= 2"</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"u_probability"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0013542812658830492</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="p">{</span>
<span class="w">        </span><span class="nt">"bayes_factor"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.10692840956298139</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"cl_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"email_0"</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"comparison_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"email"</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"comparison_vector_value"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"label_for_charts"</span><span class="p">:</span><span class="w"> </span><span class="s2">"All other comparisons"</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"log2_bayes_factor"</span><span class="p">:</span><span class="w"> </span><span class="mf">-3.225282884575804</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"m_probability"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.10654901125069259</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"sql_condition"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ELSE"</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"u_probability"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.9964518474197885</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">    </span><span class="p">]</span>
<span class="w">  </span><span class="p">},</span>
<span class="w">  </span><span class="nt">"layer"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="nt">"encoding"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">"color"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">          </span><span class="nt">"field"</span><span class="p">:</span><span class="w"> </span><span class="s2">"comparison_name"</span><span class="p">,</span>
<span class="w">          </span><span class="nt">"legend"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">          </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"nominal"</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="nt">"tooltip"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">          </span><span class="p">{</span>
<span class="w">            </span><span class="nt">"field"</span><span class="p">:</span><span class="w"> </span><span class="s2">"comparison_name"</span><span class="p">,</span>
<span class="w">            </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"nominal"</span>
<span class="w">          </span><span class="p">},</span>
<span class="w">          </span><span class="p">{</span>
<span class="w">            </span><span class="nt">"field"</span><span class="p">:</span><span class="w"> </span><span class="s2">"label_for_charts"</span><span class="p">,</span>
<span class="w">            </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"nominal"</span>
<span class="w">          </span><span class="p">},</span>
<span class="w">          </span><span class="p">{</span>
<span class="w">            </span><span class="nt">"field"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sql_condition"</span><span class="p">,</span>
<span class="w">            </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"nominal"</span>
<span class="w">          </span><span class="p">},</span>
<span class="w">          </span><span class="p">{</span>
<span class="w">            </span><span class="nt">"field"</span><span class="p">:</span><span class="w"> </span><span class="s2">"m_probability"</span><span class="p">,</span>
<span class="w">            </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"quantitative"</span>
<span class="w">          </span><span class="p">},</span>
<span class="w">          </span><span class="p">{</span>
<span class="w">            </span><span class="nt">"field"</span><span class="p">:</span><span class="w"> </span><span class="s2">"u_probability"</span><span class="p">,</span>
<span class="w">            </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"quantitative"</span>
<span class="w">          </span><span class="p">},</span>
<span class="w">          </span><span class="p">{</span>
<span class="w">            </span><span class="nt">"field"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bayes_factor"</span><span class="p">,</span>
<span class="w">            </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"quantitative"</span>
<span class="w">          </span><span class="p">},</span>
<span class="w">          </span><span class="p">{</span>
<span class="w">            </span><span class="nt">"field"</span><span class="p">:</span><span class="w"> </span><span class="s2">"log2_bayes_factor"</span><span class="p">,</span>
<span class="w">            </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"quantitative"</span>
<span class="w">          </span><span class="p">}</span>
<span class="w">        </span><span class="p">],</span>
<span class="w">        </span><span class="nt">"x"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">          </span><span class="nt">"field"</span><span class="p">:</span><span class="w"> </span><span class="s2">"log2_bayes_factor"</span><span class="p">,</span>
<span class="w">          </span><span class="nt">"scale"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">"domain"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">              </span><span class="mi">-10</span><span class="p">,</span>
<span class="w">              </span><span class="mi">10</span>
<span class="w">            </span><span class="p">]</span>
<span class="w">          </span><span class="p">},</span>
<span class="w">          </span><span class="nt">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Comparison level match weight = log2(m/u)"</span><span class="p">,</span>
<span class="w">          </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"quantitative"</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="nt">"y"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">          </span><span class="nt">"field"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cl_id"</span><span class="p">,</span>
<span class="w">          </span><span class="nt">"sort"</span><span class="p">:</span><span class="w"> </span><span class="s2">"-x"</span><span class="p">,</span>
<span class="w">          </span><span class="nt">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Comparison level"</span><span class="p">,</span>
<span class="w">          </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"nominal"</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="nt">"mark"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bar"</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="nt">"encoding"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">"text"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">          </span><span class="nt">"field"</span><span class="p">:</span><span class="w"> </span><span class="s2">"comparison_name"</span><span class="p">,</span>
<span class="w">          </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"nominal"</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="nt">"tooltip"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">          </span><span class="p">{</span>
<span class="w">            </span><span class="nt">"field"</span><span class="p">:</span><span class="w"> </span><span class="s2">"comparison_name"</span><span class="p">,</span>
<span class="w">            </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"nominal"</span>
<span class="w">          </span><span class="p">},</span>
<span class="w">          </span><span class="p">{</span>
<span class="w">            </span><span class="nt">"field"</span><span class="p">:</span><span class="w"> </span><span class="s2">"label_for_charts"</span><span class="p">,</span>
<span class="w">            </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"nominal"</span>
<span class="w">          </span><span class="p">},</span>
<span class="w">          </span><span class="p">{</span>
<span class="w">            </span><span class="nt">"field"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sql_condition"</span><span class="p">,</span>
<span class="w">            </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"nominal"</span>
<span class="w">          </span><span class="p">},</span>
<span class="w">          </span><span class="p">{</span>
<span class="w">            </span><span class="nt">"field"</span><span class="p">:</span><span class="w"> </span><span class="s2">"m_probability"</span><span class="p">,</span>
<span class="w">            </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"quantitative"</span>
<span class="w">          </span><span class="p">},</span>
<span class="w">          </span><span class="p">{</span>
<span class="w">            </span><span class="nt">"field"</span><span class="p">:</span><span class="w"> </span><span class="s2">"u_probability"</span><span class="p">,</span>
<span class="w">            </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"quantitative"</span>
<span class="w">          </span><span class="p">},</span>
<span class="w">          </span><span class="p">{</span>
<span class="w">            </span><span class="nt">"field"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bayes_factor"</span><span class="p">,</span>
<span class="w">            </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"quantitative"</span>
<span class="w">          </span><span class="p">},</span>
<span class="w">          </span><span class="p">{</span>
<span class="w">            </span><span class="nt">"field"</span><span class="p">:</span><span class="w"> </span><span class="s2">"log2_bayes_factor"</span><span class="p">,</span>
<span class="w">            </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"quantitative"</span>
<span class="w">          </span><span class="p">}</span>
<span class="w">        </span><span class="p">],</span>
<span class="w">        </span><span class="nt">"x"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">          </span><span class="nt">"field"</span><span class="p">:</span><span class="w"> </span><span class="s2">"log2_bayes_factor"</span><span class="p">,</span>
<span class="w">          </span><span class="nt">"scale"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">"domain"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">              </span><span class="mi">-10</span><span class="p">,</span>
<span class="w">              </span><span class="mi">10</span>
<span class="w">            </span><span class="p">]</span>
<span class="w">          </span><span class="p">},</span>
<span class="w">          </span><span class="nt">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Comparison level match weight = log2(m/u)"</span><span class="p">,</span>
<span class="w">          </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"quantitative"</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="nt">"y"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">          </span><span class="nt">"field"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cl_id"</span><span class="p">,</span>
<span class="w">          </span><span class="nt">"sort"</span><span class="p">:</span><span class="w"> </span><span class="s2">"-x"</span><span class="p">,</span>
<span class="w">          </span><span class="nt">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Comparison level"</span><span class="p">,</span>
<span class="w">          </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"nominal"</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="nt">"mark"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">"align"</span><span class="p">:</span><span class="w"> </span><span class="s2">"right"</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"dx"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"text"</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">]</span>
<span class="w">  </span><span class="p">}</span>
</code></pre></div>
</details>
<h3 id="edit-in-vega-lite">Edit in Vega-Lite<a class="headerlink" href="#edit-in-vega-lite" title="Permanent link"></a></h3>
<p>Opening the JSON from the above chart in <a href="https://vega.github.io/editor/#/url/vega-lite/N4IgJAzgxgFgpgWwIYgFwhgF0wBwqgegIDc4BzJAOjIEtMYBXAI0poHsDp5kTykBaADZ04JAKyUAHJQAMlAFYQ2AOxAAaEFBUAzGmTShiNOAHcDmlZhrKGbBhAAScPVjQBmGTI1blVm3YgAdRoAE3p3TwBfSI0QpEwUVFBlJAQ4NBA4hP4kADYoSQAWJABOKG0ARiQZKAB2JAAmKBCPKCgqmTgmiorJMRAYzPikCDhMCHMsgTyC4rLK6rrG5tb26q723v7UAG1QJiQATzgIAH1tJChMNgAnNElcylyGksKSktySsVqxEslJbyCU6hDK6G4QTCnFJpU6FdQWBA4JA3GhKZRQ1LpdBgiEYtLwrSI5GolSnUhXW5kpCCBhYwoaQRIJhwIHaSmwZHjDIAUQAHpdMAACZCYWCCnGQ6HpBlsMgNU4HY5nC4Uu6oR6FNy5WoPQqSGRuBoyf4VDQIU44G5sA5MGjCTCHNByMQyXqvColCq5Cq1NySCr0kAQACOQJ8ITo7FU6AAOiAJXi4KdBHHBQBeQVxhNS043OPwhgWq02u10R2oOSeb4lNzfCpuEo-A1uWoyMQxfZHE7nAW3e4NKQ+zViMQ+yQtwoNQHAkKgmjgyWY05uAlsIkotGJucLrfeNdIjek8nXG5UmlYtwMpks87smCciboAAimJuSELgjgpGUECwzmUgoADwZhU8KCLK8qKt2Konmgjwtr0zzPIUYhuGhLxmkW1pMqWDpOpQHq-NWPqNqhFSumIGghmGKgRlYKgZHEaRvh+X5wD+f7WAAFFm864jmKbqJm8Z8YuMJ5iAACUQEgQWWElva5aVjIDRat6moNL6KF6m4HYgFByq9mqtaUIUOoVA0hS5A8OqaQCmhAiC2KiYmpwNKu64kuiUrbvxmIeQeXlknAqpnrSaBTiAjLMqyd4PhkABSyJsKcJjWAA1p+p4QDQCB2sSDqCgAfBmcglGBEEKl2hmqmgEgBv83xFP6hSurkl4gOalrYbain4TIKF-KhBpIc2xqUUGoanOGkYMeg8jJalGVZacOV5YyKIOjxIk7gJcZqMJ2ZLhJ0klYKZVyd1Cllv1rovN6vxqa2ki1BZekGT2tWoD0lANLk-2FPWrYqapYiRVAjmzs5u1LqBe6eZuPnQ35+Lw4Fm7HpSxDUuF31XjFt6nhyNxcugSVWktyiZXA2W5flm2HMVpVSBVcpVUqn2wagbimTWQ25K6mrjj8mFXThfUVrI7UfL6KnfG8bgVGIgbUdNtGzdGIALRTaVUyta302W21HTCgkHbxMPiXGp3M5Il3FuLN2S1W2o-OOfwNEDNaSO91Wc32kuEQ1I7-TLDZiLk05OTtKNJjIAXEoj-nI2J0oIujR4hSeYVYl4UXXrFRP3iTj4gAAgoIgiCmw9A04KhIZz+rOQX7MEB-wA61r6I4eJ7LyqYGXUO71TtyB6ntfA0RRGu1mqvFRU0zfRmvcgAMgAyty9s9bhSmUH8er-crHr6oRDS+xzbdqj0PMqf6-oelWmqmg5M4ZBADA3DmcJo4npJI0GT+Plf6HnRJjU82NzxoEDNFG8bIi7xXQHyAUwp4hig-l-fyMo2YfSvnBKQRpUIvQsvqbUJRIpDx3hLZ0YNWwuknG8QGZEF40WUHRKMGQ4wYL2iAdMwluHHXzBoQsYsR54WdgNf47wfgjjug0SyJQL7QSMvcOQ3payET6MaT2gYIZv3QAImEK4QFBQAYYtODc-5gKzljHGF58ZwLiiXDIL5mLvmTGxDimB-wyUFHDKKlVcEqPVJQdCrx3gyHajqP4L9KHXXEXIeRfcfiqSNF8dqDwWFqzYRrRir53Gfm-L+bx3EuFAKXGbfh5SrZSV8f4kRw9d63U0iOKyll6xekBpZXISiapcz1JQb4EcigCz1GIf0E09HR3MW5BOoCtwGOqRY-cVjgqhUgbjSKsDC7TWLqTEA5MUq62prTdaBVGZnQutglul9gkSAFp7ZCoN-pGg6nEx2CTZBvEFjWP0HozI9CyUvDh81FrHP1nTDaRsymYNNvtKpsKkwnSZudfe294l708ORGQJQBoNG+H6NwZk3g+zUJ2W5X16ymR1JIGekhGy1BQl6KOUNAGItOP4yx8yzFLLmUFcBOc0Av22YTXZiCDlguWjTVakLzkorkHba57NlFfR5ik54qlWx+jvoPeSHzMUujatEh4tZPgoSBerZeGRtZHKlacw2W0YU8PNmynMyLLks2EXqsRmKDSvRkLUay7x-n4oeL0-2aox6aVegrQNJr5GR1ftMpZpx44mKTviRZiK+UYxsRAuxToHE7OJvsiuVca7wBuPXFZoCJhKqCV9Du+9PieG0QGg0AaSii0adQgif16x1kifWSylkLU5KtUgjeW8vWiKaZLP4gaiVNjMjirUukyX6VbsE1SjwdQaMPvqWojLwaQ0YtaU4-R03-2Tpka0ObM7rILagCaIr4FiucUg-kVxUGihgM3ZVfSA61CkC9Bh455EqRrLE71c65CA0JTqZWLUzKBsTarYFc0QBxhCOewSfDsPnokui-Vt0hxHpQxR8jtRFEbobVzXIEhGXPDBtZIlqFfgsrPUwWE97vI3pw0wXjazs4bLpEW0VJbS6uJpgUzxxSfHAT8f+ujAdHgGn+FqQNU9JwvO7VQ0eBFjSRKJeRRWDGzJErHewzDTEZOsSKZxZQ20BPJnhQR7jyLFP1Jg72rFuRNT+a1AF4LWpw14NQC8al1kBa-EibilCHUpmspc8Y9OqyAECaEwK0T7hxNvskxkYI9BrB+OFJYP99at1fUKCBpW5FGyFEnPqGsemMX4Rvp4b2ysUPkNHZNVh1nNYxgAoKUbY3xuCiZBALiWQkwRm0NoLiAByBA5WltqAhDcHAVg0jOdw-tYbE2jtjaWwAUgAJr8FOwgK7IQluSQ25gLbO24B7Y8wdkbx2Jtncu9d2793JLSS84d47xGfW3UJZD8cUOiVheCTzBsMiAwPN+AGXRp70Aufclevjmbb2CZx8J2xUCIt5acfsorMASsVEFMcZEymqtcwqJQQNjWvitX7e7chrWSOB1qEaSJEdeuGnpUeqzuTYyfa+5Npg03ZunHm4tpbdObjrc29t3Kr33OufUCD6XJ2LtXZu6du7D31cvbe7mD7+vxs-aN-9wHQOQJ64m2D2DsgXRIS939L367yUqq5mov6R73T85eL6f4nHMfns5TW0x-G72E+y0+4VBcJN7NLpT6nMhadwGRHWgJODGftzUb6RskHjSvW9LSnn4PA64trGDDwgNqN0vFxOrDUuvtTZm-EObNAFvLZV2rp7Gvdva7Ni7-Xdu-sm-u4957mvLcSTUFP6XM-jem8B3UmQa-Rtu97R4FsfqT-H5bHDr6ylJz896B26NAs2xR-x6moTGXE9pfmcnknedX3k9LmW6uWuKtLlLyAvcCIvClLmfgYDF6Y0HoRlelcZU+Wvd3TwTSFpN4EPRsVJCadDS1EFEANeTeA-AzDJRrcgig8g9sWjYva+MqAab2RqV4aHRLDHTQMsDlV-G9KAG6JPPNQVPGfOAmfLDPHkL9IUEUWABnSAgOHmRrFtBlD4cZBjD4FA3tAWesfUelIlTScvF+PA8dAguMHgh0HXfDdg0wojGdHtAzNsUcMyOsW-AMVCC-QPUyT2RqAaM+D4d4dHfRCww4F-QnABEwx0Pgx9b-MnBBD9cuSuQAytatBGFQMAwJWgtAfgZnSyF0cyIZb0bAiad5OvOQBsB4D0ciBjfnSDLtfrbJQbHkKdEgz5V4MZEdE0IaMyVwgOP6EoJ4ANIWBhQWF+JLDIRAJAO0WZYIm9UYu0LLfgnLUnIQxxaI-ZZBb9SQirQvG5APAOaQPoqvb5EcHUXVWdXtVHPUDnMGF6XwjqAwuo2MEAaYoEPDDMOMR4q3EARo31CeP0V6RWDSccB5TotUJJfeG-N0JWRvVg-wt42PJI3HLEB45AGY8IkTFPKI99fZVeOTRzXxbHTYgDCNNAGAzwV6L4CyEoxdNQgzDwD0UOWedRYddvAgwpdieTUpREsYp4tzDk8YzzDMPEhpfTT5LFWsJrCyBjDTBg8+GgmQyNQzT4bTHFCOF4f0BsJ-N4tND-ePPHR42YiI3GH-NPEQ8VAAitOuEAtEFIiA7YtUfgHmeRS4qeIoIZfUY4mwz5co5WXFHofFOLfFao24iXQgho6woUved4fzUcIoRlD0GldsAAXUGEZGODVD2AeOUC0AjGUH0CSAsHAjVFAF0BZFZQtOvVRiinIHYihhsErg0AdBwAROUDXGsGpAGDrLYDYEECsBwDQDTKLMEBLLjwzTTnrMbObJSEEDbMLOMAHIyF-2WIL1HIyCbLygnKnJEmLPfkXnwIYjrMOAbOXPHNbL0n7NZUKKaT3IPPQGDAYCQF8DoHiBoFIHXNPIyEFLa0vIRJvLvKsASCsGfJPJnNZRUzuE-IyG-PvL-KfPSEAs3PQHAK2MA1ApACXOvNvMgsfIAvjI0F5HMFfPgtSNlPhGgGpCxFABwyROjB2AyK8HIkTLrLoE-AyAAGEhyVBBQWSq51jBQTBnAyAsA+EEKuIEACAGBJJ4RUKQAILfzMKYKNByxpy4Kk1ZwqJbhMAMh+BcKGLMAmL0BWK4SOK2JJywL0AVyWzJzogzRkR0pzBJKDg7hLLQB2JMzrAczQBvFeR1Lcz8KtThyJL9yxzVzjz2zOzuzezFLZz0BSz4T-KryQAzK1zYLIrFji1RCTL4qjyLKN0fLAyrV0qErgqIqzyfNeCUKArwL0KZL-y5Kiq3ySq8J0rpKHzqqXygKMgQLYqvzKrmroLWqlKEKCS8FGruqoKsKcK8K2qCLrSkLiKoBSLJg1wxiqKaK1A6LBhfzdKQB9LG5DLSAuK0EYAeK+KBKMwhKRKxLOqKqfyeqAL5KJqlLhjVKSYNKtKULGKETtqrFdqWRLrTLMqBhBhkAbgbLczqQ9BNYUR+L1LYhcKKx0qPL1LohEygA">Vega-Lite editor</a>, it is now behaving as intended, with both bar and text layers sorted by match weight.</p>
<p>If the chart is working as intended, there is only one step required before saving the JSON file - removing data from the template schema.</p>
<p>The data appears as follows with a dictionary of all included <code>datasets</code> by name, and then each chart referencing the <code>data</code> it uses by name:</p>
<div class="highlight"><pre><span></span><code>"data": {"name": "data-a6c84a9cf1a0c7a2cd30cc1a0e2c1185"},
"datasets": {
  "data-a6c84a9cf1a0c7a2cd30cc1a0e2c1185": [

    ...

  ]
},
</code></pre></div>
<p>Where only one dataset is required, this is equivalent to:
</p><div class="highlight"><pre><span></span><code>"data": {"values": [...]}
</code></pre></div>
<p>After removing the data references, the template can be saved in Splink as <code>splink/files/chart_defs/my_new_chart.json</code></p>
<h2 id="combine-the-chart-dataset-and-template">Combine the chart dataset and template<a class="headerlink" href="#combine-the-chart-dataset-and-template" title="Permanent link"></a></h2>
<p>Putting all of the above together, Splink needs definitions for the methods that generate the chart and the data behind it (these can be separate or performed by the same function if relatively simple).</p>
<h3 id="chart-definition">Chart definition<a class="headerlink" href="#chart-definition" title="Permanent link"></a></h3>
<p>In <a href="https://github.com/moj-analytical-services/splink/blob/master/splink/charts.py"><code>splink/charts.py</code></a> we can add a new function to populate the chart definition with the provided data:</p>
<div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">my_new_chart</span><span class="p">(</span><span class="n">records</span><span class="p">,</span> <span class="n">as_dict</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
    <span class="n">chart_path</span> <span class="o">=</span> <span class="s2">"my_new_chart.json"</span>
    <span class="n">chart</span> <span class="o">=</span> <span class="n">load_chart_definition</span><span class="p">(</span><span class="n">chart_path</span><span class="p">)</span>

    <span class="n">chart</span><span class="p">[</span><span class="s2">"data"</span><span class="p">][</span><span class="s2">"values"</span><span class="p">]</span> <span class="o">=</span> <span class="n">records</span>
    <span class="k">return</span> <span class="n">altair_or_json</span><span class="p">(</span><span class="n">chart</span><span class="p">,</span> <span class="n">as_dict</span><span class="o">=</span><span class="n">as_dict</span><span class="p">)</span>
</code></pre></div>
<blockquote>
<p><strong>Note</strong> - only the data is being added to a fixed chart definition here. Other elements of the chart spec can be changed by editing the <code>chart</code> dictionary in the same way. </p>
<p>For example, if you wanted to add a <code>color_scheme</code> argument to replace the default scheme ("tableau10"), this function could include the line: <code>chart["layer"][0]["encoding"]["color"]["scale"]["scheme"] = color_scheme</code></p>
</blockquote>
<h3 id="chart-method">Chart method<a class="headerlink" href="#chart-method" title="Permanent link"></a></h3>
<p>Then we can add a method to the linker in <a href="https://github.com/moj-analytical-services/splink/blob/master/splink/linker.py"><code>splink/linker.py</code></a> so the chart can be generated by <code>linker.my_new_chart()</code>:</p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">.charts</span><span class="w"> </span><span class="kn">import</span> <span class="n">my_new_chart</span>

<span class="o">...</span>

<span class="k">class</span><span class="w"> </span><span class="nc">Linker</span><span class="p">:</span>

    <span class="o">...</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">my_new_chart</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="c1"># Take linker object and extract complete settings dict</span>
        <span class="n">records</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_settings_obj</span><span class="o">.</span><span class="n">_parameters_as_detailed_records</span>

        <span class="n">cols_to_keep</span> <span class="o">=</span> <span class="p">[</span>
            <span class="s2">"comparison_name"</span><span class="p">,</span>
            <span class="s2">"sql_condition"</span><span class="p">,</span>
            <span class="s2">"label_for_charts"</span><span class="p">,</span>
            <span class="s2">"m_probability"</span><span class="p">,</span>
            <span class="s2">"u_probability"</span><span class="p">,</span>
            <span class="s2">"bayes_factor"</span><span class="p">,</span>
            <span class="s2">"log2_bayes_factor"</span><span class="p">,</span>
            <span class="s2">"comparison_vector_value"</span>
        <span class="p">]</span>

        <span class="c1"># Keep useful information for a match weights chart</span>
        <span class="n">records</span> <span class="o">=</span> <span class="p">[{</span><span class="n">k</span><span class="p">:</span> <span class="n">r</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">cols_to_keep</span><span class="p">}</span>
                   <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="n">records</span> 
                   <span class="k">if</span> <span class="n">r</span><span class="p">[</span><span class="s2">"comparison_vector_value"</span><span class="p">]</span> <span class="o">!=</span> <span class="o">-</span><span class="mi">1</span> <span class="ow">and</span> <span class="n">r</span><span class="p">[</span><span class="s2">"comparison_sort_order"</span><span class="p">]</span> <span class="o">!=</span> <span class="o">-</span><span class="mi">1</span><span class="p">]</span>

        <span class="k">return</span> <span class="n">my_new_chart</span><span class="p">(</span><span class="n">records</span><span class="p">)</span>
</code></pre></div>
<h2 id="previous-new-chart-prs">Previous new chart PRs<a class="headerlink" href="#previous-new-chart-prs" title="Permanent link"></a></h2>
<p>Real-life Splink chart additions, for reference:</p>
<ul>
<li><a href="https://github.com/moj-analytical-services/splink/pull/1226">Term frequency adjustment chart</a></li>
<li><a href="https://github.com/moj-analytical-services/splink/pull/669">Completeness (multi-dataset) chart</a></li>
<li><a href="https://github.com/moj-analytical-services/splink/pull/660">Cumulative blocking rule chart</a></li>
<li><a href="https://github.com/moj-analytical-services/splink/pull/277">Unlinkables chart</a></li>
<li><a href="https://github.com/moj-analytical-services/splink/pull/277">Missingness chart</a></li>
<li><a href="https://github.com/moj-analytical-services/splink/pull/181">Waterfall chart</a></li>
</ul></div>









  




                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Footer" >
        
          
          <a href="understanding_and_editing_charts.html" class="md-footer__link md-footer__link--prev" aria-label="Previous: Understanding and editing charts">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Previous
              </span>
              <div class="md-ellipsis">
                Understanding and editing charts
              </div>
            </div>
          </a>
        
        
          
          <a href="../udfs.html" class="md-footer__link md-footer__link--next" aria-label="Next: User-Defined Functions">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Next
              </span>
              <div class="md-ellipsis">
                User-Defined Functions
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        
<div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://github.com/moj-analytical-services/splink" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://pypi.org/project/splink/" target="_blank" rel="noopener" title="pypi.org" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.8 200.5c-7.7-30.9-22.3-54.2-53.4-54.2h-40.1v47.4c0 36.8-31.2 67.8-66.8 67.8H172.7c-29.2 0-53.4 25-53.4 54.3v101.8c0 29 25.2 46 53.4 54.3 33.8 9.9 66.3 11.7 106.8 0 26.9-7.8 53.4-23.5 53.4-54.3v-40.7H226.2v-13.6h160.2c31.1 0 42.6-21.7 53.4-54.2 11.2-33.5 10.7-65.7 0-108.6M286.2 444.7a20.4 20.4 0 1 1 0-40.7 20.4 20.4 0 1 1 0 40.7M167.8 248.1h106.8c29.7 0 53.4-24.5 53.4-54.3V91.9c0-29-24.4-50.7-53.4-55.6-35.8-5.9-74.7-5.6-106.8.1-45.2 8-53.4 24.7-53.4 55.6v40.7h106.9v13.6h-147c-31.1 0-58.3 18.7-66.8 54.2-9.8 40.7-10.2 66.1 0 108.6 7.6 31.6 25.7 54.2 56.8 54.2H101v-48.8c0-35.3 30.5-66.4 66.8-66.4m-6.6-183.4a20.4 20.4 0 1 1 0 40.8 20.4 20.4 0 1 1 0-40.8"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://www.robinlinacre.com/" target="_blank" rel="noopener" title="www.robinlinacre.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M311.1 233.4c12.5 12.5 12.5 32.8 0 45.3l-192 192c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L243.2 256 73.9 86.6c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0l192 192z"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://moj-analytical-services.github.io/splink/feed_rss_created.xml" target="_blank" rel="noopener" title="moj-analytical-services.github.io" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M0 64c0-17.7 14.3-32 32-32 229.8 0 416 186.2 416 416 0 17.7-14.3 32-32 32s-32-14.3-32-32C384 253.6 226.4 96 32 96 14.3 96 0 81.7 0 64m0 352a64 64 0 1 1 128 0 64 64 0 1 1-128 0m32-256c159.1 0 288 128.9 288 288 0 17.7-14.3 32-32 32s-32-14.3-32-32c0-123.7-100.3-224-224-224-17.7 0-32-14.3-32-32s14.3-32 32-32"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "../..", "features": ["content.code.annotate", "content.code.copy", "content.tabs.link", "content.tooltips", "header.autohide", "search.highlight", "search.share", "search.suggest", "navigation.indexes", "navigation.footer", "content.action.edit", "navigation.tabs", "navigation.tabs.sticky", "navigation.top", "toc.follow"], "search": "../../assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.79ae519e.min.js"></script>
      
        <script src="../../javascripts/mathjax.js"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
      
    
  </body>
</html>