
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://moj-analytical-services.github.io/splink/demos/examples/duckdb/transactions.html">
      
      
        <link rel="prev" href="deduplicate_50k_synthetic.html">
      
      
        <link rel="next" href="../duckdb_no_test/business_rates_match.html">
      
      
        
      
      
        <link rel="alternate" type="application/rss+xml" title="RSS feed" href="../../../feed_rss_created.xml">
        <link rel="alternate" type="application/rss+xml" title="RSS feed of updated content" href="../../../feed_rss_updated.xml">
      
      <link rel="icon" href="../../../img/favicon.ico">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.1">
    
    
      
        <title>Linking financial transactions - Splink</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.484c7ddc.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.ab4e12ef.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../assets/_mkdocstrings.css">
    
      <link rel="stylesheet" href="../../../css/custom.css">
    
      <link rel="stylesheet" href="../../../css/neoteroi-mkdocs.css">
    
      <link rel="stylesheet" href="../../../css/ansi-colours.css">
    
      <link rel="stylesheet" href="../../../css/jupyter-cells.css">
    
      <link rel="stylesheet" href="../../../css/pandas-dataframe.css">
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      
  


  
  

<script id="__analytics">function __md_analytics(){function e(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],e("js",new Date),e("config","G-L6JT8NK528"),document.addEventListener("DOMContentLoaded",(function(){document.forms.search&&document.forms.search.query.addEventListener("blur",(function(){this.value&&e("event","search",{search_term:this.value})}));document$.subscribe((function(){var t=document.forms.feedback;if(void 0!==t)for(var a of t.querySelectorAll("[type=submit]"))a.addEventListener("click",(function(a){a.preventDefault();var n=document.location.pathname,d=this.getAttribute("data-md-value");e("event","feedback",{page:n,data:d}),t.firstElementChild.disabled=!0;var r=t.querySelector(".md-feedback__note [data-md-value='"+d+"']");r&&(r.hidden=!1)})),t.hidden=!1})),location$.subscribe((function(t){e("config","G-L6JT8NK528",{page_path:t.pathname})}))}));var t=document.createElement("script");t.async=!0,t.src="https://www.googletagmanager.com/gtag/js?id=G-L6JT8NK528",document.getElementById("__analytics").insertAdjacentElement("afterEnd",t)}</script>
  
    <script>"undefined"!=typeof __md_analytics&&__md_analytics()</script>
  

    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="teal" data-md-color-accent="purple">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#linking-banking-transactions" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
        <aside class="md-banner">
          <div class="md-banner__inner md-grid md-typeset">
            
            

    <center> Still using Splink 3 and looking for the old docs?  You can find them  <a href ="https://moj-analytical-services.github.io/splink3_legacy_docs/index.html">here</a></center>


          </div>
          
        </aside>
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../.." title="Splink" class="md-header__button md-logo" aria-label="Splink" data-md-component="logo">
      
  <img src="../../../img/favicon.ico" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Splink
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Linking financial transactions
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="teal" data-md-color-accent="purple"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="teal" data-md-color-accent="purple"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6m0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4M7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" title="Share" aria-label="Share" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91s2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/moj-analytical-services/splink" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../../getting_started.html" class="md-tabs__link">
        
  
  
    
  
  Getting Started

      </a>
    </li>
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../tutorials/00_Tutorial_Introduction.html" class="md-tabs__link">
          
  
  
    
  
  Tutorial

        </a>
      </li>
    
  

      
        
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../examples_index.html" class="md-tabs__link">
          
  
  
    
  
  Examples

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../api_docs/api_docs_index.html" class="md-tabs__link">
          
  
  
    
  
  API Docs

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../topic_guides/topic_guides_index.html" class="md-tabs__link">
          
  
  
    
  
  User Guide

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../dev_guides/index.html" class="md-tabs__link">
          
  
  
    
  
  Contributing

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../blog/index.html" class="md-tabs__link">
          
  
  
    
  
  Blog

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="Splink" class="md-nav__button md-logo" aria-label="Splink" data-md-component="logo">
      
  <img src="../../../img/favicon.ico" alt="logo">

    </a>
    Splink
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/moj-analytical-services/splink" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../getting_started.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Getting Started
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Tutorial
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Tutorial
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/00_Tutorial_Introduction.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Introduction
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/01_Prerequisites.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    1. Data prep prerequisites
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/02_Exploratory_analysis.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    2. Exploratory analysis
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/03_Blocking.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    3. Blocking
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/04_Estimating_model_parameters.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    4. Estimating model parameters
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/05_Predicting_results.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    5. Predicting results
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/06_Visualising_predictions.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    6. Visualising predictions
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/07_Evaluation.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    7. Evaluation
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/08_building_your_own_model.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    8. Tips for building your own model
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
        
        
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Examples
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    Examples
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../examples_index.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Introduction
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2" checked>
        
          
          <label class="md-nav__link" for="__nav_3_2" id="__nav_3_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    DuckDB
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    DuckDB
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="deduplicate_50k_synthetic.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Deduplicate 50k rows historical persons
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    
  
    Linking financial transactions
  

    
  </span>
  
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="transactions.html" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    
  
    Linking financial transactions
  

    
  </span>
  
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#linking-banking-transactions" class="md-nav__link">
    <span class="md-ellipsis">
      
        Linking banking transactions
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../duckdb_no_test/business_rates_match.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Linking businesses
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="link_only.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Linking two tables of persons
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="real_time_record_linkage.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Real time record linkage
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="accuracy_analysis_from_labels_column.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Evaluation from ground truth column
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="pairwise_labels.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Estimating m probabilities from labels
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="quick_and_dirty_persons.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Quick and dirty persons model
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="deterministic_dedupe.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Deterministic dedupe
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="febrl3.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Febrl3 Dedupe
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="febrl4.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Febrl4 link-only
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../duckdb_no_test/cookbook.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Cookbook
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../duckdb_no_test/bias_eval.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Investigating Bias in a Splink Model
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../duckdb_no_test/comparison_playground.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Comparison playground
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../duckdb_no_test/pseudopeople-acs.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Pseudopeople Census to ACS link
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_3" >
        
          
          <label class="md-nav__link" for="__nav_3_3" id="__nav_3_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    PySpark
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    PySpark
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../spark/deduplicate_1k_synthetic.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Deduplication using Pyspark
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_4" >
        
          
          <label class="md-nav__link" for="__nav_3_4" id="__nav_3_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Athena
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    Athena
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../athena/deduplicate_50k_synthetic.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Deduplicate 50k rows historical persons
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_5" >
        
          
          <label class="md-nav__link" for="__nav_3_5" id="__nav_3_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    SQLite
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_5">
            <span class="md-nav__icon md-icon"></span>
            
  
    SQLite
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../sqlite/deduplicate_50k_synthetic.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Deduplicate 50k rows historical persons
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    API Docs
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    API Docs
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../api_docs/api_docs_index.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Introduction
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_2" >
        
          
          <label class="md-nav__link" for="__nav_4_2" id="__nav_4_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Linker
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Linker
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../api_docs/training.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Training
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../api_docs/visualisations.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Visualisations
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../api_docs/inference.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Inference
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../api_docs/linker_clustering.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Clustering
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../api_docs/evaluation.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Evaluation
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../api_docs/table_management.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Table Management
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../api_docs/misc.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Miscellaneous functions
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_3" >
        
          
          <label class="md-nav__link" for="__nav_4_3" id="__nav_4_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Comparisons Library
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    Comparisons Library
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../api_docs/comparison_library.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Comparison Library
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../api_docs/comparison_level_library.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Comparison Level Library
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_4" >
        
          
          <label class="md-nav__link" for="__nav_4_4" id="__nav_4_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Other
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    Other
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../api_docs/exploratory.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Exploratory
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../api_docs/blocking_analysis.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Blocking analysis
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../api_docs/blocking.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Blocking
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../api_docs/clustering.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Clustering
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../api_docs/splink_dataframe.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    SplinkDataFrame
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../api_docs/em_training_session.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    EM Training Session API
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../api_docs/column_expression.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Column Expressions
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_5" >
        
          
          <label class="md-nav__link" for="__nav_4_5" id="__nav_4_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    In-build datasets
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_5">
            <span class="md-nav__icon md-icon"></span>
            
  
    In-build datasets
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../api_docs/datasets.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    SplinkDatasets
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_6" >
        
          
          <label class="md-nav__link" for="__nav_4_6" id="__nav_4_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Splink Settings
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_6">
            <span class="md-nav__icon md-icon"></span>
            
  
    Splink Settings
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../api_docs/settings_dict_guide.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Settings Dict
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    User Guide
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            
  
    User Guide
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../topic_guides/topic_guides_index.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Introduction
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_2" >
        
          
          <label class="md-nav__link" for="__nav_5_2" id="__nav_5_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Record Linkage Theory
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Record Linkage Theory
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../topic_guides/theory/record_linkage.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Why do we need record linkage?
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../topic_guides/theory/probabilistic_vs_deterministic.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Probabilistic vs Deterministic linkage
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../topic_guides/theory/fellegi_sunter.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    The Fellegi-Sunter Model
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../topic_guides/theory/linked_data_as_graphs.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Linked Data as Graphs
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_3" >
        
          
          <label class="md-nav__link" for="__nav_5_3" id="__nav_5_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Linkage Models in Splink
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    Linkage Models in Splink
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../topic_guides/splink_fundamentals/settings.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Defining Splink models
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../topic_guides/splink_fundamentals/querying_splink_results.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Retrieving and querying Splink results
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../topic_guides/splink_fundamentals/link_type.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Link type - linking vs deduping
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_3_4" >
        
          
          <label class="md-nav__link" for="__nav_5_3_4" id="__nav_5_3_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Splink's SQL backends - Spark, DuckDB etc
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_5_3_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_3_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    Splink's SQL backends - Spark, DuckDB etc
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../topic_guides/splink_fundamentals/backends/backends.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Backends overview
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../topic_guides/splink_fundamentals/backends/postgres.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    PostgreSQL
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_4" >
        
          
          <label class="md-nav__link" for="__nav_5_4" id="__nav_5_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Data Preparation
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    Data Preparation
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../topic_guides/data_preparation/feature_engineering.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Feature Engineering
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_5" >
        
          
          <label class="md-nav__link" for="__nav_5_5" id="__nav_5_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Blocking
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_5">
            <span class="md-nav__icon md-icon"></span>
            
  
    Blocking
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../topic_guides/blocking/blocking_rules.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    What are Blocking Rules?
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../topic_guides/blocking/performance.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Computational Performance
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../topic_guides/blocking/model_training.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Model Training Blocking Rules
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_6" >
        
          
          <label class="md-nav__link" for="__nav_5_6" id="__nav_5_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Comparing Records
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_6">
            <span class="md-nav__icon md-icon"></span>
            
  
    Comparing Records
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../topic_guides/comparisons/comparisons_and_comparison_levels.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Comparisons and comparison levels
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../topic_guides/comparisons/customising_comparisons.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Defining and customising comparisons
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../topic_guides/comparisons/out_of_the_box_comparisons.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Out-of-the-box comparisons
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../topic_guides/comparisons/term-frequency.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Term frequency adjustments
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_6_5" >
        
          
          <label class="md-nav__link" for="__nav_5_6_5" id="__nav_5_6_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Comparing strings
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_5_6_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_6_5">
            <span class="md-nav__icon md-icon"></span>
            
  
    Comparing strings
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../topic_guides/comparisons/comparators.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    String comparators
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../topic_guides/comparisons/choosing_comparators.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Choosing string comparators
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../topic_guides/comparisons/phonetic.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Phonetic algorithms
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../topic_guides/comparisons/regular_expressions.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Regular expressions
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_7" >
        
          
          <label class="md-nav__link" for="__nav_5_7" id="__nav_5_7_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Training
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_7">
            <span class="md-nav__icon md-icon"></span>
            
  
    Training
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../topic_guides/training/training_rationale.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Training rationale
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_8" >
        
          
          <label class="md-nav__link" for="__nav_5_8" id="__nav_5_8_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Evaluation
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_8">
            <span class="md-nav__icon md-icon"></span>
            
  
    Evaluation
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../topic_guides/evaluation/overview.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Overview
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../topic_guides/evaluation/model.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Model
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_8_3" >
        
          
          <label class="md-nav__link" for="__nav_5_8_3" id="__nav_5_8_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Edges (Links)
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_5_8_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_8_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    Edges (Links)
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../topic_guides/evaluation/edge_overview.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Overview
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../topic_guides/evaluation/edge_metrics.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Edge Metrics
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../topic_guides/evaluation/labelling.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Clerical Labelling
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_8_4" >
        
          
          <label class="md-nav__link" for="__nav_5_8_4" id="__nav_5_8_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Clusters
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_5_8_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_8_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    Clusters
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../topic_guides/evaluation/clusters/overview.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Overview
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../topic_guides/evaluation/clusters/graph_metrics.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Graph metrics
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../topic_guides/evaluation/clusters/how_to_compute_metrics.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    How to compute graph metrics
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_9" >
        
          
          <label class="md-nav__link" for="__nav_5_9" id="__nav_5_9_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Performance
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_9_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_9">
            <span class="md-nav__icon md-icon"></span>
            
  
    Performance
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../topic_guides/performance/drivers_of_performance.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Run times, performance and linking large data
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../topic_guides/performance/performance_of_comparison_functions.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Performance of comparison functions
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_9_3" >
        
          
          <label class="md-nav__link" for="__nav_5_9_3" id="__nav_5_9_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Spark Performance
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_5_9_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_9_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    Spark Performance
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../topic_guides/performance/optimising_spark.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Optimising Spark performance
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../topic_guides/performance/salting.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Salting blocking rules
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_9_4" >
        
          
          <label class="md-nav__link" for="__nav_5_9_4" id="__nav_5_9_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    DuckDB Performance
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_5_9_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_9_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    DuckDB Performance
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../topic_guides/performance/optimising_duckdb.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Optimising DuckDB performance
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_10" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../charts/index.html" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    Charts Gallery
  

    
  </span>
  
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_5_10" id="__nav_5_10_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_10_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_10">
            <span class="md-nav__icon md-icon"></span>
            
  
    Charts Gallery
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_10_2" >
        
          
          <label class="md-nav__link" for="__nav_5_10_2" id="__nav_5_10_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Exploratory Analysis
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_5_10_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_10_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Exploratory Analysis
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../charts/completeness_chart.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    completeness chart
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../charts/profile_columns.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    profile columns
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_10_3" >
        
          
          <label class="md-nav__link" for="__nav_5_10_3" id="__nav_5_10_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Blocking
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_5_10_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_10_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    Blocking
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../charts/cumulative_comparisons_to_be_scored_from_blocking_rules_chart.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    cumulative num comparisons from blocking rules chart
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_10_4" >
        
          
          <label class="md-nav__link" for="__nav_5_10_4" id="__nav_5_10_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Similarity analysis
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_5_10_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_10_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    Similarity analysis
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../topic_guides/comparisons/choosing_comparators.html#comparing-string-similarity-and-distance-scores" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Comparator score chart
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../topic_guides/comparisons/choosing_comparators.html#choosing-thresholds" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Comparator score threshold chart
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../topic_guides/comparisons/choosing_comparators.html#phonetic-matching" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Phonetic match chart
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_10_5" >
        
          
          <label class="md-nav__link" for="__nav_5_10_5" id="__nav_5_10_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Model Training
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_5_10_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_10_5">
            <span class="md-nav__icon md-icon"></span>
            
  
    Model Training
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../charts/comparison_viewer_dashboard.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    comparison viewer dashboard
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../charts/match_weights_chart.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    match weights chart
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../charts/m_u_parameters_chart.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    m u parameters chart
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../charts/parameter_estimate_comparisons_chart.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    parameter estimate comparisons chart
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../charts/tf_adjustment_chart.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    tf adjustment chart
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../charts/unlinkables_chart.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    unlinkables chart
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../charts/waterfall_chart.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    waterfall chart
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_10_6" >
        
          
          <label class="md-nav__link" for="__nav_5_10_6" id="__nav_5_10_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Clustering
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_5_10_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_10_6">
            <span class="md-nav__icon md-icon"></span>
            
  
    Clustering
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../charts/cluster_studio_dashboard.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    cluster studio dashboard
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_10_7" >
        
          
          <label class="md-nav__link" for="__nav_5_10_7" id="__nav_5_10_7_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Model Evaluation
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_5_10_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_10_7">
            <span class="md-nav__icon md-icon"></span>
            
  
    Model Evaluation
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../charts/accuracy_analysis_from_labels_table.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    accuracy chart from labels table
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../charts/threshold_selection_tool_from_labels_table.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    threshold selection tool
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../topic_guides/llms/prompting_llms.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    LLM prompts
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../dev_guides/index.html" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    Contributing
  

    
  </span>
  
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_6" id="__nav_6_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            
  
    Contributing
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_2" >
        
          
          <label class="md-nav__link" for="__nav_6_2" id="__nav_6_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Contributing to Splink
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Contributing to Splink
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../dev_guides/CONTRIBUTING.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Contributor Guide
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../dev_guides/changing_splink/development_quickstart.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Development Quickstart
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../dev_guides/changing_splink/lint_and_format.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Linting and Formatting
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../dev_guides/changing_splink/testing.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Testing
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../dev_guides/changing_splink/contributing_to_docs.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Contributing to Documentation
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../dev_guides/changing_splink/managing_dependencies_with_uv.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Managing Environment and Dependencies
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../dev_guides/changing_splink/releases.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Releasing a Package Version
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../dev_guides/changing_splink/blog_posts.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Contributing to the Splink Blog
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_3" >
        
          
          <label class="md-nav__link" for="__nav_6_3" id="__nav_6_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    How Splink works
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    How Splink works
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../dev_guides/debug_modes.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Understanding and debugging Splink
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../dev_guides/transpilation.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Transpilation using sqlglot
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_3_3" >
        
          
          <label class="md-nav__link" for="__nav_6_3_3" id="__nav_6_3_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Performance and caching
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_6_3_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_3_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    Performance and caching
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../dev_guides/caching.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Caching and pipelining
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../dev_guides/spark_pipelining_and_caching.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Spark caching
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_3_4" >
        
          
          <label class="md-nav__link" for="__nav_6_3_4" id="__nav_6_3_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Charts
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_6_3_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_3_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    Charts
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../dev_guides/charts/understanding_and_editing_charts.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Understanding and editing charts
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../dev_guides/charts/building_charts.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Building new charts
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../dev_guides/udfs.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    User-Defined Functions
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../dev_guides/dependency_compatibility_policy.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Dependency Compatibility Policy
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../blog/index.html" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    Blog
  

    
  </span>
  
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_7" id="__nav_7_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            
  
    Blog
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7_2" >
        
          
          <label class="md-nav__link" for="__nav_7_2" id="__nav_7_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Categories
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_7_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Categories
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../blog/category/bias.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Bias
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../blog/category/ethics.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Ethics
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../blog/category/feature-updates.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Feature Updates
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#linking-banking-transactions" class="md-nav__link">
    <span class="md-ellipsis">
      
        Linking banking transactions
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  


  
    <a href="https://github.com/moj-analytical-services/splink/edit/master/docs/demos/examples/duckdb/transactions.ipynb" title="Edit this page" class="md-content__button md-icon" rel="edit">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 20H6V4h7v5h5v3.1l2-2V8l-6-6H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4zm10.2-7c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1z"/></svg>
    </a>
  
  


  <h1>Linking financial transactions</h1>

<div><h2 id="linking-banking-transactions">Linking banking transactions<a class="headerlink" href="#linking-banking-transactions" title="Permanent link"></a></h2>
<p>This example shows how to perform a one-to-one link on banking transactions.</p>
<p>The data is fake data, and was generated has the following features:</p>
<ul>
<li>Money shows up in the destination account with some time delay</li>
<li>The amount sent and the amount received are not always the same - there are hidden fees and foreign exchange effects</li>
<li>The memo is sometimes truncated and content is sometimes missing</li>
</ul>
<p>Since each origin payment should end up in the destination account, the <code>probability_two_random_records_match</code> of the model is known.</p>
<p><a target="_blank" href="https://colab.research.google.com/github/moj-analytical-services/splink/blob/master/docs/demos/examples/duckdb/transactions.ipynb">
  <img src="https://colab.research.google.com/assets/colab-badge.svg" alt="Open In Colab">
</a></p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">splink</span><span class="w"> </span><span class="kn">import</span> <span class="n">DuckDBAPI</span><span class="p">,</span> <span class="n">Linker</span><span class="p">,</span> <span class="n">SettingsCreator</span><span class="p">,</span> <span class="n">block_on</span><span class="p">,</span> <span class="n">splink_datasets</span>

<span class="n">df_origin</span> <span class="o">=</span> <span class="n">splink_datasets</span><span class="o">.</span><span class="n">transactions_origin</span>
<span class="n">df_destination</span> <span class="o">=</span> <span class="n">splink_datasets</span><span class="o">.</span><span class="n">transactions_destination</span>

<span class="n">display</span><span class="p">(</span><span class="n">df_origin</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">2</span><span class="p">))</span>
<span class="n">display</span><span class="p">(</span><span class="n">df_destination</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">2</span><span class="p">))</span>
</code></pre></div>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>ground_truth</th>
      <th>memo</th>
      <th>transaction_date</th>
      <th>amount</th>
      <th>unique_id</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>0</td>
      <td>MATTHIAS C paym</td>
      <td>2022-03-28</td>
      <td>36.36</td>
      <td>0</td>
    </tr>
    <tr>
      <th>1</th>
      <td>1</td>
      <td>M CORVINUS dona</td>
      <td>2022-02-14</td>
      <td>221.91</td>
      <td>1</td>
    </tr>
  </tbody>
</table>
</div>

<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>ground_truth</th>
      <th>memo</th>
      <th>transaction_date</th>
      <th>amount</th>
      <th>unique_id</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>0</td>
      <td>MATTHIAS C payment BGC</td>
      <td>2022-03-29</td>
      <td>36.36</td>
      <td>0</td>
    </tr>
    <tr>
      <th>1</th>
      <td>1</td>
      <td>M CORVINUS BGC</td>
      <td>2022-02-16</td>
      <td>221.91</td>
      <td>1</td>
    </tr>
  </tbody>
</table>
</div>

<p>In the following chart, we can see this is a challenging dataset to link:</p>
<ul>
<li>There are only 151 distinct transaction dates, with strong skew</li>
<li>Some 'memos' are used multiple times (up to 48 times)</li>
<li>There is strong skew in the 'amount' column, with 1,400 transactions of around 60.00</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">splink.exploratory</span><span class="w"> </span><span class="kn">import</span> <span class="n">profile_columns</span>

<span class="n">db_api</span> <span class="o">=</span> <span class="n">DuckDBAPI</span><span class="p">()</span>
<span class="n">profile_columns</span><span class="p">(</span>
    <span class="p">[</span><span class="n">df_origin</span><span class="p">,</span> <span class="n">df_destination</span><span class="p">],</span>
    <span class="n">db_api</span><span class="o">=</span><span class="n">db_api</span><span class="p">,</span>
    <span class="n">column_expressions</span><span class="o">=</span><span class="p">[</span>
        <span class="s2">"memo"</span><span class="p">,</span>
        <span class="s2">"transaction_date"</span><span class="p">,</span>
        <span class="s2">"amount"</span><span class="p">,</span>
    <span class="p">],</span>
<span class="p">)</span>
</code></pre></div>
<style>
  #altair-viz-b63b243eaf2f4ad48e06e91effab406a.vega-embed {
    width: 100%;
    display: flex;
  }

  #altair-viz-b63b243eaf2f4ad48e06e91effab406a.vega-embed details,
  #altair-viz-b63b243eaf2f4ad48e06e91effab406a.vega-embed details summary {
    position: relative;
  }
</style>
<div id="altair-viz-b63b243eaf2f4ad48e06e91effab406a"></div>
<script type="text/javascript">
  var VEGA_DEBUG = (typeof VEGA_DEBUG == "undefined") ? {} : VEGA_DEBUG;
  (function(spec, embedOpt){
    let outputDiv = document.currentScript.previousElementSibling;
    if (outputDiv.id !== "altair-viz-b63b243eaf2f4ad48e06e91effab406a") {
      outputDiv = document.getElementById("altair-viz-b63b243eaf2f4ad48e06e91effab406a");
    }
    const paths = {
      "vega": "https://cdn.jsdelivr.net/npm/vega@5?noext",
      "vega-lib": "https://cdn.jsdelivr.net/npm/vega-lib?noext",
      "vega-lite": "https://cdn.jsdelivr.net/npm/vega-lite@5.17.0?noext",
      "vega-embed": "https://cdn.jsdelivr.net/npm/vega-embed@6?noext",
    };

    function maybeLoadScript(lib, version) {
      var key = `${lib.replace("-", "")}_version`;
      return (VEGA_DEBUG[key] == version) ?
        Promise.resolve(paths[lib]) :
        new Promise(function(resolve, reject) {
          var s = document.createElement('script');
          document.getElementsByTagName("head")[0].appendChild(s);
          s.async = true;
          s.onload = () => {
            VEGA_DEBUG[key] = version;
            return resolve(paths[lib]);
          };
          s.onerror = () => reject(`Error loading script: ${paths[lib]}`);
          s.src = paths[lib];
        });
    }

    function showError(err) {
      outputDiv.innerHTML = `<div class="error" style="color:red;">${err}</div>`;
      throw err;
    }

    function displayChart(vegaEmbed) {
      vegaEmbed(outputDiv, spec, embedOpt)
        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));
    }

    if(typeof define === "function" && define.amd) {
      requirejs.config({paths});
      require(["vega-embed"], displayChart, err => showError(`Error loading script: ${err.message}`));
    } else {
      maybeLoadScript("vega", "5")
        .then(() => maybeLoadScript("vega-lite", "5.17.0"))
        .then(() => maybeLoadScript("vega-embed", "6"))
        .catch(showError)
        .then(() => displayChart(vegaEmbed));
    }
  })({"config": {"view": {"continuousWidth": 400, "continuousHeight": 300}}, "vconcat": [{"hconcat": [{"mark": {"type": "line", "interpolate": "step-after"}, "data": {"values": [{"percentile_ex_nulls": 0.9994705319404602, "percentile_inc_nulls": 0.9994705319404602, "value_count": 48, "group_name": "memo", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "sum_tokens_in_value_count_group": 48.0, "distinct_value_count": 52543}, {"percentile_ex_nulls": 0.999029278755188, "percentile_inc_nulls": 0.999029278755188, "value_count": 40, "group_name": "memo", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "sum_tokens_in_value_count_group": 40.0, "distinct_value_count": 52543}, {"percentile_ex_nulls": 0.9986211061477661, "percentile_inc_nulls": 0.9986211061477661, "value_count": 37, "group_name": "memo", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "sum_tokens_in_value_count_group": 37.0, "distinct_value_count": 52543}, {"percentile_ex_nulls": 0.9982239603996277, "percentile_inc_nulls": 0.9982239603996277, "value_count": 36, "group_name": "memo", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "sum_tokens_in_value_count_group": 36.0, "distinct_value_count": 52543}, {"percentile_ex_nulls": 0.9978379011154175, "percentile_inc_nulls": 0.9978379011154175, "value_count": 35, "group_name": "memo", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "sum_tokens_in_value_count_group": 35.0, "distinct_value_count": 52543}, {"percentile_ex_nulls": 0.9974738359451294, "percentile_inc_nulls": 0.9974738359451294, "value_count": 33, "group_name": "memo", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "sum_tokens_in_value_count_group": 33.0, "distinct_value_count": 52543}, {"percentile_ex_nulls": 0.9971208572387695, "percentile_inc_nulls": 0.9971208572387695, "value_count": 32, "group_name": "memo", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "sum_tokens_in_value_count_group": 32.0, "distinct_value_count": 52543}, {"percentile_ex_nulls": 0.99680095911026, "percentile_inc_nulls": 0.99680095911026, "value_count": 29, "group_name": "memo", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "sum_tokens_in_value_count_group": 29.0, "distinct_value_count": 52543}, {"percentile_ex_nulls": 0.9964920878410339, "percentile_inc_nulls": 0.9964920878410339, "value_count": 28, "group_name": "memo", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "sum_tokens_in_value_count_group": 28.0, "distinct_value_count": 52543}, {"percentile_ex_nulls": 0.9961942434310913, "percentile_inc_nulls": 0.9961942434310913, "value_count": 27, "group_name": "memo", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "sum_tokens_in_value_count_group": 27.0, "distinct_value_count": 52543}, {"percentile_ex_nulls": 0.9953337907791138, "percentile_inc_nulls": 0.9953337907791138, "value_count": 26, "group_name": "memo", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "sum_tokens_in_value_count_group": 78.0, "distinct_value_count": 52543}, {"percentile_ex_nulls": 0.995058000087738, "percentile_inc_nulls": 0.995058000087738, "value_count": 25, "group_name": "memo", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "sum_tokens_in_value_count_group": 25.0, "distinct_value_count": 52543}, {"percentile_ex_nulls": 0.9945285320281982, "percentile_inc_nulls": 0.9945285320281982, "value_count": 24, "group_name": "memo", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "sum_tokens_in_value_count_group": 48.0, "distinct_value_count": 52543}, {"percentile_ex_nulls": 0.9930062294006348, "percentile_inc_nulls": 0.9930062294006348, "value_count": 23, "group_name": "memo", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "sum_tokens_in_value_count_group": 138.0, "distinct_value_count": 52543}, {"percentile_ex_nulls": 0.9925208687782288, "percentile_inc_nulls": 0.9925208687782288, "value_count": 22, "group_name": "memo", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "sum_tokens_in_value_count_group": 44.0, "distinct_value_count": 52543}, {"percentile_ex_nulls": 0.9908992648124695, "percentile_inc_nulls": 0.9908992648124695, "value_count": 21, "group_name": "memo", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "sum_tokens_in_value_count_group": 147.0, "distinct_value_count": 52543}, {"percentile_ex_nulls": 0.9897961616516113, "percentile_inc_nulls": 0.9897961616516113, "value_count": 20, "group_name": "memo", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "sum_tokens_in_value_count_group": 100.0, "distinct_value_count": 52543}, {"percentile_ex_nulls": 0.9883289933204651, "percentile_inc_nulls": 0.9883289933204651, "value_count": 19, "group_name": "memo", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "sum_tokens_in_value_count_group": 133.0, "distinct_value_count": 52543}, {"percentile_ex_nulls": 0.9859462380409241, "percentile_inc_nulls": 0.9859462380409241, "value_count": 18, "group_name": "memo", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "sum_tokens_in_value_count_group": 216.0, "distinct_value_count": 52543}, {"percentile_ex_nulls": 0.9842584729194641, "percentile_inc_nulls": 0.9842584729194641, "value_count": 17, "group_name": "memo", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "sum_tokens_in_value_count_group": 153.0, "distinct_value_count": 52543}, {"percentile_ex_nulls": 0.9803755283355713, "percentile_inc_nulls": 0.9803755283355713, "value_count": 16, "group_name": "memo", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "sum_tokens_in_value_count_group": 352.0, "distinct_value_count": 52543}, {"percentile_ex_nulls": 0.9772316217422485, "percentile_inc_nulls": 0.9772316217422485, "value_count": 15, "group_name": "memo", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "sum_tokens_in_value_count_group": 285.0, "distinct_value_count": 52543}, {"percentile_ex_nulls": 0.975223958492279, "percentile_inc_nulls": 0.975223958492279, "value_count": 14, "group_name": "memo", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "sum_tokens_in_value_count_group": 182.0, "distinct_value_count": 52543}, {"percentile_ex_nulls": 0.9713519811630249, "percentile_inc_nulls": 0.9713519811630249, "value_count": 13, "group_name": "memo", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "sum_tokens_in_value_count_group": 351.0, "distinct_value_count": 52543}, {"percentile_ex_nulls": 0.9661893844604492, "percentile_inc_nulls": 0.9661893844604492, "value_count": 12, "group_name": "memo", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "sum_tokens_in_value_count_group": 468.0, "distinct_value_count": 52543}, {"percentile_ex_nulls": 0.9600008726119995, "percentile_inc_nulls": 0.9600008726119995, "value_count": 11, "group_name": "memo", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "sum_tokens_in_value_count_group": 561.0, "distinct_value_count": 52543}, {"percentile_ex_nulls": 0.9508450031280518, "percentile_inc_nulls": 0.9508450031280518, "value_count": 10, "group_name": "memo", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "sum_tokens_in_value_count_group": 830.0, "distinct_value_count": 52543}, {"percentile_ex_nulls": 0.9396262764930725, "percentile_inc_nulls": 0.9396262764930725, "value_count": 9, "group_name": "memo", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "sum_tokens_in_value_count_group": 1017.0, "distinct_value_count": 52543}, {"percentile_ex_nulls": 0.9244473576545715, "percentile_inc_nulls": 0.9244473576545715, "value_count": 8, "group_name": "memo", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "sum_tokens_in_value_count_group": 1376.0, "distinct_value_count": 52543}, {"percentile_ex_nulls": 0.9059921503067017, "percentile_inc_nulls": 0.9059921503067017, "value_count": 7, "group_name": "memo", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "sum_tokens_in_value_count_group": 1673.0, "distinct_value_count": 52543}, {"percentile_ex_nulls": 0.8743546605110168, "percentile_inc_nulls": 0.8743546605110168, "value_count": 6, "group_name": "memo", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "sum_tokens_in_value_count_group": 2868.0, "distinct_value_count": 52543}, {"percentile_ex_nulls": 0.8320500254631042, "percentile_inc_nulls": 0.8320500254631042, "value_count": 5, "group_name": "memo", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "sum_tokens_in_value_count_group": 3835.0, "distinct_value_count": 52543}, {"percentile_ex_nulls": 0.7496249675750732, "percentile_inc_nulls": 0.7496249675750732, "value_count": 4, "group_name": "memo", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "sum_tokens_in_value_count_group": 7472.0, "distinct_value_count": 52543}, {"percentile_ex_nulls": 0.6540506482124329, "percentile_inc_nulls": 0.6540506482124329, "value_count": 3, "group_name": "memo", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "sum_tokens_in_value_count_group": 8664.0, "distinct_value_count": 52543}, {"percentile_ex_nulls": 0.35420066118240356, "percentile_inc_nulls": 0.35420066118240356, "value_count": 2, "group_name": "memo", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "sum_tokens_in_value_count_group": 27182.0, "distinct_value_count": 52543}, {"percentile_ex_nulls": 0.0, "percentile_inc_nulls": 0.0, "value_count": 1, "group_name": "memo", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "sum_tokens_in_value_count_group": 32109.0, "distinct_value_count": 52543}, {"percentile_ex_nulls": 1.0, "percentile_inc_nulls": 1.0, "value_count": 48, "group_name": "memo", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "sum_tokens_in_value_count_group": 48.0, "distinct_value_count": 52543}]}, "encoding": {"tooltip": [{"field": "value_count", "type": "quantitative"}, {"field": "percentile_ex_nulls", "type": "quantitative"}, {"field": "percentile_inc_nulls", "type": "quantitative"}, {"field": "total_non_null_rows", "type": "quantitative"}, {"field": "total_rows_inc_nulls", "type": "quantitative"}], "x": {"field": "percentile_ex_nulls", "sort": "descending", "title": "Percentile", "type": "quantitative"}, "y": {"field": "value_count", "title": "Count of values", "type": "quantitative"}}, "title": {"text": "Distribution of counts of values in column memo", "subtitle": "In this col, 0 values (0.0%) are null and there are 52543 distinct values"}}, {"mark": "bar", "data": {"values": [{"value_count": 48, "group_name": "memo", "value": "J B BGC", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "distinct_value_count": 52543}, {"value_count": 40, "group_name": "memo", "value": "J B payment BGC", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "distinct_value_count": 52543}, {"value_count": 37, "group_name": "memo", "value": "J B", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "distinct_value_count": 52543}, {"value_count": 36, "group_name": "memo", "value": "J B money BGC", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "distinct_value_count": 52543}, {"value_count": 35, "group_name": "memo", "value": "J B donation BG", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "distinct_value_count": 52543}, {"value_count": 33, "group_name": "memo", "value": "J B  BGC", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "distinct_value_count": 52543}, {"value_count": 32, "group_name": "memo", "value": "J S money BGC", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "distinct_value_count": 52543}, {"value_count": 29, "group_name": "memo", "value": "A B BGC", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "distinct_value_count": 52543}, {"value_count": 28, "group_name": "memo", "value": "A B money BGC", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "distinct_value_count": 52543}, {"value_count": 27, "group_name": "memo", "value": "J C money BGC", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "distinct_value_count": 52543}]}, "encoding": {"tooltip": [{"field": "value", "type": "nominal"}, {"field": "value_count", "type": "quantitative"}, {"field": "total_non_null_rows", "type": "quantitative"}, {"field": "total_rows_inc_nulls", "type": "quantitative"}], "x": {"field": "value", "sort": "-y", "title": null, "type": "nominal"}, "y": {"field": "value_count", "title": "Value count", "type": "quantitative"}}, "title": "Top 10 values by value count"}, {"mark": "bar", "data": {"values": [{"value_count": 1, "group_name": "memo", "value": "M CORVINUS  BGC", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "distinct_value_count": 52543}, {"value_count": 1, "group_name": "memo", "value": "M CORVINUS  CSH", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "distinct_value_count": 52543}, {"value_count": 1, "group_name": "memo", "value": "MATTHIAS C paym", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "distinct_value_count": 52543}, {"value_count": 1, "group_name": "memo", "value": "M CORVINUS CSH", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "distinct_value_count": 52543}, {"value_count": 1, "group_name": "memo", "value": "LORENZO D MEDICI donation CSH", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "distinct_value_count": 52543}, {"value_count": 1, "group_name": "memo", "value": "A D THE ELDER d", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "distinct_value_count": 52543}, {"value_count": 1, "group_name": "memo", "value": "A C 909375fb BG", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "distinct_value_count": 52543}, {"value_count": 1, "group_name": "memo", "value": "AIKATERINI C money CSH", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "distinct_value_count": 52543}, {"value_count": 1, "group_name": "memo", "value": "AIKATERINI C money CHQ", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "distinct_value_count": 52543}, {"value_count": 1, "group_name": "memo", "value": "AIKATERINI C  C", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "distinct_value_count": 52543}]}, "encoding": {"tooltip": [{"field": "value", "type": "nominal"}, {"field": "value_count", "type": "quantitative"}, {"field": "total_non_null_rows", "type": "quantitative"}, {"field": "total_rows_inc_nulls", "type": "quantitative"}], "x": {"field": "value", "sort": "-y", "title": null, "type": "nominal"}, "y": {"field": "value_count", "scale": {"domain": [0, 48]}, "title": "Value count", "type": "quantitative"}}, "title": "Bottom 10 values by value count"}]}, {"hconcat": [{"mark": {"type": "line", "interpolate": "step-after"}, "data": {"values": [{"percentile_ex_nulls": 0.31922078132629395, "percentile_inc_nulls": 0.31922078132629395, "value_count": 758, "group_name": "transaction_date", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "sum_tokens_in_value_count_group": 758.0, "distinct_value_count": 151}, {"percentile_ex_nulls": 0.31094735860824585, "percentile_inc_nulls": 0.31094735860824585, "value_count": 750, "group_name": "transaction_date", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "sum_tokens_in_value_count_group": 750.0, "distinct_value_count": 151}, {"percentile_ex_nulls": 0.30285048484802246, "percentile_inc_nulls": 0.30285048484802246, "value_count": 734, "group_name": "transaction_date", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "sum_tokens_in_value_count_group": 734.0, "distinct_value_count": 151}, {"percentile_ex_nulls": 0.2948087453842163, "percentile_inc_nulls": 0.2948087453842163, "value_count": 729, "group_name": "transaction_date", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "sum_tokens_in_value_count_group": 729.0, "distinct_value_count": 151}, {"percentile_ex_nulls": 0.2867780327796936, "percentile_inc_nulls": 0.2867780327796936, "value_count": 728, "group_name": "transaction_date", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "sum_tokens_in_value_count_group": 728.0, "distinct_value_count": 151}, {"percentile_ex_nulls": 0.2787693738937378, "percentile_inc_nulls": 0.2787693738937378, "value_count": 726, "group_name": "transaction_date", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "sum_tokens_in_value_count_group": 726.0, "distinct_value_count": 151}, {"percentile_ex_nulls": 0.2708930969238281, "percentile_inc_nulls": 0.2708930969238281, "value_count": 714, "group_name": "transaction_date", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "sum_tokens_in_value_count_group": 714.0, "distinct_value_count": 151}, {"percentile_ex_nulls": 0.26316022872924805, "percentile_inc_nulls": 0.26316022872924805, "value_count": 701, "group_name": "transaction_date", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "sum_tokens_in_value_count_group": 701.0, "distinct_value_count": 151}, {"percentile_ex_nulls": 0.25547146797180176, "percentile_inc_nulls": 0.25547146797180176, "value_count": 697, "group_name": "transaction_date", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "sum_tokens_in_value_count_group": 697.0, "distinct_value_count": 151}, {"percentile_ex_nulls": 0.24785995483398438, "percentile_inc_nulls": 0.24785995483398438, "value_count": 690, "group_name": "transaction_date", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "sum_tokens_in_value_count_group": 690.0, "distinct_value_count": 151}, {"percentile_ex_nulls": 0.24048006534576416, "percentile_inc_nulls": 0.24048006534576416, "value_count": 669, "group_name": "transaction_date", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "sum_tokens_in_value_count_group": 669.0, "distinct_value_count": 151}, {"percentile_ex_nulls": 0.23322153091430664, "percentile_inc_nulls": 0.23322153091430664, "value_count": 658, "group_name": "transaction_date", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "sum_tokens_in_value_count_group": 658.0, "distinct_value_count": 151}, {"percentile_ex_nulls": 0.22604024410247803, "percentile_inc_nulls": 0.22604024410247803, "value_count": 651, "group_name": "transaction_date", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "sum_tokens_in_value_count_group": 651.0, "distinct_value_count": 151}, {"percentile_ex_nulls": 0.21891409158706665, "percentile_inc_nulls": 0.21891409158706665, "value_count": 646, "group_name": "transaction_date", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "sum_tokens_in_value_count_group": 646.0, "distinct_value_count": 151}, {"percentile_ex_nulls": 0.21187621355056763, "percentile_inc_nulls": 0.21187621355056763, "value_count": 638, "group_name": "transaction_date", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "sum_tokens_in_value_count_group": 638.0, "distinct_value_count": 151}, {"percentile_ex_nulls": 0.20532363653182983, "percentile_inc_nulls": 0.20532363653182983, "value_count": 594, "group_name": "transaction_date", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "sum_tokens_in_value_count_group": 594.0, "distinct_value_count": 151}, {"percentile_ex_nulls": 0.19880419969558716, "percentile_inc_nulls": 0.19880419969558716, "value_count": 591, "group_name": "transaction_date", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "sum_tokens_in_value_count_group": 591.0, "distinct_value_count": 151}, {"percentile_ex_nulls": 0.19238406419754028, "percentile_inc_nulls": 0.19238406419754028, "value_count": 582, "group_name": "transaction_date", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "sum_tokens_in_value_count_group": 582.0, "distinct_value_count": 151}, {"percentile_ex_nulls": 0.1859859824180603, "percentile_inc_nulls": 0.1859859824180603, "value_count": 580, "group_name": "transaction_date", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "sum_tokens_in_value_count_group": 580.0, "distinct_value_count": 151}, {"percentile_ex_nulls": 0.1797202229499817, "percentile_inc_nulls": 0.1797202229499817, "value_count": 568, "group_name": "transaction_date", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "sum_tokens_in_value_count_group": 568.0, "distinct_value_count": 151}, {"percentile_ex_nulls": 0.16734325885772705, "percentile_inc_nulls": 0.16734325885772705, "value_count": 561, "group_name": "transaction_date", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "sum_tokens_in_value_count_group": 1122.0, "distinct_value_count": 151}, {"percentile_ex_nulls": 0.1615297794342041, "percentile_inc_nulls": 0.1615297794342041, "value_count": 527, "group_name": "transaction_date", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "sum_tokens_in_value_count_group": 527.0, "distinct_value_count": 151}, {"percentile_ex_nulls": 0.15580463409423828, "percentile_inc_nulls": 0.15580463409423828, "value_count": 519, "group_name": "transaction_date", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "sum_tokens_in_value_count_group": 519.0, "distinct_value_count": 151}, {"percentile_ex_nulls": 0.15009045600891113, "percentile_inc_nulls": 0.15009045600891113, "value_count": 518, "group_name": "transaction_date", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "sum_tokens_in_value_count_group": 518.0, "distinct_value_count": 151}, {"percentile_ex_nulls": 0.14444249868392944, "percentile_inc_nulls": 0.14444249868392944, "value_count": 512, "group_name": "transaction_date", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "sum_tokens_in_value_count_group": 512.0, "distinct_value_count": 151}, {"percentile_ex_nulls": 0.1388276219367981, "percentile_inc_nulls": 0.1388276219367981, "value_count": 509, "group_name": "transaction_date", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "sum_tokens_in_value_count_group": 509.0, "distinct_value_count": 151}, {"percentile_ex_nulls": 0.13330096006393433, "percentile_inc_nulls": 0.13330096006393433, "value_count": 501, "group_name": "transaction_date", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "sum_tokens_in_value_count_group": 501.0, "distinct_value_count": 151}, {"percentile_ex_nulls": 0.12780743837356567, "percentile_inc_nulls": 0.12780743837356567, "value_count": 498, "group_name": "transaction_date", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "sum_tokens_in_value_count_group": 498.0, "distinct_value_count": 151}, {"percentile_ex_nulls": 0.12236905097961426, "percentile_inc_nulls": 0.12236905097961426, "value_count": 493, "group_name": "transaction_date", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "sum_tokens_in_value_count_group": 493.0, "distinct_value_count": 151}, {"percentile_ex_nulls": 0.11723953485488892, "percentile_inc_nulls": 0.11723953485488892, "value_count": 465, "group_name": "transaction_date", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "sum_tokens_in_value_count_group": 465.0, "distinct_value_count": 151}, {"percentile_ex_nulls": 0.1125292181968689, "percentile_inc_nulls": 0.1125292181968689, "value_count": 427, "group_name": "transaction_date", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "sum_tokens_in_value_count_group": 427.0, "distinct_value_count": 151}, {"percentile_ex_nulls": 0.10786300897598267, "percentile_inc_nulls": 0.10786300897598267, "value_count": 423, "group_name": "transaction_date", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "sum_tokens_in_value_count_group": 423.0, "distinct_value_count": 151}, {"percentile_ex_nulls": 0.1032189130783081, "percentile_inc_nulls": 0.1032189130783081, "value_count": 421, "group_name": "transaction_date", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "sum_tokens_in_value_count_group": 421.0, "distinct_value_count": 151}, {"percentile_ex_nulls": 0.09859681129455566, "percentile_inc_nulls": 0.09859681129455566, "value_count": 419, "group_name": "transaction_date", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "sum_tokens_in_value_count_group": 419.0, "distinct_value_count": 151}, {"percentile_ex_nulls": 0.09408509731292725, "percentile_inc_nulls": 0.09408509731292725, "value_count": 409, "group_name": "transaction_date", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "sum_tokens_in_value_count_group": 409.0, "distinct_value_count": 151}, {"percentile_ex_nulls": 0.08977186679840088, "percentile_inc_nulls": 0.08977186679840088, "value_count": 391, "group_name": "transaction_date", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "sum_tokens_in_value_count_group": 391.0, "distinct_value_count": 151}, {"percentile_ex_nulls": 0.08559107780456543, "percentile_inc_nulls": 0.08559107780456543, "value_count": 379, "group_name": "transaction_date", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "sum_tokens_in_value_count_group": 379.0, "distinct_value_count": 151}, {"percentile_ex_nulls": 0.08148741722106934, "percentile_inc_nulls": 0.08148741722106934, "value_count": 372, "group_name": "transaction_date", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "sum_tokens_in_value_count_group": 372.0, "distinct_value_count": 151}, {"percentile_ex_nulls": 0.07742798328399658, "percentile_inc_nulls": 0.07742798328399658, "value_count": 368, "group_name": "transaction_date", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "sum_tokens_in_value_count_group": 368.0, "distinct_value_count": 151}, {"percentile_ex_nulls": 0.07365530729293823, "percentile_inc_nulls": 0.07365530729293823, "value_count": 342, "group_name": "transaction_date", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "sum_tokens_in_value_count_group": 342.0, "distinct_value_count": 151}, {"percentile_ex_nulls": 0.06990468502044678, "percentile_inc_nulls": 0.06990468502044678, "value_count": 340, "group_name": "transaction_date", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "sum_tokens_in_value_count_group": 340.0, "distinct_value_count": 151}, {"percentile_ex_nulls": 0.06624233722686768, "percentile_inc_nulls": 0.06624233722686768, "value_count": 332, "group_name": "transaction_date", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "sum_tokens_in_value_count_group": 332.0, "distinct_value_count": 151}, {"percentile_ex_nulls": 0.06271237134933472, "percentile_inc_nulls": 0.06271237134933472, "value_count": 320, "group_name": "transaction_date", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "sum_tokens_in_value_count_group": 320.0, "distinct_value_count": 151}, {"percentile_ex_nulls": 0.05934780836105347, "percentile_inc_nulls": 0.05934780836105347, "value_count": 305, "group_name": "transaction_date", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "sum_tokens_in_value_count_group": 305.0, "distinct_value_count": 151}, {"percentile_ex_nulls": 0.056016385555267334, "percentile_inc_nulls": 0.056016385555267334, "value_count": 302, "group_name": "transaction_date", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "sum_tokens_in_value_count_group": 302.0, "distinct_value_count": 151}, {"percentile_ex_nulls": 0.049463868141174316, "percentile_inc_nulls": 0.049463868141174316, "value_count": 297, "group_name": "transaction_date", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "sum_tokens_in_value_count_group": 594.0, "distinct_value_count": 151}, {"percentile_ex_nulls": 0.046452343463897705, "percentile_inc_nulls": 0.046452343463897705, "value_count": 273, "group_name": "transaction_date", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "sum_tokens_in_value_count_group": 273.0, "distinct_value_count": 151}, {"percentile_ex_nulls": 0.04352909326553345, "percentile_inc_nulls": 0.04352909326553345, "value_count": 265, "group_name": "transaction_date", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "sum_tokens_in_value_count_group": 265.0, "distinct_value_count": 151}, {"percentile_ex_nulls": 0.04068303108215332, "percentile_inc_nulls": 0.04068303108215332, "value_count": 258, "group_name": "transaction_date", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "sum_tokens_in_value_count_group": 258.0, "distinct_value_count": 151}, {"percentile_ex_nulls": 0.03554248809814453, "percentile_inc_nulls": 0.03554248809814453, "value_count": 233, "group_name": "transaction_date", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "sum_tokens_in_value_count_group": 466.0, "distinct_value_count": 151}, {"percentile_ex_nulls": 0.03330320119857788, "percentile_inc_nulls": 0.03330320119857788, "value_count": 203, "group_name": "transaction_date", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "sum_tokens_in_value_count_group": 203.0, "distinct_value_count": 151}, {"percentile_ex_nulls": 0.031107962131500244, "percentile_inc_nulls": 0.031107962131500244, "value_count": 199, "group_name": "transaction_date", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "sum_tokens_in_value_count_group": 199.0, "distinct_value_count": 151}, {"percentile_ex_nulls": 0.028945863246917725, "percentile_inc_nulls": 0.028945863246917725, "value_count": 196, "group_name": "transaction_date", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "sum_tokens_in_value_count_group": 196.0, "distinct_value_count": 151}, {"percentile_ex_nulls": 0.023286879062652588, "percentile_inc_nulls": 0.023286879062652588, "value_count": 171, "group_name": "transaction_date", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "sum_tokens_in_value_count_group": 513.0, "distinct_value_count": 151}, {"percentile_ex_nulls": 0.9846776723861694, "percentile_inc_nulls": 0.9846776723861694, "value_count": 1389, "group_name": "transaction_date", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "sum_tokens_in_value_count_group": 1389.0, "distinct_value_count": 151}, {"percentile_ex_nulls": 0.9695428609848022, "percentile_inc_nulls": 0.9695428609848022, "value_count": 1372, "group_name": "transaction_date", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "sum_tokens_in_value_count_group": 1372.0, "distinct_value_count": 151}, {"percentile_ex_nulls": 0.9547831416130066, "percentile_inc_nulls": 0.9547831416130066, "value_count": 1338, "group_name": "transaction_date", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "sum_tokens_in_value_count_group": 1338.0, "distinct_value_count": 151}, {"percentile_ex_nulls": 0.9402440190315247, "percentile_inc_nulls": 0.9402440190315247, "value_count": 1318, "group_name": "transaction_date", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "sum_tokens_in_value_count_group": 1318.0, "distinct_value_count": 151}, {"percentile_ex_nulls": 0.9257820844650269, "percentile_inc_nulls": 0.9257820844650269, "value_count": 1311, "group_name": "transaction_date", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "sum_tokens_in_value_count_group": 1311.0, "distinct_value_count": 151}, {"percentile_ex_nulls": 0.9114856719970703, "percentile_inc_nulls": 0.9114856719970703, "value_count": 1296, "group_name": "transaction_date", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "sum_tokens_in_value_count_group": 1296.0, "distinct_value_count": 151}, {"percentile_ex_nulls": 0.8972113132476807, "percentile_inc_nulls": 0.8972113132476807, "value_count": 1294, "group_name": "transaction_date", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "sum_tokens_in_value_count_group": 1294.0, "distinct_value_count": 151}, {"percentile_ex_nulls": 0.8829590082168579, "percentile_inc_nulls": 0.8829590082168579, "value_count": 1292, "group_name": "transaction_date", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "sum_tokens_in_value_count_group": 1292.0, "distinct_value_count": 151}, {"percentile_ex_nulls": 0.8690376281738281, "percentile_inc_nulls": 0.8690376281738281, "value_count": 1262, "group_name": "transaction_date", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "sum_tokens_in_value_count_group": 1262.0, "distinct_value_count": 151}, {"percentile_ex_nulls": 0.8551493883132935, "percentile_inc_nulls": 0.8551493883132935, "value_count": 1259, "group_name": "transaction_date", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "sum_tokens_in_value_count_group": 1259.0, "distinct_value_count": 151}, {"percentile_ex_nulls": 0.8413382768630981, "percentile_inc_nulls": 0.8413382768630981, "value_count": 1252, "group_name": "transaction_date", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "sum_tokens_in_value_count_group": 1252.0, "distinct_value_count": 151}, {"percentile_ex_nulls": 0.827560305595398, "percentile_inc_nulls": 0.827560305595398, "value_count": 1249, "group_name": "transaction_date", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "sum_tokens_in_value_count_group": 1249.0, "distinct_value_count": 151}, {"percentile_ex_nulls": 0.8138927221298218, "percentile_inc_nulls": 0.8138927221298218, "value_count": 1239, "group_name": "transaction_date", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "sum_tokens_in_value_count_group": 1239.0, "distinct_value_count": 151}, {"percentile_ex_nulls": 0.8002581596374512, "percentile_inc_nulls": 0.8002581596374512, "value_count": 1236, "group_name": "transaction_date", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "sum_tokens_in_value_count_group": 1236.0, "distinct_value_count": 151}, {"percentile_ex_nulls": 0.786733865737915, "percentile_inc_nulls": 0.786733865737915, "value_count": 1226, "group_name": "transaction_date", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "sum_tokens_in_value_count_group": 1226.0, "distinct_value_count": 151}, {"percentile_ex_nulls": 0.7732758522033691, "percentile_inc_nulls": 0.7732758522033691, "value_count": 1220, "group_name": "transaction_date", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "sum_tokens_in_value_count_group": 1220.0, "distinct_value_count": 151}, {"percentile_ex_nulls": 0.7598508596420288, "percentile_inc_nulls": 0.7598508596420288, "value_count": 1217, "group_name": "transaction_date", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "sum_tokens_in_value_count_group": 1217.0, "distinct_value_count": 151}, {"percentile_ex_nulls": 0.7468119859695435, "percentile_inc_nulls": 0.7468119859695435, "value_count": 1182, "group_name": "transaction_date", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "sum_tokens_in_value_count_group": 1182.0, "distinct_value_count": 151}, {"percentile_ex_nulls": 0.7338833808898926, "percentile_inc_nulls": 0.7338833808898926, "value_count": 1172, "group_name": "transaction_date", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "sum_tokens_in_value_count_group": 1172.0, "distinct_value_count": 151}, {"percentile_ex_nulls": 0.7209658622741699, "percentile_inc_nulls": 0.7209658622741699, "value_count": 1171, "group_name": "transaction_date", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "sum_tokens_in_value_count_group": 1171.0, "distinct_value_count": 151}, {"percentile_ex_nulls": 0.7081476449966431, "percentile_inc_nulls": 0.7081476449966431, "value_count": 1162, "group_name": "transaction_date", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "sum_tokens_in_value_count_group": 1162.0, "distinct_value_count": 151}, {"percentile_ex_nulls": 0.682908296585083, "percentile_inc_nulls": 0.682908296585083, "value_count": 1144, "group_name": "transaction_date", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "sum_tokens_in_value_count_group": 2288.0, "distinct_value_count": 151}, {"percentile_ex_nulls": 0.6703988909721375, "percentile_inc_nulls": 0.6703988909721375, "value_count": 1134, "group_name": "transaction_date", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "sum_tokens_in_value_count_group": 1134.0, "distinct_value_count": 151}, {"percentile_ex_nulls": 0.6579005718231201, "percentile_inc_nulls": 0.6579005718231201, "value_count": 1133, "group_name": "transaction_date", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "sum_tokens_in_value_count_group": 1133.0, "distinct_value_count": 151}, {"percentile_ex_nulls": 0.645556628704071, "percentile_inc_nulls": 0.645556628704071, "value_count": 1119, "group_name": "transaction_date", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "sum_tokens_in_value_count_group": 1119.0, "distinct_value_count": 151}, {"percentile_ex_nulls": 0.6336208581924438, "percentile_inc_nulls": 0.6336208581924438, "value_count": 1082, "group_name": "transaction_date", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "sum_tokens_in_value_count_group": 1082.0, "distinct_value_count": 151}, {"percentile_ex_nulls": 0.6218065023422241, "percentile_inc_nulls": 0.6218065023422241, "value_count": 1071, "group_name": "transaction_date", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "sum_tokens_in_value_count_group": 1071.0, "distinct_value_count": 151}, {"percentile_ex_nulls": 0.6105877161026001, "percentile_inc_nulls": 0.6105877161026001, "value_count": 1017, "group_name": "transaction_date", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "sum_tokens_in_value_count_group": 1017.0, "distinct_value_count": 151}, {"percentile_ex_nulls": 0.5994572639465332, "percentile_inc_nulls": 0.5994572639465332, "value_count": 1009, "group_name": "transaction_date", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "sum_tokens_in_value_count_group": 1009.0, "distinct_value_count": 151}, {"percentile_ex_nulls": 0.588392972946167, "percentile_inc_nulls": 0.588392972946167, "value_count": 1003, "group_name": "transaction_date", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "sum_tokens_in_value_count_group": 1003.0, "distinct_value_count": 151}, {"percentile_ex_nulls": 0.5773618221282959, "percentile_inc_nulls": 0.5773618221282959, "value_count": 1000, "group_name": "transaction_date", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "sum_tokens_in_value_count_group": 1000.0, "distinct_value_count": 151}, {"percentile_ex_nulls": 0.5663416385650635, "percentile_inc_nulls": 0.5663416385650635, "value_count": 999, "group_name": "transaction_date", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "sum_tokens_in_value_count_group": 999.0, "distinct_value_count": 151}, {"percentile_ex_nulls": 0.5445660352706909, "percentile_inc_nulls": 0.5445660352706909, "value_count": 987, "group_name": "transaction_date", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "sum_tokens_in_value_count_group": 1974.0, "distinct_value_count": 151}, {"percentile_ex_nulls": 0.5337003469467163, "percentile_inc_nulls": 0.5337003469467163, "value_count": 985, "group_name": "transaction_date", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "sum_tokens_in_value_count_group": 985.0, "distinct_value_count": 151}, {"percentile_ex_nulls": 0.5228787064552307, "percentile_inc_nulls": 0.5228787064552307, "value_count": 981, "group_name": "transaction_date", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "sum_tokens_in_value_count_group": 981.0, "distinct_value_count": 151}, {"percentile_ex_nulls": 0.5120902061462402, "percentile_inc_nulls": 0.5120902061462402, "value_count": 978, "group_name": "transaction_date", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "sum_tokens_in_value_count_group": 978.0, "distinct_value_count": 151}, {"percentile_ex_nulls": 0.5013458132743835, "percentile_inc_nulls": 0.5013458132743835, "value_count": 974, "group_name": "transaction_date", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "sum_tokens_in_value_count_group": 974.0, "distinct_value_count": 151}, {"percentile_ex_nulls": 0.4907558560371399, "percentile_inc_nulls": 0.4907558560371399, "value_count": 960, "group_name": "transaction_date", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "sum_tokens_in_value_count_group": 960.0, "distinct_value_count": 151}, {"percentile_ex_nulls": 0.4801769256591797, "percentile_inc_nulls": 0.4801769256591797, "value_count": 959, "group_name": "transaction_date", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "sum_tokens_in_value_count_group": 959.0, "distinct_value_count": 151}, {"percentile_ex_nulls": 0.46990692615509033, "percentile_inc_nulls": 0.46990692615509033, "value_count": 931, "group_name": "transaction_date", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "sum_tokens_in_value_count_group": 931.0, "distinct_value_count": 151}, {"percentile_ex_nulls": 0.45968097448349, "percentile_inc_nulls": 0.45968097448349, "value_count": 927, "group_name": "transaction_date", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "sum_tokens_in_value_count_group": 927.0, "distinct_value_count": 151}, {"percentile_ex_nulls": 0.44946610927581787, "percentile_inc_nulls": 0.44946610927581787, "value_count": 926, "group_name": "transaction_date", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "sum_tokens_in_value_count_group": 926.0, "distinct_value_count": 151}, {"percentile_ex_nulls": 0.43939459323883057, "percentile_inc_nulls": 0.43939459323883057, "value_count": 913, "group_name": "transaction_date", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "sum_tokens_in_value_count_group": 913.0, "distinct_value_count": 151}, {"percentile_ex_nulls": 0.4294665455818176, "percentile_inc_nulls": 0.4294665455818176, "value_count": 900, "group_name": "transaction_date", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "sum_tokens_in_value_count_group": 900.0, "distinct_value_count": 151}, {"percentile_ex_nulls": 0.41957151889801025, "percentile_inc_nulls": 0.41957151889801025, "value_count": 897, "group_name": "transaction_date", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "sum_tokens_in_value_count_group": 897.0, "distinct_value_count": 151}, {"percentile_ex_nulls": 0.40973174571990967, "percentile_inc_nulls": 0.40973174571990967, "value_count": 892, "group_name": "transaction_date", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "sum_tokens_in_value_count_group": 892.0, "distinct_value_count": 151}, {"percentile_ex_nulls": 0.4000021815299988, "percentile_inc_nulls": 0.4000021815299988, "value_count": 882, "group_name": "transaction_date", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "sum_tokens_in_value_count_group": 882.0, "distinct_value_count": 151}, {"percentile_ex_nulls": 0.3903830051422119, "percentile_inc_nulls": 0.3903830051422119, "value_count": 872, "group_name": "transaction_date", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "sum_tokens_in_value_count_group": 872.0, "distinct_value_count": 151}, {"percentile_ex_nulls": 0.38102853298187256, "percentile_inc_nulls": 0.38102853298187256, "value_count": 848, "group_name": "transaction_date", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "sum_tokens_in_value_count_group": 848.0, "distinct_value_count": 151}, {"percentile_ex_nulls": 0.37176233530044556, "percentile_inc_nulls": 0.37176233530044556, "value_count": 840, "group_name": "transaction_date", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "sum_tokens_in_value_count_group": 840.0, "distinct_value_count": 151}, {"percentile_ex_nulls": 0.36263954639434814, "percentile_inc_nulls": 0.36263954639434814, "value_count": 827, "group_name": "transaction_date", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "sum_tokens_in_value_count_group": 827.0, "distinct_value_count": 151}, {"percentile_ex_nulls": 0.3537042737007141, "percentile_inc_nulls": 0.3537042737007141, "value_count": 810, "group_name": "transaction_date", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "sum_tokens_in_value_count_group": 810.0, "distinct_value_count": 151}, {"percentile_ex_nulls": 0.34483522176742554, "percentile_inc_nulls": 0.34483522176742554, "value_count": 804, "group_name": "transaction_date", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "sum_tokens_in_value_count_group": 804.0, "distinct_value_count": 151}, {"percentile_ex_nulls": 0.3275824189186096, "percentile_inc_nulls": 0.3275824189186096, "value_count": 782, "group_name": "transaction_date", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "sum_tokens_in_value_count_group": 1564.0, "distinct_value_count": 151}, {"percentile_ex_nulls": 0.021466732025146484, "percentile_inc_nulls": 0.021466732025146484, "value_count": 165, "group_name": "transaction_date", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "sum_tokens_in_value_count_group": 165.0, "distinct_value_count": 151}, {"percentile_ex_nulls": 0.01811319589614868, "percentile_inc_nulls": 0.01811319589614868, "value_count": 152, "group_name": "transaction_date", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "sum_tokens_in_value_count_group": 304.0, "distinct_value_count": 151}, {"percentile_ex_nulls": 0.016590893268585205, "percentile_inc_nulls": 0.016590893268585205, "value_count": 138, "group_name": "transaction_date", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "sum_tokens_in_value_count_group": 138.0, "distinct_value_count": 151}, {"percentile_ex_nulls": 0.015322327613830566, "percentile_inc_nulls": 0.015322327613830566, "value_count": 115, "group_name": "transaction_date", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "sum_tokens_in_value_count_group": 115.0, "distinct_value_count": 151}, {"percentile_ex_nulls": 0.014064788818359375, "percentile_inc_nulls": 0.014064788818359375, "value_count": 114, "group_name": "transaction_date", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "sum_tokens_in_value_count_group": 114.0, "distinct_value_count": 151}, {"percentile_ex_nulls": 0.012851357460021973, "percentile_inc_nulls": 0.012851357460021973, "value_count": 110, "group_name": "transaction_date", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "sum_tokens_in_value_count_group": 110.0, "distinct_value_count": 151}, {"percentile_ex_nulls": 0.011671006679534912, "percentile_inc_nulls": 0.011671006679534912, "value_count": 107, "group_name": "transaction_date", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "sum_tokens_in_value_count_group": 107.0, "distinct_value_count": 151}, {"percentile_ex_nulls": 0.0106009840965271, "percentile_inc_nulls": 0.0106009840965271, "value_count": 97, "group_name": "transaction_date", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "sum_tokens_in_value_count_group": 97.0, "distinct_value_count": 151}, {"percentile_ex_nulls": 0.009553015232086182, "percentile_inc_nulls": 0.009553015232086182, "value_count": 95, "group_name": "transaction_date", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "sum_tokens_in_value_count_group": 95.0, "distinct_value_count": 151}, {"percentile_ex_nulls": 0.008615374565124512, "percentile_inc_nulls": 0.008615374565124512, "value_count": 85, "group_name": "transaction_date", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "sum_tokens_in_value_count_group": 85.0, "distinct_value_count": 151}, {"percentile_ex_nulls": 0.007743895053863525, "percentile_inc_nulls": 0.007743895053863525, "value_count": 79, "group_name": "transaction_date", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "sum_tokens_in_value_count_group": 79.0, "distinct_value_count": 151}, {"percentile_ex_nulls": 0.0069165825843811035, "percentile_inc_nulls": 0.0069165825843811035, "value_count": 75, "group_name": "transaction_date", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "sum_tokens_in_value_count_group": 75.0, "distinct_value_count": 151}, {"percentile_ex_nulls": 0.006243646144866943, "percentile_inc_nulls": 0.006243646144866943, "value_count": 61, "group_name": "transaction_date", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "sum_tokens_in_value_count_group": 61.0, "distinct_value_count": 151}, {"percentile_ex_nulls": 0.0056038498878479, "percentile_inc_nulls": 0.0056038498878479, "value_count": 58, "group_name": "transaction_date", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "sum_tokens_in_value_count_group": 58.0, "distinct_value_count": 151}, {"percentile_ex_nulls": 0.004986107349395752, "percentile_inc_nulls": 0.004986107349395752, "value_count": 56, "group_name": "transaction_date", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "sum_tokens_in_value_count_group": 56.0, "distinct_value_count": 151}, {"percentile_ex_nulls": 0.004467606544494629, "percentile_inc_nulls": 0.004467606544494629, "value_count": 47, "group_name": "transaction_date", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "sum_tokens_in_value_count_group": 47.0, "distinct_value_count": 151}, {"percentile_ex_nulls": 0.0039601922035217285, "percentile_inc_nulls": 0.0039601922035217285, "value_count": 46, "group_name": "transaction_date", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "sum_tokens_in_value_count_group": 46.0, "distinct_value_count": 151}, {"percentile_ex_nulls": 0.003529965877532959, "percentile_inc_nulls": 0.003529965877532959, "value_count": 39, "group_name": "transaction_date", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "sum_tokens_in_value_count_group": 39.0, "distinct_value_count": 151}, {"percentile_ex_nulls": 0.0031218528747558594, "percentile_inc_nulls": 0.0031218528747558594, "value_count": 37, "group_name": "transaction_date", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "sum_tokens_in_value_count_group": 37.0, "distinct_value_count": 151}, {"percentile_ex_nulls": 0.0027247071266174316, "percentile_inc_nulls": 0.0027247071266174316, "value_count": 36, "group_name": "transaction_date", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "sum_tokens_in_value_count_group": 36.0, "distinct_value_count": 151}, {"percentile_ex_nulls": 0.0023496150970458984, "percentile_inc_nulls": 0.0023496150970458984, "value_count": 34, "group_name": "transaction_date", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "sum_tokens_in_value_count_group": 34.0, "distinct_value_count": 151}, {"percentile_ex_nulls": 0.001985609531402588, "percentile_inc_nulls": 0.001985609531402588, "value_count": 33, "group_name": "transaction_date", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "sum_tokens_in_value_count_group": 33.0, "distinct_value_count": 151}, {"percentile_ex_nulls": 0.0016767382621765137, "percentile_inc_nulls": 0.0016767382621765137, "value_count": 28, "group_name": "transaction_date", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "sum_tokens_in_value_count_group": 28.0, "distinct_value_count": 151}, {"percentile_ex_nulls": 0.0013788938522338867, "percentile_inc_nulls": 0.0013788938522338867, "value_count": 27, "group_name": "transaction_date", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "sum_tokens_in_value_count_group": 27.0, "distinct_value_count": 151}, {"percentile_ex_nulls": 0.0011031031608581543, "percentile_inc_nulls": 0.0011031031608581543, "value_count": 25, "group_name": "transaction_date", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "sum_tokens_in_value_count_group": 25.0, "distinct_value_count": 151}, {"percentile_ex_nulls": 0.0009045600891113281, "percentile_inc_nulls": 0.0009045600891113281, "value_count": 18, "group_name": "transaction_date", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "sum_tokens_in_value_count_group": 18.0, "distinct_value_count": 151}, {"percentile_ex_nulls": 0.0005515813827514648, "percentile_inc_nulls": 0.0005515813827514648, "value_count": 16, "group_name": "transaction_date", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "sum_tokens_in_value_count_group": 32.0, "distinct_value_count": 151}, {"percentile_ex_nulls": 0.00038611888885498047, "percentile_inc_nulls": 0.00038611888885498047, "value_count": 15, "group_name": "transaction_date", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "sum_tokens_in_value_count_group": 15.0, "distinct_value_count": 151}, {"percentile_ex_nulls": 0.00024271011352539062, "percentile_inc_nulls": 0.00024271011352539062, "value_count": 13, "group_name": "transaction_date", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "sum_tokens_in_value_count_group": 13.0, "distinct_value_count": 151}, {"percentile_ex_nulls": 0.00011032819747924805, "percentile_inc_nulls": 0.00011032819747924805, "value_count": 12, "group_name": "transaction_date", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "sum_tokens_in_value_count_group": 12.0, "distinct_value_count": 151}, {"percentile_ex_nulls": 5.513429641723633e-05, "percentile_inc_nulls": 5.513429641723633e-05, "value_count": 5, "group_name": "transaction_date", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "sum_tokens_in_value_count_group": 5.0, "distinct_value_count": 151}, {"percentile_ex_nulls": 2.205371856689453e-05, "percentile_inc_nulls": 2.205371856689453e-05, "value_count": 3, "group_name": "transaction_date", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "sum_tokens_in_value_count_group": 3.0, "distinct_value_count": 151}, {"percentile_ex_nulls": 0.0, "percentile_inc_nulls": 0.0, "value_count": 2, "group_name": "transaction_date", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "sum_tokens_in_value_count_group": 2.0, "distinct_value_count": 151}, {"percentile_ex_nulls": 1.0, "percentile_inc_nulls": 1.0, "value_count": 758, "group_name": "transaction_date", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "sum_tokens_in_value_count_group": 758.0, "distinct_value_count": 151}]}, "encoding": {"tooltip": [{"field": "value_count", "type": "quantitative"}, {"field": "percentile_ex_nulls", "type": "quantitative"}, {"field": "percentile_inc_nulls", "type": "quantitative"}, {"field": "total_non_null_rows", "type": "quantitative"}, {"field": "total_rows_inc_nulls", "type": "quantitative"}], "x": {"field": "percentile_ex_nulls", "sort": "descending", "title": "Percentile", "type": "quantitative"}, "y": {"field": "value_count", "title": "Count of values", "type": "quantitative"}}, "title": {"text": "Distribution of counts of values in column transaction_date", "subtitle": "In this col, 0 values (0.0%) are null and there are 151 distinct values"}}, {"mark": "bar", "data": {"values": [{"value_count": 1389, "group_name": "transaction_date", "value": "2022-05-07", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "distinct_value_count": 151}, {"value_count": 1372, "group_name": "transaction_date", "value": "2022-05-09", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "distinct_value_count": 151}, {"value_count": 1338, "group_name": "transaction_date", "value": "2022-05-10", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "distinct_value_count": 151}, {"value_count": 1318, "group_name": "transaction_date", "value": "2022-05-04", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "distinct_value_count": 151}, {"value_count": 1311, "group_name": "transaction_date", "value": "2022-05-05", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "distinct_value_count": 151}, {"value_count": 1296, "group_name": "transaction_date", "value": "2022-05-06", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "distinct_value_count": 151}, {"value_count": 1294, "group_name": "transaction_date", "value": "2022-05-08", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "distinct_value_count": 151}, {"value_count": 1292, "group_name": "transaction_date", "value": "2022-05-01", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "distinct_value_count": 151}, {"value_count": 1262, "group_name": "transaction_date", "value": "2022-05-03", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "distinct_value_count": 151}, {"value_count": 1259, "group_name": "transaction_date", "value": "2022-04-30", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "distinct_value_count": 151}]}, "encoding": {"tooltip": [{"field": "value", "type": "nominal"}, {"field": "value_count", "type": "quantitative"}, {"field": "total_non_null_rows", "type": "quantitative"}, {"field": "total_rows_inc_nulls", "type": "quantitative"}], "x": {"field": "value", "sort": "-y", "title": null, "type": "nominal"}, "y": {"field": "value_count", "title": "Value count", "type": "quantitative"}}, "title": "Top 10 values by value count"}, {"mark": "bar", "data": {"values": [{"value_count": 2, "group_name": "transaction_date", "value": "2022-01-01", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "distinct_value_count": 151}, {"value_count": 3, "group_name": "transaction_date", "value": "2022-05-30", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "distinct_value_count": 151}, {"value_count": 5, "group_name": "transaction_date", "value": "2022-05-31", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "distinct_value_count": 151}, {"value_count": 12, "group_name": "transaction_date", "value": "2022-05-29", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "distinct_value_count": 151}, {"value_count": 13, "group_name": "transaction_date", "value": "2022-01-02", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "distinct_value_count": 151}, {"value_count": 15, "group_name": "transaction_date", "value": "2022-05-28", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "distinct_value_count": 151}, {"value_count": 16, "group_name": "transaction_date", "value": "2022-05-27", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "distinct_value_count": 151}, {"value_count": 16, "group_name": "transaction_date", "value": "2022-05-26", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "distinct_value_count": 151}, {"value_count": 18, "group_name": "transaction_date", "value": "2022-01-03", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "distinct_value_count": 151}, {"value_count": 25, "group_name": "transaction_date", "value": "2022-05-25", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "distinct_value_count": 151}]}, "encoding": {"tooltip": [{"field": "value", "type": "nominal"}, {"field": "value_count", "type": "quantitative"}, {"field": "total_non_null_rows", "type": "quantitative"}, {"field": "total_rows_inc_nulls", "type": "quantitative"}], "x": {"field": "value", "sort": "-y", "title": null, "type": "nominal"}, "y": {"field": "value_count", "scale": {"domain": [0, 1389]}, "title": "Value count", "type": "quantitative"}}, "title": "Bottom 10 values by value count"}]}, {"hconcat": [{"mark": {"type": "line", "interpolate": "step-after"}, "data": {"values": [{"percentile_ex_nulls": 0.999845564365387, "percentile_inc_nulls": 0.999845564365387, "value_count": 14, "group_name": "amount", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "sum_tokens_in_value_count_group": 14.0, "distinct_value_count": 55935}, {"percentile_ex_nulls": 0.9989961385726929, "percentile_inc_nulls": 0.9989961385726929, "value_count": 11, "group_name": "amount", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "sum_tokens_in_value_count_group": 77.0, "distinct_value_count": 55935}, {"percentile_ex_nulls": 0.997672438621521, "percentile_inc_nulls": 0.997672438621521, "value_count": 10, "group_name": "amount", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "sum_tokens_in_value_count_group": 120.0, "distinct_value_count": 55935}, {"percentile_ex_nulls": 0.99360191822052, "percentile_inc_nulls": 0.99360191822052, "value_count": 9, "group_name": "amount", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "sum_tokens_in_value_count_group": 369.0, "distinct_value_count": 55935}, {"percentile_ex_nulls": 0.9860124588012695, "percentile_inc_nulls": 0.9860124588012695, "value_count": 8, "group_name": "amount", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "sum_tokens_in_value_count_group": 688.0, "distinct_value_count": 55935}, {"percentile_ex_nulls": 0.9686383008956909, "percentile_inc_nulls": 0.9686383008956909, "value_count": 7, "group_name": "amount", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "sum_tokens_in_value_count_group": 1575.0, "distinct_value_count": 55935}, {"percentile_ex_nulls": 0.9321691989898682, "percentile_inc_nulls": 0.9321691989898682, "value_count": 6, "group_name": "amount", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "sum_tokens_in_value_count_group": 3306.0, "distinct_value_count": 55935}, {"percentile_ex_nulls": 0.8737589716911316, "percentile_inc_nulls": 0.8737589716911316, "value_count": 5, "group_name": "amount", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "sum_tokens_in_value_count_group": 5295.0, "distinct_value_count": 55935}, {"percentile_ex_nulls": 0.7760226130485535, "percentile_inc_nulls": 0.7760226130485535, "value_count": 4, "group_name": "amount", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "sum_tokens_in_value_count_group": 8860.0, "distinct_value_count": 55935}, {"percentile_ex_nulls": 0.634679913520813, "percentile_inc_nulls": 0.634679913520813, "value_count": 3, "group_name": "amount", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "sum_tokens_in_value_count_group": 12813.0, "distinct_value_count": 55935}, {"percentile_ex_nulls": 0.4125556945800781, "percentile_inc_nulls": 0.4125556945800781, "value_count": 2, "group_name": "amount", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "sum_tokens_in_value_count_group": 20136.0, "distinct_value_count": 55935}, {"percentile_ex_nulls": 0.0, "percentile_inc_nulls": 0.0, "value_count": 1, "group_name": "amount", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "sum_tokens_in_value_count_group": 37399.0, "distinct_value_count": 55935}, {"percentile_ex_nulls": 1.0, "percentile_inc_nulls": 1.0, "value_count": 14, "group_name": "amount", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "sum_tokens_in_value_count_group": 14.0, "distinct_value_count": 55935}]}, "encoding": {"tooltip": [{"field": "value_count", "type": "quantitative"}, {"field": "percentile_ex_nulls", "type": "quantitative"}, {"field": "percentile_inc_nulls", "type": "quantitative"}, {"field": "total_non_null_rows", "type": "quantitative"}, {"field": "total_rows_inc_nulls", "type": "quantitative"}], "x": {"field": "percentile_ex_nulls", "sort": "descending", "title": "Percentile", "type": "quantitative"}, "y": {"field": "value_count", "title": "Count of values", "type": "quantitative"}}, "title": {"text": "Distribution of counts of values in column amount", "subtitle": "In this col, 0 values (0.0%) are null and there are 55935 distinct values"}}, {"mark": "bar", "data": {"values": [{"value_count": 14, "group_name": "amount", "value": "80.68", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "distinct_value_count": 55935}, {"value_count": 11, "group_name": "amount", "value": "72.91", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "distinct_value_count": 55935}, {"value_count": 11, "group_name": "amount", "value": "116.14", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "distinct_value_count": 55935}, {"value_count": 11, "group_name": "amount", "value": "36.3", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "distinct_value_count": 55935}, {"value_count": 11, "group_name": "amount", "value": "88.72", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "distinct_value_count": 55935}, {"value_count": 11, "group_name": "amount", "value": "48.92", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "distinct_value_count": 55935}, {"value_count": 11, "group_name": "amount", "value": "74.87", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "distinct_value_count": 55935}, {"value_count": 11, "group_name": "amount", "value": "52.15", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "distinct_value_count": 55935}, {"value_count": 10, "group_name": "amount", "value": "157.45", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "distinct_value_count": 55935}, {"value_count": 10, "group_name": "amount", "value": "99.35", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "distinct_value_count": 55935}]}, "encoding": {"tooltip": [{"field": "value", "type": "nominal"}, {"field": "value_count", "type": "quantitative"}, {"field": "total_non_null_rows", "type": "quantitative"}, {"field": "total_rows_inc_nulls", "type": "quantitative"}], "x": {"field": "value", "sort": "-y", "title": null, "type": "nominal"}, "y": {"field": "value_count", "title": "Value count", "type": "quantitative"}}, "title": "Top 10 values by value count"}, {"mark": "bar", "data": {"values": [{"value_count": 1, "group_name": "amount", "value": "26245.91", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "distinct_value_count": 55935}, {"value_count": 1, "group_name": "amount", "value": "5961.04", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "distinct_value_count": 55935}, {"value_count": 1, "group_name": "amount", "value": "1177.03", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "distinct_value_count": 55935}, {"value_count": 1, "group_name": "amount", "value": "44053.98", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "distinct_value_count": 55935}, {"value_count": 1, "group_name": "amount", "value": "391.19", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "distinct_value_count": 55935}, {"value_count": 1, "group_name": "amount", "value": "55769.58", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "distinct_value_count": 55935}, {"value_count": 1, "group_name": "amount", "value": "10742.96", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "distinct_value_count": 55935}, {"value_count": 1, "group_name": "amount", "value": "16517.33", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "distinct_value_count": 55935}, {"value_count": 1, "group_name": "amount", "value": "11646.21", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "distinct_value_count": 55935}, {"value_count": 1, "group_name": "amount", "value": "16.78", "total_non_null_rows": 90652, "total_rows_inc_nulls": 90652, "distinct_value_count": 55935}]}, "encoding": {"tooltip": [{"field": "value", "type": "nominal"}, {"field": "value_count", "type": "quantitative"}, {"field": "total_non_null_rows", "type": "quantitative"}, {"field": "total_rows_inc_nulls", "type": "quantitative"}], "x": {"field": "value", "sort": "-y", "title": null, "type": "nominal"}, "y": {"field": "value_count", "scale": {"domain": [0, 14]}, "title": "Value count", "type": "quantitative"}}, "title": "Bottom 10 values by value count"}]}], "$schema": "https://vega.github.io/schema/vega-lite/v5.9.3.json"}, {"mode": "vega-lite"});
</script>

<div class="highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">splink</span><span class="w"> </span><span class="kn">import</span> <span class="n">DuckDBAPI</span><span class="p">,</span> <span class="n">block_on</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">splink.blocking_analysis</span><span class="w"> </span><span class="kn">import</span> <span class="p">(</span>
    <span class="n">cumulative_comparisons_to_be_scored_from_blocking_rules_chart</span><span class="p">,</span>
<span class="p">)</span>

<span class="c1"># Design blocking rules that allow for differences in transaction date and amounts</span>
<span class="n">blocking_rule_date_1</span> <span class="o">=</span> <span class="s2">"""</span>
<span class="s2">    strftime(l.transaction_date, '%Y%m') = strftime(r.transaction_date, '%Y%m')</span>
<span class="s2">    and substr(l.memo, 1,3) = substr(r.memo,1,3)</span>
<span class="s2">    and l.amount/r.amount &gt; 0.7   and l.amount/r.amount &lt; 1.3</span>
<span class="s2">"""</span>

<span class="c1"># Offset by half a month to ensure we capture case when the dates are e.g. 31st Jan and 1st Feb</span>
<span class="n">blocking_rule_date_2</span> <span class="o">=</span> <span class="s2">"""</span>
<span class="s2">    strftime(l.transaction_date+15, '%Y%m') = strftime(r.transaction_date, '%Y%m')</span>
<span class="s2">    and substr(l.memo, 1,3) = substr(r.memo,1,3)</span>
<span class="s2">    and l.amount/r.amount &gt; 0.7   and l.amount/r.amount &lt; 1.3</span>
<span class="s2">"""</span>

<span class="n">blocking_rule_memo</span> <span class="o">=</span> <span class="n">block_on</span><span class="p">(</span><span class="s2">"substr(memo,1,9)"</span><span class="p">)</span>

<span class="n">blocking_rule_amount_1</span> <span class="o">=</span> <span class="s2">"""</span>
<span class="s2">round(l.amount/2,0)*2 = round(r.amount/2,0)*2 and yearweek(r.transaction_date) = yearweek(l.transaction_date)</span>
<span class="s2">"""</span>

<span class="n">blocking_rule_amount_2</span> <span class="o">=</span> <span class="s2">"""</span>
<span class="s2">round(l.amount/2,0)*2 = round((r.amount+1)/2,0)*2 and yearweek(r.transaction_date) = yearweek(l.transaction_date + 4)</span>
<span class="s2">"""</span>

<span class="n">blocking_rule_cheat</span> <span class="o">=</span> <span class="n">block_on</span><span class="p">(</span><span class="s2">"unique_id"</span><span class="p">)</span>


<span class="n">brs</span> <span class="o">=</span> <span class="p">[</span>
    <span class="n">blocking_rule_date_1</span><span class="p">,</span>
    <span class="n">blocking_rule_date_2</span><span class="p">,</span>
    <span class="n">blocking_rule_memo</span><span class="p">,</span>
    <span class="n">blocking_rule_amount_1</span><span class="p">,</span>
    <span class="n">blocking_rule_amount_2</span><span class="p">,</span>
    <span class="n">blocking_rule_cheat</span><span class="p">,</span>
<span class="p">]</span>


<span class="n">db_api</span> <span class="o">=</span> <span class="n">DuckDBAPI</span><span class="p">()</span>

<span class="n">cumulative_comparisons_to_be_scored_from_blocking_rules_chart</span><span class="p">(</span>
    <span class="n">table_or_tables</span><span class="o">=</span><span class="p">[</span><span class="n">df_origin</span><span class="p">,</span> <span class="n">df_destination</span><span class="p">],</span>
    <span class="n">blocking_rules</span><span class="o">=</span><span class="n">brs</span><span class="p">,</span>
    <span class="n">db_api</span><span class="o">=</span><span class="n">db_api</span><span class="p">,</span>
    <span class="n">link_type</span><span class="o">=</span><span class="s2">"link_only"</span>
<span class="p">)</span>
</code></pre></div>
<style>
  #altair-viz-5492083b18d2426286f96c164d89c09c.vega-embed {
    width: 100%;
    display: flex;
  }

  #altair-viz-5492083b18d2426286f96c164d89c09c.vega-embed details,
  #altair-viz-5492083b18d2426286f96c164d89c09c.vega-embed details summary {
    position: relative;
  }
</style>
<div id="altair-viz-5492083b18d2426286f96c164d89c09c"></div>
<script type="text/javascript">
  var VEGA_DEBUG = (typeof VEGA_DEBUG == "undefined") ? {} : VEGA_DEBUG;
  (function(spec, embedOpt){
    let outputDiv = document.currentScript.previousElementSibling;
    if (outputDiv.id !== "altair-viz-5492083b18d2426286f96c164d89c09c") {
      outputDiv = document.getElementById("altair-viz-5492083b18d2426286f96c164d89c09c");
    }
    const paths = {
      "vega": "https://cdn.jsdelivr.net/npm/vega@5?noext",
      "vega-lib": "https://cdn.jsdelivr.net/npm/vega-lib?noext",
      "vega-lite": "https://cdn.jsdelivr.net/npm/vega-lite@5.17.0?noext",
      "vega-embed": "https://cdn.jsdelivr.net/npm/vega-embed@6?noext",
    };

    function maybeLoadScript(lib, version) {
      var key = `${lib.replace("-", "")}_version`;
      return (VEGA_DEBUG[key] == version) ?
        Promise.resolve(paths[lib]) :
        new Promise(function(resolve, reject) {
          var s = document.createElement('script');
          document.getElementsByTagName("head")[0].appendChild(s);
          s.async = true;
          s.onload = () => {
            VEGA_DEBUG[key] = version;
            return resolve(paths[lib]);
          };
          s.onerror = () => reject(`Error loading script: ${paths[lib]}`);
          s.src = paths[lib];
        });
    }

    function showError(err) {
      outputDiv.innerHTML = `<div class="error" style="color:red;">${err}</div>`;
      throw err;
    }

    function displayChart(vegaEmbed) {
      vegaEmbed(outputDiv, spec, embedOpt)
        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));
    }

    if(typeof define === "function" && define.amd) {
      requirejs.config({paths});
      require(["vega-embed"], displayChart, err => showError(`Error loading script: ${err.message}`));
    } else {
      maybeLoadScript("vega", "5")
        .then(() => maybeLoadScript("vega-lite", "5.17.0"))
        .then(() => maybeLoadScript("vega-embed", "6"))
        .catch(showError)
        .then(() => displayChart(vegaEmbed));
    }
  })({"config": {"view": {"continuousWidth": 300, "continuousHeight": 300}}, "data": {"name": "data-843f466f5c4fe33e35d54e49194ad7f3"}, "mark": "bar", "encoding": {"order": {"field": "cumulative_rows"}, "tooltip": [{"field": "blocking_rule", "title": "SQL Condition", "type": "nominal"}, {"field": "row_count", "format": ",", "title": "Comparisons Generated", "type": "quantitative"}, {"field": "cumulative_rows", "format": ",", "title": "Cumulative Comparisons", "type": "quantitative"}, {"field": "cartesian", "format": ",", "title": "Total comparisons in Cartesian product", "type": "quantitative"}], "x": {"field": "start", "title": "Comparisons Generated by Rule(s)", "type": "quantitative"}, "x2": {"field": "cumulative_rows"}, "y": {"field": "blocking_rule", "sort": ["-x2"], "title": "SQL Blocking Rule"}}, "height": {"step": 20}, "title": {"text": "Count of Additional Comparisons Generated by Each Blocking Rule", "subtitle": "(Counts exclude comparisons already generated by previous rules)"}, "width": 450, "$schema": "https://vega.github.io/schema/vega-lite/v5.9.3.json", "datasets": {"data-843f466f5c4fe33e35d54e49194ad7f3": [{"blocking_rule": "\n    strftime(l.transaction_date, '%Y%m') = strftime(r.transaction_date, '%Y%m')\n    and substr(l.memo, 1,3) = substr(r.memo,1,3)\n    and l.amount/r.amount > 0.7   and l.amount/r.amount < 1.3\n", "row_count": 301537, "cumulative_rows": 301537, "cartesian": 2054446276, "match_key": "0", "start": 0}, {"blocking_rule": "\n    strftime(l.transaction_date+15, '%Y%m') = strftime(r.transaction_date, '%Y%m')\n    and substr(l.memo, 1,3) = substr(r.memo,1,3)\n    and l.amount/r.amount > 0.7   and l.amount/r.amount < 1.3\n", "row_count": 111878, "cumulative_rows": 413415, "cartesian": 2054446276, "match_key": "1", "start": 301537}, {"blocking_rule": "SUBSTR(l.memo, 1, 9) = SUBSTR(r.memo, 1, 9)", "row_count": 285581, "cumulative_rows": 698996, "cartesian": 2054446276, "match_key": "2", "start": 413415}, {"blocking_rule": "\nround(l.amount/2,0)*2 = round(r.amount/2,0)*2 and yearweek(r.transaction_date) = yearweek(l.transaction_date)\n", "row_count": 341312, "cumulative_rows": 1040308, "cartesian": 2054446276, "match_key": "3", "start": 698996}, {"blocking_rule": "\nround(l.amount/2,0)*2 = round((r.amount+1)/2,0)*2 and yearweek(r.transaction_date) = yearweek(l.transaction_date + 4)\n", "row_count": 260358, "cumulative_rows": 1300666, "cartesian": 2054446276, "match_key": "4", "start": 1040308}, {"blocking_rule": "l.\"unique_id\" = r.\"unique_id\"", "row_count": 665, "cumulative_rows": 1301331, "cartesian": 2054446276, "match_key": "5", "start": 1300666}]}}, {"mode": "vega-lite"});
</script>

<div class="highlight"><pre><span></span><code><span class="c1"># Full settings for linking model</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">splink.comparison_level_library</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">cll</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">splink.comparison_library</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">cl</span>

<span class="n">comparison_amount</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">"output_column_name"</span><span class="p">:</span> <span class="s2">"amount"</span><span class="p">,</span>
    <span class="s2">"comparison_levels"</span><span class="p">:</span> <span class="p">[</span>
        <span class="n">cll</span><span class="o">.</span><span class="n">NullLevel</span><span class="p">(</span><span class="s2">"amount"</span><span class="p">),</span>
        <span class="n">cll</span><span class="o">.</span><span class="n">ExactMatchLevel</span><span class="p">(</span><span class="s2">"amount"</span><span class="p">),</span>
        <span class="n">cll</span><span class="o">.</span><span class="n">PercentageDifferenceLevel</span><span class="p">(</span><span class="s2">"amount"</span><span class="p">,</span> <span class="mf">0.01</span><span class="p">),</span>
        <span class="n">cll</span><span class="o">.</span><span class="n">PercentageDifferenceLevel</span><span class="p">(</span><span class="s2">"amount"</span><span class="p">,</span> <span class="mf">0.03</span><span class="p">),</span>
        <span class="n">cll</span><span class="o">.</span><span class="n">PercentageDifferenceLevel</span><span class="p">(</span><span class="s2">"amount"</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">),</span>
        <span class="n">cll</span><span class="o">.</span><span class="n">PercentageDifferenceLevel</span><span class="p">(</span><span class="s2">"amount"</span><span class="p">,</span> <span class="mf">0.3</span><span class="p">),</span>
        <span class="n">cll</span><span class="o">.</span><span class="n">ElseLevel</span><span class="p">(),</span>
    <span class="p">],</span>
    <span class="s2">"comparison_description"</span><span class="p">:</span> <span class="s2">"Amount percentage difference"</span><span class="p">,</span>
<span class="p">}</span>

<span class="c1"># The date distance is one sided becaause transactions should only arrive after they've left</span>
<span class="c1"># As a result, the comparison_template_library date difference functions are not appropriate</span>
<span class="n">within_n_days_template</span> <span class="o">=</span> <span class="s2">"transaction_date_r - transaction_date_l &lt;= </span><span class="si">{n}</span><span class="s2"> and transaction_date_r &gt;= transaction_date_l"</span>

<span class="n">comparison_date</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">"output_column_name"</span><span class="p">:</span> <span class="s2">"transaction_date"</span><span class="p">,</span>
    <span class="s2">"comparison_levels"</span><span class="p">:</span> <span class="p">[</span>
        <span class="n">cll</span><span class="o">.</span><span class="n">NullLevel</span><span class="p">(</span><span class="s2">"transaction_date"</span><span class="p">),</span>
        <span class="p">{</span>
            <span class="s2">"sql_condition"</span><span class="p">:</span> <span class="n">within_n_days_template</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">n</span><span class="o">=</span><span class="mi">1</span><span class="p">),</span>
            <span class="s2">"label_for_charts"</span><span class="p">:</span> <span class="s2">"1 day"</span><span class="p">,</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="s2">"sql_condition"</span><span class="p">:</span> <span class="n">within_n_days_template</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">n</span><span class="o">=</span><span class="mi">4</span><span class="p">),</span>
            <span class="s2">"label_for_charts"</span><span class="p">:</span> <span class="s2">"&lt;=4 days"</span><span class="p">,</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="s2">"sql_condition"</span><span class="p">:</span> <span class="n">within_n_days_template</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">n</span><span class="o">=</span><span class="mi">10</span><span class="p">),</span>
            <span class="s2">"label_for_charts"</span><span class="p">:</span> <span class="s2">"&lt;=10 days"</span><span class="p">,</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="s2">"sql_condition"</span><span class="p">:</span> <span class="n">within_n_days_template</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">n</span><span class="o">=</span><span class="mi">30</span><span class="p">),</span>
            <span class="s2">"label_for_charts"</span><span class="p">:</span> <span class="s2">"&lt;=30 days"</span><span class="p">,</span>
        <span class="p">},</span>
        <span class="n">cll</span><span class="o">.</span><span class="n">ElseLevel</span><span class="p">(),</span>
    <span class="p">],</span>
    <span class="s2">"comparison_description"</span><span class="p">:</span> <span class="s2">"Transaction date days apart"</span><span class="p">,</span>
<span class="p">}</span>


<span class="n">settings</span> <span class="o">=</span> <span class="n">SettingsCreator</span><span class="p">(</span>
    <span class="n">link_type</span><span class="o">=</span><span class="s2">"link_only"</span><span class="p">,</span>
    <span class="n">probability_two_random_records_match</span><span class="o">=</span><span class="mi">1</span> <span class="o">/</span> <span class="nb">len</span><span class="p">(</span><span class="n">df_origin</span><span class="p">),</span>
    <span class="n">blocking_rules_to_generate_predictions</span><span class="o">=</span><span class="p">[</span>
        <span class="n">blocking_rule_date_1</span><span class="p">,</span>
        <span class="n">blocking_rule_date_2</span><span class="p">,</span>
        <span class="n">blocking_rule_memo</span><span class="p">,</span>
        <span class="n">blocking_rule_amount_1</span><span class="p">,</span>
        <span class="n">blocking_rule_amount_2</span><span class="p">,</span>
        <span class="n">blocking_rule_cheat</span><span class="p">,</span>
    <span class="p">],</span>
    <span class="n">comparisons</span><span class="o">=</span><span class="p">[</span>
        <span class="n">comparison_amount</span><span class="p">,</span>
        <span class="n">cl</span><span class="o">.</span><span class="n">LevenshteinAtThresholds</span><span class="p">(</span><span class="s2">"memo"</span><span class="p">,</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">10</span><span class="p">]),</span>
        <span class="n">comparison_date</span><span class="p">,</span>
    <span class="p">],</span>
    <span class="n">retain_intermediate_calculation_columns</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<span class="p">)</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="n">linker</span> <span class="o">=</span> <span class="n">Linker</span><span class="p">(</span>
    <span class="p">[</span><span class="n">df_origin</span><span class="p">,</span> <span class="n">df_destination</span><span class="p">],</span>
    <span class="n">settings</span><span class="p">,</span>
    <span class="n">input_table_aliases</span><span class="o">=</span><span class="p">[</span><span class="s2">"__ori"</span><span class="p">,</span> <span class="s2">"_dest"</span><span class="p">],</span>
    <span class="n">db_api</span><span class="o">=</span><span class="n">db_api</span><span class="p">,</span>
<span class="p">)</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="n">linker</span><span class="o">.</span><span class="n">training</span><span class="o">.</span><span class="n">estimate_u_using_random_sampling</span><span class="p">(</span><span class="n">max_pairs</span><span class="o">=</span><span class="mf">1e6</span><span class="p">)</span>
</code></pre></div>
<pre><code>You are using the default value for `max_pairs`, which may be too small and thus lead to inaccurate estimates for your model's u-parameters. Consider increasing to 1e8 or 1e9, which will result in more accurate estimates, but with a longer run time.
----- Estimating u probabilities using random sampling -----

Estimated u probabilities using random sampling

Your model is not yet fully trained. Missing estimates for:
    - amount (no m values are trained).
    - memo (no m values are trained).
    - transaction_date (no m values are trained).
</code></pre>
<div class="highlight"><pre><span></span><code><span class="n">linker</span><span class="o">.</span><span class="n">training</span><span class="o">.</span><span class="n">estimate_parameters_using_expectation_maximisation</span><span class="p">(</span><span class="n">block_on</span><span class="p">(</span><span class="s2">"memo"</span><span class="p">))</span>
</code></pre></div>
<pre><code>----- Starting EM training session -----

Estimating the m probabilities of the model by blocking on:
l."memo" = r."memo"

Parameter estimates will be made for the following comparison(s):
    - amount
    - transaction_date

Parameter estimates cannot be made for the following comparison(s) since they are used in the blocking rules: 
    - memo

Iteration 1: Largest change in params was -0.588 in the m_probability of amount, level `Exact match on amount`
Iteration 2: Largest change in params was -0.176 in the m_probability of transaction_date, level `1 day`
Iteration 3: Largest change in params was 0.00996 in the m_probability of amount, level `Percentage difference of 'amount' within 10.00%`
Iteration 4: Largest change in params was 0.0022 in the m_probability of transaction_date, level `&lt;=30 days`
Iteration 5: Largest change in params was 0.000385 in the m_probability of transaction_date, level `&lt;=30 days`
Iteration 6: Largest change in params was -0.000255 in the m_probability of amount, level `All other comparisons`
Iteration 7: Largest change in params was -0.000229 in the m_probability of amount, level `All other comparisons`
Iteration 8: Largest change in params was -0.000208 in the m_probability of amount, level `All other comparisons`
Iteration 9: Largest change in params was -0.00019 in the m_probability of amount, level `All other comparisons`
Iteration 10: Largest change in params was -0.000173 in the m_probability of amount, level `All other comparisons`
Iteration 11: Largest change in params was -0.000159 in the m_probability of amount, level `All other comparisons`
Iteration 12: Largest change in params was -0.000146 in the m_probability of amount, level `All other comparisons`
Iteration 13: Largest change in params was -0.000135 in the m_probability of amount, level `All other comparisons`
Iteration 14: Largest change in params was -0.000124 in the m_probability of amount, level `All other comparisons`
Iteration 15: Largest change in params was -0.000115 in the m_probability of amount, level `All other comparisons`
Iteration 16: Largest change in params was -0.000107 in the m_probability of amount, level `All other comparisons`
Iteration 17: Largest change in params was -9.92e-05 in the m_probability of amount, level `All other comparisons`

EM converged after 17 iterations

Your model is not yet fully trained. Missing estimates for:
    - memo (no m values are trained).





&lt;EMTrainingSession, blocking on l."memo" = r."memo", deactivating comparisons memo&gt;
</code></pre>
<div class="highlight"><pre><span></span><code><span class="n">session</span> <span class="o">=</span> <span class="n">linker</span><span class="o">.</span><span class="n">training</span><span class="o">.</span><span class="n">estimate_parameters_using_expectation_maximisation</span><span class="p">(</span><span class="n">block_on</span><span class="p">(</span><span class="s2">"amount"</span><span class="p">))</span>
</code></pre></div>
<pre><code>----- Starting EM training session -----

Estimating the m probabilities of the model by blocking on:
l."amount" = r."amount"

Parameter estimates will be made for the following comparison(s):
    - memo
    - transaction_date

Parameter estimates cannot be made for the following comparison(s) since they are used in the blocking rules: 
    - amount

Iteration 1: Largest change in params was -0.373 in the m_probability of memo, level `Exact match on memo`
Iteration 2: Largest change in params was -0.108 in the m_probability of memo, level `Exact match on memo`
Iteration 3: Largest change in params was 0.0202 in the m_probability of memo, level `Levenshtein distance of memo &lt;= 10`
Iteration 4: Largest change in params was -0.00538 in the m_probability of memo, level `Exact match on memo`
Iteration 5: Largest change in params was 0.00482 in the m_probability of memo, level `All other comparisons`
Iteration 6: Largest change in params was 0.00508 in the m_probability of memo, level `All other comparisons`
Iteration 7: Largest change in params was 0.00502 in the m_probability of memo, level `All other comparisons`
Iteration 8: Largest change in params was 0.00466 in the m_probability of memo, level `All other comparisons`
Iteration 9: Largest change in params was 0.00409 in the m_probability of memo, level `All other comparisons`
Iteration 10: Largest change in params was 0.00343 in the m_probability of memo, level `All other comparisons`
Iteration 11: Largest change in params was 0.00276 in the m_probability of memo, level `All other comparisons`
Iteration 12: Largest change in params was 0.00216 in the m_probability of memo, level `All other comparisons`
Iteration 13: Largest change in params was 0.00165 in the m_probability of memo, level `All other comparisons`
Iteration 14: Largest change in params was 0.00124 in the m_probability of memo, level `All other comparisons`
Iteration 15: Largest change in params was 0.000915 in the m_probability of memo, level `All other comparisons`
Iteration 16: Largest change in params was 0.000671 in the m_probability of memo, level `All other comparisons`
Iteration 17: Largest change in params was 0.000488 in the m_probability of memo, level `All other comparisons`
Iteration 18: Largest change in params was 0.000353 in the m_probability of memo, level `All other comparisons`
Iteration 19: Largest change in params was 0.000255 in the m_probability of memo, level `All other comparisons`
Iteration 20: Largest change in params was 0.000183 in the m_probability of memo, level `All other comparisons`
Iteration 21: Largest change in params was 0.000132 in the m_probability of memo, level `All other comparisons`
Iteration 22: Largest change in params was 9.45e-05 in the m_probability of memo, level `All other comparisons`

EM converged after 22 iterations

Your model is fully trained. All comparisons have at least one estimate for their m and u values
</code></pre>
<div class="highlight"><pre><span></span><code><span class="n">linker</span><span class="o">.</span><span class="n">visualisations</span><span class="o">.</span><span class="n">match_weights_chart</span><span class="p">()</span>
</code></pre></div>
<style>
  #altair-viz-83ef44ec9d9048d880186cd914719e2a.vega-embed {
    width: 100%;
    display: flex;
  }

  #altair-viz-83ef44ec9d9048d880186cd914719e2a.vega-embed details,
  #altair-viz-83ef44ec9d9048d880186cd914719e2a.vega-embed details summary {
    position: relative;
  }
</style>
<div id="altair-viz-83ef44ec9d9048d880186cd914719e2a"></div>
<script type="text/javascript">
  var VEGA_DEBUG = (typeof VEGA_DEBUG == "undefined") ? {} : VEGA_DEBUG;
  (function(spec, embedOpt){
    let outputDiv = document.currentScript.previousElementSibling;
    if (outputDiv.id !== "altair-viz-83ef44ec9d9048d880186cd914719e2a") {
      outputDiv = document.getElementById("altair-viz-83ef44ec9d9048d880186cd914719e2a");
    }
    const paths = {
      "vega": "https://cdn.jsdelivr.net/npm/vega@5?noext",
      "vega-lib": "https://cdn.jsdelivr.net/npm/vega-lib?noext",
      "vega-lite": "https://cdn.jsdelivr.net/npm/vega-lite@5.17.0?noext",
      "vega-embed": "https://cdn.jsdelivr.net/npm/vega-embed@6?noext",
    };

    function maybeLoadScript(lib, version) {
      var key = `${lib.replace("-", "")}_version`;
      return (VEGA_DEBUG[key] == version) ?
        Promise.resolve(paths[lib]) :
        new Promise(function(resolve, reject) {
          var s = document.createElement('script');
          document.getElementsByTagName("head")[0].appendChild(s);
          s.async = true;
          s.onload = () => {
            VEGA_DEBUG[key] = version;
            return resolve(paths[lib]);
          };
          s.onerror = () => reject(`Error loading script: ${paths[lib]}`);
          s.src = paths[lib];
        });
    }

    function showError(err) {
      outputDiv.innerHTML = `<div class="error" style="color:red;">${err}</div>`;
      throw err;
    }

    function displayChart(vegaEmbed) {
      vegaEmbed(outputDiv, spec, embedOpt)
        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));
    }

    if(typeof define === "function" && define.amd) {
      requirejs.config({paths});
      require(["vega-embed"], displayChart, err => showError(`Error loading script: ${err.message}`));
    } else {
      maybeLoadScript("vega", "5")
        .then(() => maybeLoadScript("vega-lite", "5.17.0"))
        .then(() => maybeLoadScript("vega-embed", "6"))
        .catch(showError)
        .then(() => displayChart(vegaEmbed));
    }
  })({"config": {"view": {"continuousWidth": 300, "continuousHeight": 300, "discreteHeight": 60, "discreteWidth": 400}, "header": {"title": null}, "mark": {"tooltip": null}, "title": {"anchor": "middle"}}, "vconcat": [{"mark": {"type": "bar", "clip": true, "height": 15}, "encoding": {"color": {"field": "log2_bayes_factor", "scale": {"domain": [-10, 0, 10], "interpolate": "lab", "range": ["red", "#bbbbbb", "green"]}, "title": "Match weight", "type": "quantitative"}, "tooltip": [{"field": "comparison_name", "title": "Comparison name", "type": "nominal"}, {"field": "probability_two_random_records_match", "format": ".4f", "title": "Probability two random records match", "type": "nominal"}, {"field": "log2_bayes_factor", "format": ",.4f", "title": "Equivalent match weight", "type": "quantitative"}, {"field": "bayes_factor_description", "title": "Match weight description", "type": "nominal"}], "x": {"axis": {"domain": false, "gridColor": {"condition": {"test": "abs(datum.value / 10)  <= 1 & datum.value % 10 === 0", "value": "#aaa"}, "value": "#ddd"}, "gridDash": {"condition": {"test": "abs(datum.value / 10) == 1", "value": [3]}, "value": null}, "gridWidth": {"condition": {"test": "abs(datum.value / 10)  <= 1 & datum.value % 10 === 0", "value": 2}, "value": 1}, "labels": false, "ticks": false, "title": ""}, "field": "log2_bayes_factor", "scale": {"domain": [-16, 16]}, "type": "quantitative"}, "y": {"axis": {"title": "Prior (starting) match weight", "titleAlign": "right", "titleAngle": 0, "titleFontWeight": "normal"}, "field": "label_for_charts", "sort": {"field": "comparison_vector_value", "order": "descending"}, "type": "nominal"}}, "height": 20, "transform": [{"filter": "(datum.comparison_name == 'probability_two_random_records_match')"}]}, {"mark": {"type": "bar", "clip": true}, "encoding": {"color": {"field": "log2_bayes_factor", "scale": {"domain": [-10, 0, 10], "interpolate": "lab", "range": ["red", "#bbbbbb", "green"]}, "title": "Match weight", "type": "quantitative"}, "row": {"field": "comparison_name", "header": {"labelAlign": "left", "labelAnchor": "middle", "labelAngle": 0}, "sort": {"field": "comparison_sort_order"}, "type": "nominal"}, "tooltip": [{"field": "comparison_name", "title": "Comparison name", "type": "nominal"}, {"field": "label_for_charts", "title": "Label", "type": "ordinal"}, {"field": "sql_condition", "title": "SQL condition", "type": "nominal"}, {"field": "m_probability", "format": ".4f", "title": "M probability", "type": "quantitative"}, {"field": "u_probability", "format": ".4f", "title": "U probability", "type": "quantitative"}, {"field": "bayes_factor", "format": ",.4f", "title": "Bayes factor = m/u", "type": "quantitative"}, {"field": "log2_bayes_factor", "format": ",.4f", "title": "Match weight = log2(m/u)", "type": "quantitative"}, {"field": "bayes_factor_description", "title": "Match weight description", "type": "nominal"}], "x": {"axis": {"gridColor": {"condition": {"test": "abs(datum.value / 10)  <= 1 & datum.value % 10 === 0", "value": "#aaa"}, "value": "#ddd"}, "gridDash": {"condition": {"test": "abs(datum.value / 10) == 1", "value": [3]}, "value": null}, "gridWidth": {"condition": {"test": "abs(datum.value / 10)  <= 1 & datum.value % 10 === 0", "value": 2}, "value": 1}, "title": "Comparison level match weight = log2(m/u)"}, "field": "log2_bayes_factor", "scale": {"domain": [-16, 16]}, "type": "quantitative"}, "y": {"axis": {"title": null}, "field": "label_for_charts", "sort": {"field": "comparison_vector_value", "order": "descending"}, "type": "nominal"}}, "height": {"step": 12}, "resolve": {"axis": {"y": "independent"}, "scale": {"y": "independent"}}, "transform": [{"filter": "(datum.comparison_name != 'probability_two_random_records_match')"}]}], "data": {"name": "data-a714ce1f8256a6d0f3a57df59f45903e"}, "params": [{"name": "mouse_zoom", "select": {"type": "interval", "encodings": ["x"]}, "bind": "scales", "views": []}], "resolve": {"axis": {"y": "independent"}, "scale": {"y": "independent"}}, "title": {"text": "Model parameters (components of final match weight)", "subtitle": "Use mousewheel to zoom"}, "$schema": "https://vega.github.io/schema/vega-lite/v5.9.3.json", "datasets": {"data-a714ce1f8256a6d0f3a57df59f45903e": [{"comparison_name": "probability_two_random_records_match", "sql_condition": null, "label_for_charts": "", "m_probability": null, "u_probability": null, "m_probability_description": null, "u_probability_description": null, "has_tf_adjustments": false, "tf_adjustment_column": null, "tf_adjustment_weight": null, "is_null_level": false, "bayes_factor": 2.206287920573635e-05, "log2_bayes_factor": -15.468019399518882, "comparison_vector_value": 0, "max_comparison_vector_value": 0, "bayes_factor_description": "The probability that two random records drawn at random match is 0.000 or one in  45,326.0 records.This is equivalent to a starting match weight of -15.468.", "probability_two_random_records_match": 2.2062392445836827e-05, "comparison_sort_order": -1}, {"comparison_name": "amount", "sql_condition": "\"amount_l\" = \"amount_r\"", "label_for_charts": "Exact match on amount", "m_probability": 0.24685872265268072, "u_probability": 2.2317307477718196e-05, "m_probability_description": "Amongst matching record comparisons, 24.69% of records are in the exact match on amount comparison level", "u_probability_description": "Amongst non-matching record comparisons, 0.00% of records are in the exact match on amount comparison level", "has_tf_adjustments": false, "tf_adjustment_column": null, "tf_adjustment_weight": 1.0, "is_null_level": false, "bayes_factor": 11061.312969727496, "log2_bayes_factor": 13.433235022128335, "comparison_vector_value": 5, "max_comparison_vector_value": 5, "bayes_factor_description": "If comparison level is `exact match on amount` then comparison is 11,061.31 times more likely to be a match", "probability_two_random_records_match": 2.2062392445836827e-05, "comparison_sort_order": 0}, {"comparison_name": "amount", "sql_condition": "(ABS(\"amount_l\" - \"amount_r\") / (CASE WHEN \"amount_r\" > \"amount_l\" THEN \"amount_r\" ELSE \"amount_l\" END)) < 0.01", "label_for_charts": "Percentage difference of 'amount' within 1.00%", "m_probability": 0.19779258983250028, "u_probability": 0.0034510672745089684, "m_probability_description": "Amongst matching record comparisons, 19.78% of records are in the percentage difference of 'amount' within 1.00% comparison level", "u_probability_description": "Amongst non-matching record comparisons, 0.35% of records are in the percentage difference of 'amount' within 1.00% comparison level", "has_tf_adjustments": false, "tf_adjustment_column": null, "tf_adjustment_weight": 1.0, "is_null_level": false, "bayes_factor": 57.31345525874833, "log2_bayes_factor": 5.840801969581078, "comparison_vector_value": 4, "max_comparison_vector_value": 5, "bayes_factor_description": "If comparison level is `percentage difference of 'amount' within 1.00%` then comparison is 57.31 times more likely to be a match", "probability_two_random_records_match": 2.2062392445836827e-05, "comparison_sort_order": 0}, {"comparison_name": "amount", "sql_condition": "(ABS(\"amount_l\" - \"amount_r\") / (CASE WHEN \"amount_r\" > \"amount_l\" THEN \"amount_r\" ELSE \"amount_l\" END)) < 0.03", "label_for_charts": "Percentage difference of 'amount' within 3.00%", "m_probability": 0.31721909917341545, "u_probability": 0.007092846085645711, "m_probability_description": "Amongst matching record comparisons, 31.72% of records are in the percentage difference of 'amount' within 3.00% comparison level", "u_probability_description": "Amongst non-matching record comparisons, 0.71% of records are in the percentage difference of 'amount' within 3.00% comparison level", "has_tf_adjustments": false, "tf_adjustment_column": null, "tf_adjustment_weight": 1.0, "is_null_level": false, "bayes_factor": 44.723809785664734, "log2_bayes_factor": 5.482971183890822, "comparison_vector_value": 3, "max_comparison_vector_value": 5, "bayes_factor_description": "If comparison level is `percentage difference of 'amount' within 3.00%` then comparison is 44.72 times more likely to be a match", "probability_two_random_records_match": 2.2062392445836827e-05, "comparison_sort_order": 0}, {"comparison_name": "amount", "sql_condition": "(ABS(\"amount_l\" - \"amount_r\") / (CASE WHEN \"amount_r\" > \"amount_l\" THEN \"amount_r\" ELSE \"amount_l\" END)) < 0.1", "label_for_charts": "Percentage difference of 'amount' within 10.00%", "m_probability": 0.23149568734526935, "u_probability": 0.02613255263334084, "m_probability_description": "Amongst matching record comparisons, 23.15% of records are in the percentage difference of 'amount' within 10.00% comparison level", "u_probability_description": "Amongst non-matching record comparisons, 2.61% of records are in the percentage difference of 'amount' within 10.00% comparison level", "has_tf_adjustments": false, "tf_adjustment_column": null, "tf_adjustment_weight": 1.0, "is_null_level": false, "bayes_factor": 8.858517979216424, "log2_bayes_factor": 3.1470653575978704, "comparison_vector_value": 2, "max_comparison_vector_value": 5, "bayes_factor_description": "If comparison level is `percentage difference of 'amount' within 10.00%` then comparison is 8.86 times more likely to be a match", "probability_two_random_records_match": 2.2062392445836827e-05, "comparison_sort_order": 0}, {"comparison_name": "amount", "sql_condition": "(ABS(\"amount_l\" - \"amount_r\") / (CASE WHEN \"amount_r\" > \"amount_l\" THEN \"amount_r\" ELSE \"amount_l\" END)) < 0.3", "label_for_charts": "Percentage difference of 'amount' within 30.00%", "m_probability": 0.0007603567508388371, "u_probability": 0.08587395590505811, "m_probability_description": "Amongst matching record comparisons, 0.08% of records are in the percentage difference of 'amount' within 30.00% comparison level", "u_probability_description": "Amongst non-matching record comparisons, 8.59% of records are in the percentage difference of 'amount' within 30.00% comparison level", "has_tf_adjustments": false, "tf_adjustment_column": null, "tf_adjustment_weight": 1.0, "is_null_level": false, "bayes_factor": 0.008854334737757794, "log2_bayes_factor": -6.819400369169093, "comparison_vector_value": 1, "max_comparison_vector_value": 5, "bayes_factor_description": "If comparison level is `percentage difference of 'amount' within 30.00%` then comparison is  112.94 times less likely to be a match", "probability_two_random_records_match": 2.2062392445836827e-05, "comparison_sort_order": 0}, {"comparison_name": "amount", "sql_condition": "ELSE", "label_for_charts": "All other comparisons", "m_probability": 0.005873544245295437, "u_probability": 0.8774272607939686, "m_probability_description": "Amongst matching record comparisons, 0.59% of records are in the all other comparisons comparison level", "u_probability_description": "Amongst non-matching record comparisons, 87.74% of records are in the all other comparisons comparison level", "has_tf_adjustments": false, "tf_adjustment_column": null, "tf_adjustment_weight": 1.0, "is_null_level": false, "bayes_factor": 0.0066940526101053315, "log2_bayes_factor": -7.222904395119598, "comparison_vector_value": 0, "max_comparison_vector_value": 5, "bayes_factor_description": "If comparison level is `all other comparisons` then comparison is  149.39 times less likely to be a match", "probability_two_random_records_match": 2.2062392445836827e-05, "comparison_sort_order": 0}, {"comparison_name": "memo", "sql_condition": "\"memo_l\" = \"memo_r\"", "label_for_charts": "Exact match on memo", "m_probability": 0.4267610924827707, "u_probability": 2.2317307477718196e-05, "m_probability_description": "Amongst matching record comparisons, 42.68% of records are in the exact match on memo comparison level", "u_probability_description": "Amongst non-matching record comparisons, 0.00% of records are in the exact match on memo comparison level", "has_tf_adjustments": false, "tf_adjustment_column": null, "tf_adjustment_weight": 1.0, "is_null_level": false, "bayes_factor": 19122.42742135685, "log2_bayes_factor": 14.222978051741993, "comparison_vector_value": 4, "max_comparison_vector_value": 4, "bayes_factor_description": "If comparison level is `exact match on memo` then comparison is 19,122.43 times more likely to be a match", "probability_two_random_records_match": 2.2062392445836827e-05, "comparison_sort_order": 1}, {"comparison_name": "memo", "sql_condition": "levenshtein(\"memo_l\", \"memo_r\") <= 2", "label_for_charts": "Levenshtein distance of memo <= 2", "m_probability": 0.10817684036314526, "u_probability": 0.0021962259404209043, "m_probability_description": "Amongst matching record comparisons, 10.82% of records are in the levenshtein distance of memo <= 2 comparison level", "u_probability_description": "Amongst non-matching record comparisons, 0.22% of records are in the levenshtein distance of memo <= 2 comparison level", "has_tf_adjustments": false, "tf_adjustment_column": null, "tf_adjustment_weight": 1.0, "is_null_level": false, "bayes_factor": 49.255788474301184, "log2_bayes_factor": 5.622221373008662, "comparison_vector_value": 3, "max_comparison_vector_value": 4, "bayes_factor_description": "If comparison level is `levenshtein distance of memo <= 2` then comparison is 49.26 times more likely to be a match", "probability_two_random_records_match": 2.2062392445836827e-05, "comparison_sort_order": 1}, {"comparison_name": "memo", "sql_condition": "levenshtein(\"memo_l\", \"memo_r\") <= 6", "label_for_charts": "Levenshtein distance of memo <= 6", "m_probability": 0.2591582087321121, "u_probability": 0.02739956704423493, "m_probability_description": "Amongst matching record comparisons, 25.92% of records are in the levenshtein distance of memo <= 6 comparison level", "u_probability_description": "Amongst non-matching record comparisons, 2.74% of records are in the levenshtein distance of memo <= 6 comparison level", "has_tf_adjustments": false, "tf_adjustment_column": null, "tf_adjustment_weight": 1.0, "is_null_level": false, "bayes_factor": 9.458478242145832, "log2_bayes_factor": 3.241608089578434, "comparison_vector_value": 2, "max_comparison_vector_value": 4, "bayes_factor_description": "If comparison level is `levenshtein distance of memo <= 6` then comparison is 9.46 times more likely to be a match", "probability_two_random_records_match": 2.2062392445836827e-05, "comparison_sort_order": 1}, {"comparison_name": "memo", "sql_condition": "levenshtein(\"memo_l\", \"memo_r\") <= 10", "label_for_charts": "Levenshtein distance of memo <= 10", "m_probability": 0.14779726216531575, "u_probability": 0.09805717694175792, "m_probability_description": "Amongst matching record comparisons, 14.78% of records are in the levenshtein distance of memo <= 10 comparison level", "u_probability_description": "Amongst non-matching record comparisons, 9.81% of records are in the levenshtein distance of memo <= 10 comparison level", "has_tf_adjustments": false, "tf_adjustment_column": null, "tf_adjustment_weight": 1.0, "is_null_level": false, "bayes_factor": 1.507255937554693, "log2_bayes_factor": 0.5919244126159111, "comparison_vector_value": 1, "max_comparison_vector_value": 4, "bayes_factor_description": "If comparison level is `levenshtein distance of memo <= 10` then comparison is 1.51 times more likely to be a match", "probability_two_random_records_match": 2.2062392445836827e-05, "comparison_sort_order": 1}, {"comparison_name": "memo", "sql_condition": "ELSE", "label_for_charts": "All other comparisons", "m_probability": 0.058106596256656165, "u_probability": 0.8723247127661086, "m_probability_description": "Amongst matching record comparisons, 5.81% of records are in the all other comparisons comparison level", "u_probability_description": "Amongst non-matching record comparisons, 87.23% of records are in the all other comparisons comparison level", "has_tf_adjustments": false, "tf_adjustment_column": null, "tf_adjustment_weight": 1.0, "is_null_level": false, "bayes_factor": 0.06661120040082592, "log2_bayes_factor": -3.9080914088124747, "comparison_vector_value": 0, "max_comparison_vector_value": 4, "bayes_factor_description": "If comparison level is `all other comparisons` then comparison is  15.01 times less likely to be a match", "probability_two_random_records_match": 2.2062392445836827e-05, "comparison_sort_order": 1}, {"comparison_name": "transaction_date", "sql_condition": "transaction_date_r - transaction_date_l <= 1 and transaction_date_r >= transaction_date_l", "label_for_charts": "1 day", "m_probability": 0.38903576440838894, "u_probability": 0.01929737000675606, "m_probability_description": "Amongst matching record comparisons, 38.90% of records are in the 1 day comparison level", "u_probability_description": "Amongst non-matching record comparisons, 1.93% of records are in the 1 day comparison level", "has_tf_adjustments": false, "tf_adjustment_column": null, "tf_adjustment_weight": 1.0, "is_null_level": false, "bayes_factor": 20.160040682859194, "log2_bayes_factor": 4.333426645079358, "comparison_vector_value": 4, "max_comparison_vector_value": 4, "bayes_factor_description": "If comparison level is `1 day` then comparison is 20.16 times more likely to be a match", "probability_two_random_records_match": 2.2062392445836827e-05, "comparison_sort_order": 2}, {"comparison_name": "transaction_date", "sql_condition": "transaction_date_r - transaction_date_l <= 4 and transaction_date_r >= transaction_date_l", "label_for_charts": "<=4 days", "m_probability": 0.466140837509571, "u_probability": 0.028893812222174884, "m_probability_description": "Amongst matching record comparisons, 46.61% of records are in the <=4 days comparison level", "u_probability_description": "Amongst non-matching record comparisons, 2.89% of records are in the <=4 days comparison level", "has_tf_adjustments": false, "tf_adjustment_column": null, "tf_adjustment_weight": 1.0, "is_null_level": false, "bayes_factor": 16.132894957759362, "log2_bayes_factor": 4.011933440166542, "comparison_vector_value": 3, "max_comparison_vector_value": 4, "bayes_factor_description": "If comparison level is `<=4 days` then comparison is 16.13 times more likely to be a match", "probability_two_random_records_match": 2.2062392445836827e-05, "comparison_sort_order": 2}, {"comparison_name": "transaction_date", "sql_condition": "transaction_date_r - transaction_date_l <= 10 and transaction_date_r >= transaction_date_l", "label_for_charts": "<=10 days", "m_probability": 0.09609677790958321, "u_probability": 0.05649220618757494, "m_probability_description": "Amongst matching record comparisons, 9.61% of records are in the <=10 days comparison level", "u_probability_description": "Amongst non-matching record comparisons, 5.65% of records are in the <=10 days comparison level", "has_tf_adjustments": false, "tf_adjustment_column": null, "tf_adjustment_weight": 1.0, "is_null_level": false, "bayes_factor": 1.7010625782697617, "log2_bayes_factor": 0.766436215486194, "comparison_vector_value": 2, "max_comparison_vector_value": 4, "bayes_factor_description": "If comparison level is `<=10 days` then comparison is 1.70 times more likely to be a match", "probability_two_random_records_match": 2.2062392445836827e-05, "comparison_sort_order": 2}, {"comparison_name": "transaction_date", "sql_condition": "transaction_date_r - transaction_date_l <= 30 and transaction_date_r >= transaction_date_l", "label_for_charts": "<=30 days", "m_probability": 0.04864613690105879, "u_probability": 0.16279157055008106, "m_probability_description": "Amongst matching record comparisons, 4.86% of records are in the <=30 days comparison level", "u_probability_description": "Amongst non-matching record comparisons, 16.28% of records are in the <=30 days comparison level", "has_tf_adjustments": false, "tf_adjustment_column": null, "tf_adjustment_weight": 1.0, "is_null_level": false, "bayes_factor": 0.2988246672520021, "log2_bayes_factor": -1.7426288508657286, "comparison_vector_value": 1, "max_comparison_vector_value": 4, "bayes_factor_description": "If comparison level is `<=30 days` then comparison is  3.35 times less likely to be a match", "probability_two_random_records_match": 2.2062392445836827e-05, "comparison_sort_order": 2}, {"comparison_name": "transaction_date", "sql_condition": "ELSE", "label_for_charts": "All other comparisons", "m_probability": 8.04832713980663e-05, "u_probability": 0.7325250410334131, "m_probability_description": "Amongst matching record comparisons, 0.01% of records are in the all other comparisons comparison level", "u_probability_description": "Amongst non-matching record comparisons, 73.25% of records are in the all other comparisons comparison level", "has_tf_adjustments": false, "tf_adjustment_column": null, "tf_adjustment_weight": 1.0, "is_null_level": false, "bayes_factor": 0.00010987101722082313, "log2_bayes_factor": -13.151901510334673, "comparison_vector_value": 0, "max_comparison_vector_value": 4, "bayes_factor_description": "If comparison level is `all other comparisons` then comparison is  9,101.58 times less likely to be a match", "probability_two_random_records_match": 2.2062392445836827e-05, "comparison_sort_order": 2}]}}, {"mode": "vega-lite"});
</script>

<div class="highlight"><pre><span></span><code><span class="n">df_predict</span> <span class="o">=</span> <span class="n">linker</span><span class="o">.</span><span class="n">inference</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">threshold_match_probability</span><span class="o">=</span><span class="mf">0.001</span><span class="p">)</span>
</code></pre></div>
<pre><code>FloatProgress(value=0.0, layout=Layout(width='auto'), style=ProgressStyle(bar_color='black'))
</code></pre>
<div class="highlight"><pre><span></span><code><span class="n">linker</span><span class="o">.</span><span class="n">visualisations</span><span class="o">.</span><span class="n">comparison_viewer_dashboard</span><span class="p">(</span>
    <span class="n">df_predict</span><span class="p">,</span> <span class="s2">"dashboards/comparison_viewer_transactions.html"</span><span class="p">,</span> <span class="n">overwrite</span><span class="o">=</span><span class="kc">True</span>
<span class="p">)</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">IPython.display</span><span class="w"> </span><span class="kn">import</span> <span class="n">IFrame</span>

<span class="n">IFrame</span><span class="p">(</span>
    <span class="n">src</span><span class="o">=</span><span class="s2">"./dashboards/comparison_viewer_transactions.html"</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="s2">"100%"</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="mi">1200</span>
<span class="p">)</span>
</code></pre></div>
<p><iframe width="100%" height="1200" src="./dashboards/comparison_viewer_transactions.html" frameborder="0" allowfullscreen></iframe>
</p>
<div class="highlight"><pre><span></span><code><span class="n">pred_errors</span> <span class="o">=</span> <span class="n">linker</span><span class="o">.</span><span class="n">evaluation</span><span class="o">.</span><span class="n">prediction_errors_from_labels_column</span><span class="p">(</span>
    <span class="s2">"ground_truth"</span><span class="p">,</span> <span class="n">include_false_positives</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">include_false_negatives</span><span class="o">=</span><span class="kc">False</span>
<span class="p">)</span>
<span class="n">linker</span><span class="o">.</span><span class="n">visualisations</span><span class="o">.</span><span class="n">waterfall_chart</span><span class="p">(</span><span class="n">pred_errors</span><span class="o">.</span><span class="n">as_record_dict</span><span class="p">(</span><span class="n">limit</span><span class="o">=</span><span class="mi">5</span><span class="p">))</span>
</code></pre></div>
<pre><code>FloatProgress(value=0.0, layout=Layout(width='auto'), style=ProgressStyle(bar_color='black'))
</code></pre>
<style>
  #altair-viz-8799cea88f704d4cb31523677517e755.vega-embed {
    width: 100%;
    display: flex;
  }

  #altair-viz-8799cea88f704d4cb31523677517e755.vega-embed details,
  #altair-viz-8799cea88f704d4cb31523677517e755.vega-embed details summary {
    position: relative;
  }
</style>
<div id="altair-viz-8799cea88f704d4cb31523677517e755"></div>
<script type="text/javascript">
  var VEGA_DEBUG = (typeof VEGA_DEBUG == "undefined") ? {} : VEGA_DEBUG;
  (function(spec, embedOpt){
    let outputDiv = document.currentScript.previousElementSibling;
    if (outputDiv.id !== "altair-viz-8799cea88f704d4cb31523677517e755") {
      outputDiv = document.getElementById("altair-viz-8799cea88f704d4cb31523677517e755");
    }
    const paths = {
      "vega": "https://cdn.jsdelivr.net/npm/vega@5?noext",
      "vega-lib": "https://cdn.jsdelivr.net/npm/vega-lib?noext",
      "vega-lite": "https://cdn.jsdelivr.net/npm/vega-lite@5.17.0?noext",
      "vega-embed": "https://cdn.jsdelivr.net/npm/vega-embed@6?noext",
    };

    function maybeLoadScript(lib, version) {
      var key = `${lib.replace("-", "")}_version`;
      return (VEGA_DEBUG[key] == version) ?
        Promise.resolve(paths[lib]) :
        new Promise(function(resolve, reject) {
          var s = document.createElement('script');
          document.getElementsByTagName("head")[0].appendChild(s);
          s.async = true;
          s.onload = () => {
            VEGA_DEBUG[key] = version;
            return resolve(paths[lib]);
          };
          s.onerror = () => reject(`Error loading script: ${paths[lib]}`);
          s.src = paths[lib];
        });
    }

    function showError(err) {
      outputDiv.innerHTML = `<div class="error" style="color:red;">${err}</div>`;
      throw err;
    }

    function displayChart(vegaEmbed) {
      vegaEmbed(outputDiv, spec, embedOpt)
        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));
    }

    if(typeof define === "function" && define.amd) {
      requirejs.config({paths});
      require(["vega-embed"], displayChart, err => showError(`Error loading script: ${err.message}`));
    } else {
      maybeLoadScript("vega", "5")
        .then(() => maybeLoadScript("vega-lite", "5.17.0"))
        .then(() => maybeLoadScript("vega-embed", "6"))
        .catch(showError)
        .then(() => displayChart(vegaEmbed));
    }
  })({"config": {"view": {"continuousWidth": 400, "continuousHeight": 300}}, "layer": [{"layer": [{"mark": "rule", "encoding": {"color": {"value": "black"}, "size": {"value": 0.5}, "y": {"field": "zero", "type": "quantitative"}}}, {"mark": {"type": "bar", "width": 60}, "encoding": {"color": {"condition": {"test": "(datum.log2_bayes_factor < 0)", "value": "red"}, "value": "green"}, "opacity": {"condition": {"test": "datum.column_name == 'Prior match weight' || datum.column_name == 'Final score'", "value": 1}, "value": 0.5}, "tooltip": [{"field": "column_name", "title": "Comparison column", "type": "nominal"}, {"field": "value_l", "title": "Value (L)", "type": "nominal"}, {"field": "value_r", "title": "Value (R)", "type": "nominal"}, {"field": "label_for_charts", "title": "Label", "type": "ordinal"}, {"field": "sql_condition", "title": "SQL condition", "type": "nominal"}, {"field": "comparison_vector_value", "title": "Comparison vector value", "type": "nominal"}, {"field": "bayes_factor", "format": ",.4f", "title": "Bayes factor = m/u", "type": "quantitative"}, {"field": "log2_bayes_factor", "format": ",.4f", "title": "Match weight = log2(m/u)", "type": "quantitative"}, {"field": "prob", "format": ".4f", "title": "Cumulative match probability", "type": "quantitative"}, {"field": "bayes_factor_description", "title": "Match weight description", "type": "nominal"}], "x": {"axis": {"grid": true, "labelAlign": "center", "labelAngle": -20, "labelExpr": "datum.value == 'Prior' || datum.value == 'Final score' ? '' : datum.value", "labelPadding": 10, "tickBand": "extent", "title": "Column"}, "field": "column_name", "sort": {"field": "bar_sort_order", "order": "ascending"}, "type": "nominal"}, "y": {"axis": {"grid": false, "orient": "left", "title": "Match Weight"}, "field": "previous_sum", "type": "quantitative"}, "y2": {"field": "sum"}}}, {"mark": {"type": "text", "fontWeight": "bold"}, "encoding": {"color": {"value": "white"}, "text": {"condition": {"test": "abs(datum.log2_bayes_factor) > 1", "field": "log2_bayes_factor", "format": ".2f", "type": "nominal"}, "value": ""}, "x": {"axis": {"labelAngle": -20, "title": "Column"}, "field": "column_name", "sort": {"field": "bar_sort_order", "order": "ascending"}, "type": "nominal"}, "y": {"axis": {"orient": "left"}, "field": "center", "type": "quantitative"}}}, {"mark": {"type": "text", "baseline": "bottom", "dy": -25, "fontWeight": "bold"}, "encoding": {"color": {"value": "black"}, "text": {"field": "column_name", "type": "nominal"}, "x": {"axis": {"labelAngle": -20, "title": "Column"}, "field": "column_name", "sort": {"field": "bar_sort_order", "order": "ascending"}, "type": "nominal"}, "y": {"field": "sum_top", "type": "quantitative"}}}, {"mark": {"type": "text", "baseline": "bottom", "dy": -13, "fontSize": 8}, "encoding": {"color": {"value": "grey"}, "text": {"field": "value_l", "type": "nominal"}, "x": {"axis": {"labelAngle": -20, "title": "Column"}, "field": "column_name", "sort": {"field": "bar_sort_order", "order": "ascending"}, "type": "nominal"}, "y": {"field": "sum_top", "type": "quantitative"}}}, {"mark": {"type": "text", "baseline": "bottom", "dy": -5, "fontSize": 8}, "encoding": {"color": {"value": "grey"}, "text": {"field": "value_r", "type": "nominal"}, "x": {"axis": {"labelAngle": -20, "title": "Column"}, "field": "column_name", "sort": {"field": "bar_sort_order", "order": "ascending"}, "type": "nominal"}, "y": {"field": "sum_top", "type": "quantitative"}}}]}, {"mark": {"type": "rule", "color": "black", "strokeWidth": 2, "x2Offset": 30, "xOffset": -30}, "encoding": {"x": {"axis": {"labelAngle": -20, "title": "Column"}, "field": "column_name", "sort": {"field": "bar_sort_order", "order": "ascending"}, "type": "nominal"}, "x2": {"field": "lead"}, "y": {"axis": {"labelExpr": "format(1 / (1 + pow(2, -1*datum.value)), '.2r')", "orient": "right", "title": "Probability"}, "field": "sum", "scale": {"zero": false}, "type": "quantitative"}}}], "data": {"name": "data-6e76e82f0ddb2734cf5b1f4edbf12868"}, "height": 450, "params": [{"name": "record_number", "bind": {"input": "range", "max": 4, "min": 0, "step": 1}, "value": 0}], "resolve": {"axis": {"y": "independent"}}, "title": {"text": "Match weights waterfall chart", "subtitle": "How each comparison contributes to the final match score"}, "transform": [{"filter": "(datum.record_number == record_number)"}, {"filter": "(datum.bayes_factor !== 1.0)"}, {"window": [{"op": "sum", "field": "log2_bayes_factor", "as": "sum"}, {"op": "lead", "field": "column_name", "as": "lead"}], "frame": [null, 0]}, {"calculate": "datum.column_name === \"Final score\" ? datum.sum - datum.log2_bayes_factor : datum.sum", "as": "sum"}, {"calculate": "datum.lead === null ? datum.column_name : datum.lead", "as": "lead"}, {"calculate": "datum.column_name === \"Final score\" || datum.column_name === \"Prior match weight\" ? 0 : datum.sum - datum.log2_bayes_factor", "as": "previous_sum"}, {"calculate": "datum.sum > datum.previous_sum ? datum.column_name : \"\"", "as": "top_label"}, {"calculate": "datum.sum < datum.previous_sum ? datum.column_name : \"\"", "as": "bottom_label"}, {"calculate": "datum.sum > datum.previous_sum ? datum.sum : datum.previous_sum", "as": "sum_top"}, {"calculate": "datum.sum < datum.previous_sum ? datum.sum : datum.previous_sum", "as": "sum_bottom"}, {"calculate": "(datum.sum + datum.previous_sum) / 2", "as": "center"}, {"calculate": "(datum.log2_bayes_factor > 0 ? \"+\" : \"\") + datum.log2_bayes_factor", "as": "text_log2_bayes_factor"}, {"calculate": "datum.sum < datum.previous_sum ? 4 : -4", "as": "dy"}, {"calculate": "datum.sum < datum.previous_sum ? \"top\" : \"bottom\"", "as": "baseline"}, {"calculate": "1. / (1 + pow(2, -1.*datum.sum))", "as": "prob"}, {"calculate": "0*datum.sum", "as": "zero"}], "width": {"step": 75}, "$schema": "https://vega.github.io/schema/vega-lite/v5.9.3.json", "datasets": {"data-6e76e82f0ddb2734cf5b1f4edbf12868": [{"column_name": "Prior", "label_for_charts": "Starting match weight (prior)", "sql_condition": null, "log2_bayes_factor": -15.468019399518882, "bayes_factor": 2.206287920573635e-05, "comparison_vector_value": null, "m_probability": null, "u_probability": null, "bayes_factor_description": null, "value_l": "", "value_r": "", "term_frequency_adjustment": null, "bar_sort_order": 0, "record_number": 0}, {"sql_condition": "(ABS(\"amount_l\" - \"amount_r\") / (CASE WHEN \"amount_r\" > \"amount_l\" THEN \"amount_r\" ELSE \"amount_l\" END)) < 0.01", "label_for_charts": "Percentage difference of 'amount' within 1.00%", "m_probability": 0.19779258983250028, "u_probability": 0.0034510672745089684, "bayes_factor": 57.31345525874833, "log2_bayes_factor": 5.840801969581078, "comparison_vector_value": 4, "bayes_factor_description": "If comparison level is `percentage difference of 'amount' within 1.00%` then comparison is 57.31 times more likely to be a match", "column_name": "amount", "value_l": "256.35", "value_r": "255.78", "term_frequency_adjustment": false, "bar_sort_order": 1, "record_number": 0}, {"sql_condition": "levenshtein(\"memo_l\", \"memo_r\") <= 2", "label_for_charts": "Levenshtein distance of memo <= 2", "m_probability": 0.10817684036314526, "u_probability": 0.0021962259404209043, "bayes_factor": 49.255788474301184, "log2_bayes_factor": 5.622221373008662, "comparison_vector_value": 3, "bayes_factor_description": "If comparison level is `levenshtein distance of memo <= 2` then comparison is 49.26 times more likely to be a match", "column_name": "memo", "value_l": "E N BGC", "value_r": "R R BGC", "term_frequency_adjustment": false, "bar_sort_order": 2, "record_number": 0}, {"sql_condition": "transaction_date_r - transaction_date_l <= 4 and transaction_date_r >= transaction_date_l", "label_for_charts": "<=4 days", "m_probability": 0.466140837509571, "u_probability": 0.028893812222174884, "bayes_factor": 16.132894957759362, "log2_bayes_factor": 4.011933440166542, "comparison_vector_value": 3, "bayes_factor_description": "If comparison level is `<=4 days` then comparison is 16.13 times more likely to be a match", "column_name": "transaction_date", "value_l": "2022-04-29 00:00:00", "value_r": "2022-05-02 00:00:00", "term_frequency_adjustment": false, "bar_sort_order": 3, "record_number": 0}, {"column_name": "Final score", "label_for_charts": "Final score", "sql_condition": null, "log2_bayes_factor": 0.006937383237398456, "bayes_factor": 1.004820207635184, "comparison_vector_value": null, "m_probability": null, "u_probability": null, "bayes_factor_description": null, "value_l": "", "value_r": "", "term_frequency_adjustment": null, "bar_sort_order": 4, "record_number": 0}, {"column_name": "Prior", "label_for_charts": "Starting match weight (prior)", "sql_condition": null, "log2_bayes_factor": -15.468019399518882, "bayes_factor": 2.206287920573635e-05, "comparison_vector_value": null, "m_probability": null, "u_probability": null, "bayes_factor_description": null, "value_l": "", "value_r": "", "term_frequency_adjustment": null, "bar_sort_order": 0, "record_number": 1}, {"sql_condition": "(ABS(\"amount_l\" - \"amount_r\") / (CASE WHEN \"amount_r\" > \"amount_l\" THEN \"amount_r\" ELSE \"amount_l\" END)) < 0.01", "label_for_charts": "Percentage difference of 'amount' within 1.00%", "m_probability": 0.19779258983250028, "u_probability": 0.0034510672745089684, "bayes_factor": 57.31345525874833, "log2_bayes_factor": 5.840801969581078, "comparison_vector_value": 4, "bayes_factor_description": "If comparison level is `percentage difference of 'amount' within 1.00%` then comparison is 57.31 times more likely to be a match", "column_name": "amount", "value_l": "121.37", "value_r": "121.19", "term_frequency_adjustment": false, "bar_sort_order": 1, "record_number": 1}, {"sql_condition": "levenshtein(\"memo_l\", \"memo_r\") <= 2", "label_for_charts": "Levenshtein distance of memo <= 2", "m_probability": 0.10817684036314526, "u_probability": 0.0021962259404209043, "bayes_factor": 49.255788474301184, "log2_bayes_factor": 5.622221373008662, "comparison_vector_value": 3, "bayes_factor_description": "If comparison level is `levenshtein distance of memo <= 2` then comparison is 49.26 times more likely to be a match", "column_name": "memo", "value_l": "E J BGC", "value_r": "Z H BGC", "term_frequency_adjustment": false, "bar_sort_order": 2, "record_number": 1}, {"sql_condition": "transaction_date_r - transaction_date_l <= 4 and transaction_date_r >= transaction_date_l", "label_for_charts": "<=4 days", "m_probability": 0.466140837509571, "u_probability": 0.028893812222174884, "bayes_factor": 16.132894957759362, "log2_bayes_factor": 4.011933440166542, "comparison_vector_value": 3, "bayes_factor_description": "If comparison level is `<=4 days` then comparison is 16.13 times more likely to be a match", "column_name": "transaction_date", "value_l": "2022-03-27 00:00:00", "value_r": "2022-03-31 00:00:00", "term_frequency_adjustment": false, "bar_sort_order": 3, "record_number": 1}, {"column_name": "Final score", "label_for_charts": "Final score", "sql_condition": null, "log2_bayes_factor": 0.006937383237398456, "bayes_factor": 1.004820207635184, "comparison_vector_value": null, "m_probability": null, "u_probability": null, "bayes_factor_description": null, "value_l": "", "value_r": "", "term_frequency_adjustment": null, "bar_sort_order": 4, "record_number": 1}, {"column_name": "Prior", "label_for_charts": "Starting match weight (prior)", "sql_condition": null, "log2_bayes_factor": -15.468019399518882, "bayes_factor": 2.206287920573635e-05, "comparison_vector_value": null, "m_probability": null, "u_probability": null, "bayes_factor_description": null, "value_l": "", "value_r": "", "term_frequency_adjustment": null, "bar_sort_order": 0, "record_number": 2}, {"sql_condition": "(ABS(\"amount_l\" - \"amount_r\") / (CASE WHEN \"amount_r\" > \"amount_l\" THEN \"amount_r\" ELSE \"amount_l\" END)) < 0.01", "label_for_charts": "Percentage difference of 'amount' within 1.00%", "m_probability": 0.19779258983250028, "u_probability": 0.0034510672745089684, "bayes_factor": 57.31345525874833, "log2_bayes_factor": 5.840801969581078, "comparison_vector_value": 4, "bayes_factor_description": "If comparison level is `percentage difference of 'amount' within 1.00%` then comparison is 57.31 times more likely to be a match", "column_name": "amount", "value_l": "143.45", "value_r": "142.04", "term_frequency_adjustment": false, "bar_sort_order": 1, "record_number": 2}, {"sql_condition": "levenshtein(\"memo_l\", \"memo_r\") <= 2", "label_for_charts": "Levenshtein distance of memo <= 2", "m_probability": 0.10817684036314526, "u_probability": 0.0021962259404209043, "bayes_factor": 49.255788474301184, "log2_bayes_factor": 5.622221373008662, "comparison_vector_value": 3, "bayes_factor_description": "If comparison level is `levenshtein distance of memo <= 2` then comparison is 49.26 times more likely to be a match", "column_name": "memo", "value_l": "N R", "value_r": "D B", "term_frequency_adjustment": false, "bar_sort_order": 2, "record_number": 2}, {"sql_condition": "transaction_date_r - transaction_date_l <= 4 and transaction_date_r >= transaction_date_l", "label_for_charts": "<=4 days", "m_probability": 0.466140837509571, "u_probability": 0.028893812222174884, "bayes_factor": 16.132894957759362, "log2_bayes_factor": 4.011933440166542, "comparison_vector_value": 3, "bayes_factor_description": "If comparison level is `<=4 days` then comparison is 16.13 times more likely to be a match", "column_name": "transaction_date", "value_l": "2022-04-27 00:00:00", "value_r": "2022-05-01 00:00:00", "term_frequency_adjustment": false, "bar_sort_order": 3, "record_number": 2}, {"column_name": "Final score", "label_for_charts": "Final score", "sql_condition": null, "log2_bayes_factor": 0.006937383237398456, "bayes_factor": 1.004820207635184, "comparison_vector_value": null, "m_probability": null, "u_probability": null, "bayes_factor_description": null, "value_l": "", "value_r": "", "term_frequency_adjustment": null, "bar_sort_order": 4, "record_number": 2}, {"column_name": "Prior", "label_for_charts": "Starting match weight (prior)", "sql_condition": null, "log2_bayes_factor": -15.468019399518882, "bayes_factor": 2.206287920573635e-05, "comparison_vector_value": null, "m_probability": null, "u_probability": null, "bayes_factor_description": null, "value_l": "", "value_r": "", "term_frequency_adjustment": null, "bar_sort_order": 0, "record_number": 3}, {"sql_condition": "(ABS(\"amount_l\" - \"amount_r\") / (CASE WHEN \"amount_r\" > \"amount_l\" THEN \"amount_r\" ELSE \"amount_l\" END)) < 0.01", "label_for_charts": "Percentage difference of 'amount' within 1.00%", "m_probability": 0.19779258983250028, "u_probability": 0.0034510672745089684, "bayes_factor": 57.31345525874833, "log2_bayes_factor": 5.840801969581078, "comparison_vector_value": 4, "bayes_factor_description": "If comparison level is `percentage difference of 'amount' within 1.00%` then comparison is 57.31 times more likely to be a match", "column_name": "amount", "value_l": "37.67", "value_r": "37.97", "term_frequency_adjustment": false, "bar_sort_order": 1, "record_number": 3}, {"sql_condition": "levenshtein(\"memo_l\", \"memo_r\") <= 2", "label_for_charts": "Levenshtein distance of memo <= 2", "m_probability": 0.10817684036314526, "u_probability": 0.0021962259404209043, "bayes_factor": 49.255788474301184, "log2_bayes_factor": 5.622221373008662, "comparison_vector_value": 3, "bayes_factor_description": "If comparison level is `levenshtein distance of memo <= 2` then comparison is 49.26 times more likely to be a match", "column_name": "memo", "value_l": "G M BGC", "value_r": "F S BGC", "term_frequency_adjustment": false, "bar_sort_order": 2, "record_number": 3}, {"sql_condition": "transaction_date_r - transaction_date_l <= 4 and transaction_date_r >= transaction_date_l", "label_for_charts": "<=4 days", "m_probability": 0.466140837509571, "u_probability": 0.028893812222174884, "bayes_factor": 16.132894957759362, "log2_bayes_factor": 4.011933440166542, "comparison_vector_value": 3, "bayes_factor_description": "If comparison level is `<=4 days` then comparison is 16.13 times more likely to be a match", "column_name": "transaction_date", "value_l": "2022-05-05 00:00:00", "value_r": "2022-05-09 00:00:00", "term_frequency_adjustment": false, "bar_sort_order": 3, "record_number": 3}, {"column_name": "Final score", "label_for_charts": "Final score", "sql_condition": null, "log2_bayes_factor": 0.006937383237398456, "bayes_factor": 1.004820207635184, "comparison_vector_value": null, "m_probability": null, "u_probability": null, "bayes_factor_description": null, "value_l": "", "value_r": "", "term_frequency_adjustment": null, "bar_sort_order": 4, "record_number": 3}, {"column_name": "Prior", "label_for_charts": "Starting match weight (prior)", "sql_condition": null, "log2_bayes_factor": -15.468019399518882, "bayes_factor": 2.206287920573635e-05, "comparison_vector_value": null, "m_probability": null, "u_probability": null, "bayes_factor_description": null, "value_l": "", "value_r": "", "term_frequency_adjustment": null, "bar_sort_order": 0, "record_number": 4}, {"sql_condition": "(ABS(\"amount_l\" - \"amount_r\") / (CASE WHEN \"amount_r\" > \"amount_l\" THEN \"amount_r\" ELSE \"amount_l\" END)) < 0.01", "label_for_charts": "Percentage difference of 'amount' within 1.00%", "m_probability": 0.19779258983250028, "u_probability": 0.0034510672745089684, "bayes_factor": 57.31345525874833, "log2_bayes_factor": 5.840801969581078, "comparison_vector_value": 4, "bayes_factor_description": "If comparison level is `percentage difference of 'amount' within 1.00%` then comparison is 57.31 times more likely to be a match", "column_name": "amount", "value_l": "304.71", "value_r": "303.74", "term_frequency_adjustment": false, "bar_sort_order": 1, "record_number": 4}, {"sql_condition": "levenshtein(\"memo_l\", \"memo_r\") <= 2", "label_for_charts": "Levenshtein distance of memo <= 2", "m_probability": 0.10817684036314526, "u_probability": 0.0021962259404209043, "bayes_factor": 49.255788474301184, "log2_bayes_factor": 5.622221373008662, "comparison_vector_value": 3, "bayes_factor_description": "If comparison level is `levenshtein distance of memo <= 2` then comparison is 49.26 times more likely to be a match", "column_name": "memo", "value_l": "W H payment BGC", "value_r": "R B payment BGC", "term_frequency_adjustment": false, "bar_sort_order": 2, "record_number": 4}, {"sql_condition": "transaction_date_r - transaction_date_l <= 4 and transaction_date_r >= transaction_date_l", "label_for_charts": "<=4 days", "m_probability": 0.466140837509571, "u_probability": 0.028893812222174884, "bayes_factor": 16.132894957759362, "log2_bayes_factor": 4.011933440166542, "comparison_vector_value": 3, "bayes_factor_description": "If comparison level is `<=4 days` then comparison is 16.13 times more likely to be a match", "column_name": "transaction_date", "value_l": "2022-05-08 00:00:00", "value_r": "2022-05-11 00:00:00", "term_frequency_adjustment": false, "bar_sort_order": 3, "record_number": 4}, {"column_name": "Final score", "label_for_charts": "Final score", "sql_condition": null, "log2_bayes_factor": 0.006937383237398456, "bayes_factor": 1.004820207635184, "comparison_vector_value": null, "m_probability": null, "u_probability": null, "bayes_factor_description": null, "value_l": "", "value_r": "", "term_frequency_adjustment": null, "bar_sort_order": 4, "record_number": 4}]}}, {"mode": "vega-lite"});
</script>

<div class="highlight"><pre><span></span><code><span class="n">pred_errors</span> <span class="o">=</span> <span class="n">linker</span><span class="o">.</span><span class="n">evaluation</span><span class="o">.</span><span class="n">prediction_errors_from_labels_column</span><span class="p">(</span>
    <span class="s2">"ground_truth"</span><span class="p">,</span> <span class="n">include_false_positives</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">include_false_negatives</span><span class="o">=</span><span class="kc">True</span>
<span class="p">)</span>
<span class="n">linker</span><span class="o">.</span><span class="n">visualisations</span><span class="o">.</span><span class="n">waterfall_chart</span><span class="p">(</span><span class="n">pred_errors</span><span class="o">.</span><span class="n">as_record_dict</span><span class="p">(</span><span class="n">limit</span><span class="o">=</span><span class="mi">5</span><span class="p">))</span>
</code></pre></div>
<style>
  #altair-viz-3457041e8e6e4611a130d83fe67e8edf.vega-embed {
    width: 100%;
    display: flex;
  }

  #altair-viz-3457041e8e6e4611a130d83fe67e8edf.vega-embed details,
  #altair-viz-3457041e8e6e4611a130d83fe67e8edf.vega-embed details summary {
    position: relative;
  }
</style>
<div id="altair-viz-3457041e8e6e4611a130d83fe67e8edf"></div>
<script type="text/javascript">
  var VEGA_DEBUG = (typeof VEGA_DEBUG == "undefined") ? {} : VEGA_DEBUG;
  (function(spec, embedOpt){
    let outputDiv = document.currentScript.previousElementSibling;
    if (outputDiv.id !== "altair-viz-3457041e8e6e4611a130d83fe67e8edf") {
      outputDiv = document.getElementById("altair-viz-3457041e8e6e4611a130d83fe67e8edf");
    }
    const paths = {
      "vega": "https://cdn.jsdelivr.net/npm/vega@5?noext",
      "vega-lib": "https://cdn.jsdelivr.net/npm/vega-lib?noext",
      "vega-lite": "https://cdn.jsdelivr.net/npm/vega-lite@5.17.0?noext",
      "vega-embed": "https://cdn.jsdelivr.net/npm/vega-embed@6?noext",
    };

    function maybeLoadScript(lib, version) {
      var key = `${lib.replace("-", "")}_version`;
      return (VEGA_DEBUG[key] == version) ?
        Promise.resolve(paths[lib]) :
        new Promise(function(resolve, reject) {
          var s = document.createElement('script');
          document.getElementsByTagName("head")[0].appendChild(s);
          s.async = true;
          s.onload = () => {
            VEGA_DEBUG[key] = version;
            return resolve(paths[lib]);
          };
          s.onerror = () => reject(`Error loading script: ${paths[lib]}`);
          s.src = paths[lib];
        });
    }

    function showError(err) {
      outputDiv.innerHTML = `<div class="error" style="color:red;">${err}</div>`;
      throw err;
    }

    function displayChart(vegaEmbed) {
      vegaEmbed(outputDiv, spec, embedOpt)
        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));
    }

    if(typeof define === "function" && define.amd) {
      requirejs.config({paths});
      require(["vega-embed"], displayChart, err => showError(`Error loading script: ${err.message}`));
    } else {
      maybeLoadScript("vega", "5")
        .then(() => maybeLoadScript("vega-lite", "5.17.0"))
        .then(() => maybeLoadScript("vega-embed", "6"))
        .catch(showError)
        .then(() => displayChart(vegaEmbed));
    }
  })({"config": {"view": {"continuousWidth": 400, "continuousHeight": 300}}, "layer": [{"layer": [{"mark": "rule", "encoding": {"color": {"value": "black"}, "size": {"value": 0.5}, "y": {"field": "zero", "type": "quantitative"}}}, {"mark": {"type": "bar", "width": 60}, "encoding": {"color": {"condition": {"test": "(datum.log2_bayes_factor < 0)", "value": "red"}, "value": "green"}, "opacity": {"condition": {"test": "datum.column_name == 'Prior match weight' || datum.column_name == 'Final score'", "value": 1}, "value": 0.5}, "tooltip": [{"field": "column_name", "title": "Comparison column", "type": "nominal"}, {"field": "value_l", "title": "Value (L)", "type": "nominal"}, {"field": "value_r", "title": "Value (R)", "type": "nominal"}, {"field": "label_for_charts", "title": "Label", "type": "ordinal"}, {"field": "sql_condition", "title": "SQL condition", "type": "nominal"}, {"field": "comparison_vector_value", "title": "Comparison vector value", "type": "nominal"}, {"field": "bayes_factor", "format": ",.4f", "title": "Bayes factor = m/u", "type": "quantitative"}, {"field": "log2_bayes_factor", "format": ",.4f", "title": "Match weight = log2(m/u)", "type": "quantitative"}, {"field": "prob", "format": ".4f", "title": "Cumulative match probability", "type": "quantitative"}, {"field": "bayes_factor_description", "title": "Match weight description", "type": "nominal"}], "x": {"axis": {"grid": true, "labelAlign": "center", "labelAngle": -20, "labelExpr": "datum.value == 'Prior' || datum.value == 'Final score' ? '' : datum.value", "labelPadding": 10, "tickBand": "extent", "title": "Column"}, "field": "column_name", "sort": {"field": "bar_sort_order", "order": "ascending"}, "type": "nominal"}, "y": {"axis": {"grid": false, "orient": "left", "title": "Match Weight"}, "field": "previous_sum", "type": "quantitative"}, "y2": {"field": "sum"}}}, {"mark": {"type": "text", "fontWeight": "bold"}, "encoding": {"color": {"value": "white"}, "text": {"condition": {"test": "abs(datum.log2_bayes_factor) > 1", "field": "log2_bayes_factor", "format": ".2f", "type": "nominal"}, "value": ""}, "x": {"axis": {"labelAngle": -20, "title": "Column"}, "field": "column_name", "sort": {"field": "bar_sort_order", "order": "ascending"}, "type": "nominal"}, "y": {"axis": {"orient": "left"}, "field": "center", "type": "quantitative"}}}, {"mark": {"type": "text", "baseline": "bottom", "dy": -25, "fontWeight": "bold"}, "encoding": {"color": {"value": "black"}, "text": {"field": "column_name", "type": "nominal"}, "x": {"axis": {"labelAngle": -20, "title": "Column"}, "field": "column_name", "sort": {"field": "bar_sort_order", "order": "ascending"}, "type": "nominal"}, "y": {"field": "sum_top", "type": "quantitative"}}}, {"mark": {"type": "text", "baseline": "bottom", "dy": -13, "fontSize": 8}, "encoding": {"color": {"value": "grey"}, "text": {"field": "value_l", "type": "nominal"}, "x": {"axis": {"labelAngle": -20, "title": "Column"}, "field": "column_name", "sort": {"field": "bar_sort_order", "order": "ascending"}, "type": "nominal"}, "y": {"field": "sum_top", "type": "quantitative"}}}, {"mark": {"type": "text", "baseline": "bottom", "dy": -5, "fontSize": 8}, "encoding": {"color": {"value": "grey"}, "text": {"field": "value_r", "type": "nominal"}, "x": {"axis": {"labelAngle": -20, "title": "Column"}, "field": "column_name", "sort": {"field": "bar_sort_order", "order": "ascending"}, "type": "nominal"}, "y": {"field": "sum_top", "type": "quantitative"}}}]}, {"mark": {"type": "rule", "color": "black", "strokeWidth": 2, "x2Offset": 30, "xOffset": -30}, "encoding": {"x": {"axis": {"labelAngle": -20, "title": "Column"}, "field": "column_name", "sort": {"field": "bar_sort_order", "order": "ascending"}, "type": "nominal"}, "x2": {"field": "lead"}, "y": {"axis": {"labelExpr": "format(1 / (1 + pow(2, -1*datum.value)), '.2r')", "orient": "right", "title": "Probability"}, "field": "sum", "scale": {"zero": false}, "type": "quantitative"}}}], "data": {"name": "data-872e647eb63cc6ba9bf0b227e6f1f833"}, "height": 450, "params": [{"name": "record_number", "bind": {"input": "range", "max": 4, "min": 0, "step": 1}, "value": 0}], "resolve": {"axis": {"y": "independent"}}, "title": {"text": "Match weights waterfall chart", "subtitle": "How each comparison contributes to the final match score"}, "transform": [{"filter": "(datum.record_number == record_number)"}, {"filter": "(datum.bayes_factor !== 1.0)"}, {"window": [{"op": "sum", "field": "log2_bayes_factor", "as": "sum"}, {"op": "lead", "field": "column_name", "as": "lead"}], "frame": [null, 0]}, {"calculate": "datum.column_name === \"Final score\" ? datum.sum - datum.log2_bayes_factor : datum.sum", "as": "sum"}, {"calculate": "datum.lead === null ? datum.column_name : datum.lead", "as": "lead"}, {"calculate": "datum.column_name === \"Final score\" || datum.column_name === \"Prior match weight\" ? 0 : datum.sum - datum.log2_bayes_factor", "as": "previous_sum"}, {"calculate": "datum.sum > datum.previous_sum ? datum.column_name : \"\"", "as": "top_label"}, {"calculate": "datum.sum < datum.previous_sum ? datum.column_name : \"\"", "as": "bottom_label"}, {"calculate": "datum.sum > datum.previous_sum ? datum.sum : datum.previous_sum", "as": "sum_top"}, {"calculate": "datum.sum < datum.previous_sum ? datum.sum : datum.previous_sum", "as": "sum_bottom"}, {"calculate": "(datum.sum + datum.previous_sum) / 2", "as": "center"}, {"calculate": "(datum.log2_bayes_factor > 0 ? \"+\" : \"\") + datum.log2_bayes_factor", "as": "text_log2_bayes_factor"}, {"calculate": "datum.sum < datum.previous_sum ? 4 : -4", "as": "dy"}, {"calculate": "datum.sum < datum.previous_sum ? \"top\" : \"bottom\"", "as": "baseline"}, {"calculate": "1. / (1 + pow(2, -1.*datum.sum))", "as": "prob"}, {"calculate": "0*datum.sum", "as": "zero"}], "width": {"step": 75}, "$schema": "https://vega.github.io/schema/vega-lite/v5.9.3.json", "datasets": {"data-872e647eb63cc6ba9bf0b227e6f1f833": [{"column_name": "Prior", "label_for_charts": "Starting match weight (prior)", "sql_condition": null, "log2_bayes_factor": -15.468019399518882, "bayes_factor": 2.206287920573635e-05, "comparison_vector_value": null, "m_probability": null, "u_probability": null, "bayes_factor_description": null, "value_l": "", "value_r": "", "term_frequency_adjustment": null, "bar_sort_order": 0, "record_number": 0}, {"sql_condition": "(ABS(\"amount_l\" - \"amount_r\") / (CASE WHEN \"amount_r\" > \"amount_l\" THEN \"amount_r\" ELSE \"amount_l\" END)) < 0.3", "label_for_charts": "Percentage difference of 'amount' within 30.00%", "m_probability": 0.0007603567508388371, "u_probability": 0.08587395590505811, "bayes_factor": 0.008854334737757794, "log2_bayes_factor": -6.819400369169093, "comparison_vector_value": 1, "bayes_factor_description": "If comparison level is `percentage difference of 'amount' within 30.00%` then comparison is  112.94 times less likely to be a match", "column_name": "amount", "value_l": "31.6", "value_r": "35.57", "term_frequency_adjustment": false, "bar_sort_order": 1, "record_number": 0}, {"sql_condition": "levenshtein(\"memo_l\", \"memo_r\") <= 10", "label_for_charts": "Levenshtein distance of memo <= 10", "m_probability": 0.14779726216531575, "u_probability": 0.09805717694175792, "bayes_factor": 1.507255937554693, "log2_bayes_factor": 0.5919244126159111, "comparison_vector_value": 1, "bayes_factor_description": "If comparison level is `levenshtein distance of memo <= 10` then comparison is 1.51 times more likely to be a match", "column_name": "memo", "value_l": "T J. SKINNER mo", "value_r": "T J. SKINNER money CHQ", "term_frequency_adjustment": false, "bar_sort_order": 2, "record_number": 0}, {"sql_condition": "transaction_date_r - transaction_date_l <= 30 and transaction_date_r >= transaction_date_l", "label_for_charts": "<=30 days", "m_probability": 0.04864613690105879, "u_probability": 0.16279157055008106, "bayes_factor": 0.2988246672520021, "log2_bayes_factor": -1.7426288508657286, "comparison_vector_value": 1, "bayes_factor_description": "If comparison level is `<=30 days` then comparison is  3.35 times less likely to be a match", "column_name": "transaction_date", "value_l": "2022-03-31 00:00:00", "value_r": "2022-04-19 00:00:00", "term_frequency_adjustment": false, "bar_sort_order": 3, "record_number": 0}, {"column_name": "Final score", "label_for_charts": "Final score", "sql_condition": null, "log2_bayes_factor": -23.438124206937793, "bayes_factor": 8.798762022263209e-08, "comparison_vector_value": null, "m_probability": null, "u_probability": null, "bayes_factor_description": null, "value_l": "", "value_r": "", "term_frequency_adjustment": null, "bar_sort_order": 4, "record_number": 0}, {"column_name": "Prior", "label_for_charts": "Starting match weight (prior)", "sql_condition": null, "log2_bayes_factor": -15.468019399518882, "bayes_factor": 2.206287920573635e-05, "comparison_vector_value": null, "m_probability": null, "u_probability": null, "bayes_factor_description": null, "value_l": "", "value_r": "", "term_frequency_adjustment": null, "bar_sort_order": 0, "record_number": 1}, {"sql_condition": "(ABS(\"amount_l\" - \"amount_r\") / (CASE WHEN \"amount_r\" > \"amount_l\" THEN \"amount_r\" ELSE \"amount_l\" END)) < 0.3", "label_for_charts": "Percentage difference of 'amount' within 30.00%", "m_probability": 0.0007603567508388371, "u_probability": 0.08587395590505811, "bayes_factor": 0.008854334737757794, "log2_bayes_factor": -6.819400369169093, "comparison_vector_value": 1, "bayes_factor_description": "If comparison level is `percentage difference of 'amount' within 30.00%` then comparison is  112.94 times less likely to be a match", "column_name": "amount", "value_l": "11756.59", "value_r": "13069.32", "term_frequency_adjustment": false, "bar_sort_order": 1, "record_number": 1}, {"sql_condition": "ELSE", "label_for_charts": "All other comparisons", "m_probability": 0.058106596256656165, "u_probability": 0.8723247127661086, "bayes_factor": 0.06661120040082592, "log2_bayes_factor": -3.9080914088124747, "comparison_vector_value": 0, "bayes_factor_description": "If comparison level is `all other comparisons` then comparison is  15.01 times less likely to be a match", "column_name": "memo", "value_l": "P GODEFFROY payment WRE", "value_r": "P GODEFFROY", "term_frequency_adjustment": false, "bar_sort_order": 2, "record_number": 1}, {"sql_condition": "transaction_date_r - transaction_date_l <= 1 and transaction_date_r >= transaction_date_l", "label_for_charts": "1 day", "m_probability": 0.38903576440838894, "u_probability": 0.01929737000675606, "bayes_factor": 20.160040682859194, "log2_bayes_factor": 4.333426645079358, "comparison_vector_value": 4, "bayes_factor_description": "If comparison level is `1 day` then comparison is 20.16 times more likely to be a match", "column_name": "transaction_date", "value_l": "2022-04-10 00:00:00", "value_r": "2022-04-11 00:00:00", "term_frequency_adjustment": false, "bar_sort_order": 3, "record_number": 1}, {"column_name": "Final score", "label_for_charts": "Final score", "sql_condition": null, "log2_bayes_factor": -21.862084532421093, "bayes_factor": 2.6233533294694627e-07, "comparison_vector_value": null, "m_probability": null, "u_probability": null, "bayes_factor_description": null, "value_l": "", "value_r": "", "term_frequency_adjustment": null, "bar_sort_order": 4, "record_number": 1}, {"column_name": "Prior", "label_for_charts": "Starting match weight (prior)", "sql_condition": null, "log2_bayes_factor": -15.468019399518882, "bayes_factor": 2.206287920573635e-05, "comparison_vector_value": null, "m_probability": null, "u_probability": null, "bayes_factor_description": null, "value_l": "", "value_r": "", "term_frequency_adjustment": null, "bar_sort_order": 0, "record_number": 2}, {"sql_condition": "(ABS(\"amount_l\" - \"amount_r\") / (CASE WHEN \"amount_r\" > \"amount_l\" THEN \"amount_r\" ELSE \"amount_l\" END)) < 0.3", "label_for_charts": "Percentage difference of 'amount' within 30.00%", "m_probability": 0.0007603567508388371, "u_probability": 0.08587395590505811, "bayes_factor": 0.008854334737757794, "log2_bayes_factor": -6.819400369169093, "comparison_vector_value": 1, "bayes_factor_description": "If comparison level is `percentage difference of 'amount' within 30.00%` then comparison is  112.94 times less likely to be a match", "column_name": "amount", "value_l": "727.17", "value_r": "808.1", "term_frequency_adjustment": false, "bar_sort_order": 1, "record_number": 2}, {"sql_condition": "levenshtein(\"memo_l\", \"memo_r\") <= 6", "label_for_charts": "Levenshtein distance of memo <= 6", "m_probability": 0.2591582087321121, "u_probability": 0.02739956704423493, "bayes_factor": 9.458478242145832, "log2_bayes_factor": 3.241608089578434, "comparison_vector_value": 2, "bayes_factor_description": "If comparison level is `levenshtein distance of memo <= 6` then comparison is 9.46 times more likely to be a match", "column_name": "memo", "value_l": "GIAMBATTISTA A ", "value_r": "GIAMBATTISTA A  CHQ", "term_frequency_adjustment": false, "bar_sort_order": 2, "record_number": 2}, {"sql_condition": "transaction_date_r - transaction_date_l <= 30 and transaction_date_r >= transaction_date_l", "label_for_charts": "<=30 days", "m_probability": 0.04864613690105879, "u_probability": 0.16279157055008106, "bayes_factor": 0.2988246672520021, "log2_bayes_factor": -1.7426288508657286, "comparison_vector_value": 1, "bayes_factor_description": "If comparison level is `<=30 days` then comparison is  3.35 times less likely to be a match", "column_name": "transaction_date", "value_l": "2022-04-15 00:00:00", "value_r": "2022-04-30 00:00:00", "term_frequency_adjustment": false, "bar_sort_order": 3, "record_number": 2}, {"column_name": "Final score", "label_for_charts": "Final score", "sql_condition": null, "log2_bayes_factor": -20.788440529975272, "bayes_factor": 5.521484246425513e-07, "comparison_vector_value": null, "m_probability": null, "u_probability": null, "bayes_factor_description": null, "value_l": "", "value_r": "", "term_frequency_adjustment": null, "bar_sort_order": 4, "record_number": 2}, {"column_name": "Prior", "label_for_charts": "Starting match weight (prior)", "sql_condition": null, "log2_bayes_factor": -15.468019399518882, "bayes_factor": 2.206287920573635e-05, "comparison_vector_value": null, "m_probability": null, "u_probability": null, "bayes_factor_description": null, "value_l": "", "value_r": "", "term_frequency_adjustment": null, "bar_sort_order": 0, "record_number": 3}, {"sql_condition": "(ABS(\"amount_l\" - \"amount_r\") / (CASE WHEN \"amount_r\" > \"amount_l\" THEN \"amount_r\" ELSE \"amount_l\" END)) < 0.1", "label_for_charts": "Percentage difference of 'amount' within 10.00%", "m_probability": 0.23149568734526935, "u_probability": 0.02613255263334084, "bayes_factor": 8.858517979216424, "log2_bayes_factor": 3.1470653575978704, "comparison_vector_value": 2, "bayes_factor_description": "If comparison level is `percentage difference of 'amount' within 10.00%` then comparison is 8.86 times more likely to be a match", "column_name": "amount", "value_l": "26103.23", "value_r": "27036.92", "term_frequency_adjustment": false, "bar_sort_order": 1, "record_number": 3}, {"sql_condition": "ELSE", "label_for_charts": "All other comparisons", "m_probability": 0.058106596256656165, "u_probability": 0.8723247127661086, "bayes_factor": 0.06661120040082592, "log2_bayes_factor": -3.9080914088124747, "comparison_vector_value": 0, "bayes_factor_description": "If comparison level is `all other comparisons` then comparison is  15.01 times less likely to be a match", "column_name": "memo", "value_l": "J H d761f46c WR", "value_r": "J H", "term_frequency_adjustment": false, "bar_sort_order": 2, "record_number": 3}, {"sql_condition": "transaction_date_r - transaction_date_l <= 30 and transaction_date_r >= transaction_date_l", "label_for_charts": "<=30 days", "m_probability": 0.04864613690105879, "u_probability": 0.16279157055008106, "bayes_factor": 0.2988246672520021, "log2_bayes_factor": -1.7426288508657286, "comparison_vector_value": 1, "bayes_factor_description": "If comparison level is `<=30 days` then comparison is  3.35 times less likely to be a match", "column_name": "transaction_date", "value_l": "2022-03-13 00:00:00", "value_r": "2022-04-01 00:00:00", "term_frequency_adjustment": false, "bar_sort_order": 3, "record_number": 3}, {"column_name": "Final score", "label_for_charts": "Final score", "sql_condition": null, "log2_bayes_factor": -17.971674301599215, "bayes_factor": 3.890334664244009e-06, "comparison_vector_value": null, "m_probability": null, "u_probability": null, "bayes_factor_description": null, "value_l": "", "value_r": "", "term_frequency_adjustment": null, "bar_sort_order": 4, "record_number": 3}, {"column_name": "Prior", "label_for_charts": "Starting match weight (prior)", "sql_condition": null, "log2_bayes_factor": -15.468019399518882, "bayes_factor": 2.206287920573635e-05, "comparison_vector_value": null, "m_probability": null, "u_probability": null, "bayes_factor_description": null, "value_l": "", "value_r": "", "term_frequency_adjustment": null, "bar_sort_order": 0, "record_number": 4}, {"sql_condition": "(ABS(\"amount_l\" - \"amount_r\") / (CASE WHEN \"amount_r\" > \"amount_l\" THEN \"amount_r\" ELSE \"amount_l\" END)) < 0.1", "label_for_charts": "Percentage difference of 'amount' within 10.00%", "m_probability": 0.23149568734526935, "u_probability": 0.02613255263334084, "bayes_factor": 8.858517979216424, "log2_bayes_factor": 3.1470653575978704, "comparison_vector_value": 2, "bayes_factor_description": "If comparison level is `percentage difference of 'amount' within 10.00%` then comparison is 8.86 times more likely to be a match", "column_name": "amount", "value_l": "63.84", "value_r": "67.64", "term_frequency_adjustment": false, "bar_sort_order": 1, "record_number": 4}, {"sql_condition": "ELSE", "label_for_charts": "All other comparisons", "m_probability": 0.058106596256656165, "u_probability": 0.8723247127661086, "bayes_factor": 0.06661120040082592, "log2_bayes_factor": -3.9080914088124747, "comparison_vector_value": 0, "bayes_factor_description": "If comparison level is `all other comparisons` then comparison is  15.01 times less likely to be a match", "column_name": "memo", "value_l": "P G", "value_r": "P G donation BGC", "term_frequency_adjustment": false, "bar_sort_order": 2, "record_number": 4}, {"sql_condition": "transaction_date_r - transaction_date_l <= 30 and transaction_date_r >= transaction_date_l", "label_for_charts": "<=30 days", "m_probability": 0.04864613690105879, "u_probability": 0.16279157055008106, "bayes_factor": 0.2988246672520021, "log2_bayes_factor": -1.7426288508657286, "comparison_vector_value": 1, "bayes_factor_description": "If comparison level is `<=30 days` then comparison is  3.35 times less likely to be a match", "column_name": "transaction_date", "value_l": "2022-03-16 00:00:00", "value_r": "2022-04-03 00:00:00", "term_frequency_adjustment": false, "bar_sort_order": 3, "record_number": 4}, {"column_name": "Final score", "label_for_charts": "Final score", "sql_condition": null, "log2_bayes_factor": -17.971674301599215, "bayes_factor": 3.890334664244009e-06, "comparison_vector_value": null, "m_probability": null, "u_probability": null, "bayes_factor_description": null, "value_l": "", "value_r": "", "term_frequency_adjustment": null, "bar_sort_order": 4, "record_number": 4}]}}, {"mode": "vega-lite"});
</script></div>









  




                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Footer" >
        
          
          <a href="deduplicate_50k_synthetic.html" class="md-footer__link md-footer__link--prev" aria-label="Previous: Deduplicate 50k rows historical persons">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Previous
              </span>
              <div class="md-ellipsis">
                Deduplicate 50k rows historical persons
              </div>
            </div>
          </a>
        
        
          
          <a href="../duckdb_no_test/business_rates_match.html" class="md-footer__link md-footer__link--next" aria-label="Next: Linking businesses">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Next
              </span>
              <div class="md-ellipsis">
                Linking businesses
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        
<div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://github.com/moj-analytical-services/splink" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://pypi.org/project/splink/" target="_blank" rel="noopener" title="pypi.org" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.8 200.5c-7.7-30.9-22.3-54.2-53.4-54.2h-40.1v47.4c0 36.8-31.2 67.8-66.8 67.8H172.7c-29.2 0-53.4 25-53.4 54.3v101.8c0 29 25.2 46 53.4 54.3 33.8 9.9 66.3 11.7 106.8 0 26.9-7.8 53.4-23.5 53.4-54.3v-40.7H226.2v-13.6h160.2c31.1 0 42.6-21.7 53.4-54.2 11.2-33.5 10.7-65.7 0-108.6M286.2 444.7a20.4 20.4 0 1 1 0-40.7 20.4 20.4 0 1 1 0 40.7M167.8 248.1h106.8c29.7 0 53.4-24.5 53.4-54.3V91.9c0-29-24.4-50.7-53.4-55.6-35.8-5.9-74.7-5.6-106.8.1-45.2 8-53.4 24.7-53.4 55.6v40.7h106.9v13.6h-147c-31.1 0-58.3 18.7-66.8 54.2-9.8 40.7-10.2 66.1 0 108.6 7.6 31.6 25.7 54.2 56.8 54.2H101v-48.8c0-35.3 30.5-66.4 66.8-66.4m-6.6-183.4a20.4 20.4 0 1 1 0 40.8 20.4 20.4 0 1 1 0-40.8"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://www.robinlinacre.com/" target="_blank" rel="noopener" title="www.robinlinacre.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M311.1 233.4c12.5 12.5 12.5 32.8 0 45.3l-192 192c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L243.2 256 73.9 86.6c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0l192 192z"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://moj-analytical-services.github.io/splink/feed_rss_created.xml" target="_blank" rel="noopener" title="moj-analytical-services.github.io" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M0 64c0-17.7 14.3-32 32-32 229.8 0 416 186.2 416 416 0 17.7-14.3 32-32 32s-32-14.3-32-32C384 253.6 226.4 96 32 96 14.3 96 0 81.7 0 64m0 352a64 64 0 1 1 128 0 64 64 0 1 1-128 0m32-256c159.1 0 288 128.9 288 288 0 17.7-14.3 32-32 32s-32-14.3-32-32c0-123.7-100.3-224-224-224-17.7 0-32-14.3-32-32s14.3-32 32-32"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "../../..", "features": ["content.code.annotate", "content.code.copy", "content.tabs.link", "content.tooltips", "header.autohide", "search.highlight", "search.share", "search.suggest", "navigation.indexes", "navigation.footer", "content.action.edit", "navigation.tabs", "navigation.tabs.sticky", "navigation.top", "toc.follow"], "search": "../../../assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../../assets/javascripts/bundle.79ae519e.min.js"></script>
      
        <script src="../../../javascripts/mathjax.js"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
      
    
  </body>
</html>